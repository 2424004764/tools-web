var e=(e,l,t)=>new Promise((a,i)=>{var o=e=>{try{n(t.next(e))}catch(l){i(l)}},s=e=>{try{n(t.throw(e))}catch(l){i(l)}},n=e=>e.done?a(e.value):Promise.resolve(e.value).then(o,s);n((t=t.apply(e,l)).next())});import{_ as l}from"./chunk-d1d41a48.js";import{_ as t}from"./chunk-9c6aa90d.js";import{c as a,_ as i}from"../assets/index-bb54d8b5.js";import{E as o}from"./chunk-e922f209.js";import{d as s,q as n,m as r,al as d,o as u,c,R as m,a as f,J as y,M as x,O as p,P as g,I as h}from"./chunk-bb5ca2a1.js";import"./chunk-cdccf614.js";import"./chunk-27701a41.js";const A={class:"flex flex-col mt-3 flex-1"},H={class:"p-4 rounded-2xl bg-white"},v={class:"flex flex-wrap gap-3 items-center"},_={key:0,class:"flex-1 min-w-[240px]"},S={class:"mt-4"},b={class:"mb-2 text-sm text-gray-600"},C={class:"mt-2 flex flex-wrap gap-2 button-container"},w={class:"mt-3"},k={class:"mt-6"},M={key:0,class:"mt-2 text-xs text-gray-500"},R={class:"mt-2 flex flex-wrap gap-2 button-container"},V={class:"mt-3"},j=i(s({__name:"Hash",setup(i){const s=n({title:"哈希校验/HMAC"}),j=n({algo:"SHA-256",text:"",hmacKey:"",textResult:"",fileResult:"",fileName:"",fileSize:0,loadingText:!1,loadingFile:!1,file:null}),z=e=>(new TextEncoder).encode(e),F=e=>{const l=new Uint8Array(e);return Array.from(l).map(e=>e.toString(16).padStart(2,"0")).join("")},K=()=>{if(!window.crypto||!window.crypto.subtle)throw o.error("当前环境不支持 Web Crypto"),new Error("WebCrypto not available")},U=(l,t)=>e(this,null,function*(){K();const e=yield crypto.subtle.digest({name:l},t);return F(e)}),B=()=>e(this,null,function*(){try{if(j.loadingText=!0,"HMAC-SHA256"===j.algo){K();const e=yield crypto.subtle.importKey("raw",z(j.hmacKey||""),{name:"HMAC",hash:"SHA-256"},!1,["sign"]),l=yield crypto.subtle.sign("HMAC",e,z(j.text||""));j.textResult=F(l)}else{const e=yield U(j.algo,z(j.text||"").buffer);j.textResult=e}}catch(e){}finally{j.loadingText=!1}}),N=l=>e(this,null,function*(){try{if(j.loadingFile=!0,"HMAC-SHA256"===j.algo){K();const e=yield crypto.subtle.importKey("raw",z(j.hmacKey||""),{name:"HMAC",hash:"SHA-256"},!1,["sign"]),t=yield l.arrayBuffer(),a=yield crypto.subtle.sign("HMAC",e,t);j.fileResult=F(a)}else{const e=yield l.arrayBuffer(),t=yield U(j.algo,e);j.fileResult=t}}catch(e){}finally{j.loadingFile=!1}}),T=l=>e(this,null,function*(){const e=l.target,t=e.files&&e.files[0];t&&(j.fileName=t.name,j.fileSize=t.size,j.file=t,yield N(t))}),E=()=>{j.text="",j.textResult=""},P=()=>a(j.textResult),q=()=>a(j.fileResult),G=()=>{j.text="The quick brown fox jumps over the lazy dog"};return r(()=>[j.text,j.algo,j.hmacKey],()=>{B(),j.file&&N(j.file)}),(e,a)=>{const i=d("el-option"),o=d("el-select"),n=d("el-input"),r=d("el-link"),z=d("el-button"),F=d("el-text");return u(),c("div",A,[m(l,{title:s.title},null,8,["title"]),f("div",H,[f("div",v,[f("div",null,[m(o,{modelValue:j.algo,"onUpdate:modelValue":a[0]||(a[0]=e=>j.algo=e),placeholder:"选择算法",style:{width:"180px"}},{default:y(()=>[m(i,{label:"SHA-1",value:"SHA-1"}),m(i,{label:"SHA-256",value:"SHA-256"}),m(i,{label:"SHA-512",value:"SHA-512"}),m(i,{label:"HMAC-SHA256",value:"HMAC-SHA256"})]),_:1},8,["modelValue"])]),"HMAC-SHA256"===j.algo?(u(),c("div",_,[m(n,{modelValue:j.hmacKey,"onUpdate:modelValue":a[1]||(a[1]=e=>j.hmacKey=e),placeholder:"HMAC 密钥（文本）"},null,8,["modelValue"])])):x("",!0)]),f("div",S,[f("div",b,[a[7]||(a[7]=p(" 文本摘要/HMAC ",-1)),m(r,{class:"ml-2",type:"primary",onClick:G},{default:y(()=>a[6]||(a[6]=[p("填充示例",-1)])),_:1,__:[6]})]),m(n,{modelValue:j.text,"onUpdate:modelValue":a[2]||(a[2]=e=>j.text=e),type:"textarea",rows:6,placeholder:"在此输入文本"},null,8,["modelValue"]),f("div",C,[m(z,{onClick:P},{default:y(()=>a[8]||(a[8]=[p("复制结果",-1)])),_:1,__:[8]}),m(z,{type:"danger",onClick:E},{default:y(()=>a[9]||(a[9]=[p("清空",-1)])),_:1,__:[9]})]),f("div",w,[a[10]||(a[10]=f("div",{class:"text-sm text-gray-600 mb-1"},"结果：",-1)),m(n,{modelValue:j.textResult,"onUpdate:modelValue":a[3]||(a[3]=e=>j.textResult=e),readonly:""},null,8,["modelValue"])])]),f("div",k,[a[15]||(a[15]=f("div",{class:"mb-2 text-sm text-gray-600"},"文件摘要/HMAC",-1)),f("input",{type:"file",onChange:T},null,32),j.fileName?(u(),c("div",M," 文件："+g(j.fileName)+"（"+g(j.fileSize)+" 字节 ≈ "+g((j.fileSize/1024).toFixed(2))+" KB / "+g((j.fileSize/1024/1024).toFixed(2))+" MB / "+g((j.fileSize/1024/1024/1024).toFixed(2))+" GB） ",1)):x("",!0),f("div",R,[m(z,{onClick:q},{default:y(()=>a[11]||(a[11]=[p("复制结果",-1)])),_:1,__:[11]}),m(z,{type:"danger",onClick:a[4]||(a[4]=e=>{return l=null==e?void 0:e.target,j.fileName="",j.fileSize=0,j.fileResult="",j.file=null,j.loadingFile=!1,void(l&&(l.value=""));var l})},{default:y(()=>a[12]||(a[12]=[p("清空",-1)])),_:1,__:[12]}),j.loadingFile?(u(),h(z,{key:0,loading:!0,disabled:""},{default:y(()=>a[13]||(a[13]=[p("计算中",-1)])),_:1,__:[13]})):x("",!0)]),f("div",V,[a[14]||(a[14]=f("div",{class:"text-sm text-gray-600 mb-1"},"结果：",-1)),m(n,{modelValue:j.fileResult,"onUpdate:modelValue":a[5]||(a[5]=e=>j.fileResult=e),readonly:""},null,8,["modelValue"])])])]),m(t,{title:"描述"},{default:y(()=>[m(F,null,{default:y(()=>a[16]||(a[16]=[p(" 支持 SHA-1、SHA-256、SHA-512 与 HMAC-SHA256；文本/文件摘要；结果十六进制显示，可复制。 ",-1)])),_:1,__:[16]})]),_:1})])}}}),[["__scopeId","data-v-14f6807c"]]);export{j as default};
