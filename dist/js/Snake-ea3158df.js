var e=Object.defineProperty,a=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,r=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t,s=(e,s)=>{for(var d in s||(s={}))l.call(s,d)&&r(e,d,s[d]);if(a)for(var d of a(s))t.call(s,d)&&r(e,d,s[d]);return e};import{_ as d}from"./chunk-6b313974.js";import{_ as o}from"./chunk-9c6aa90d.js";import{d as i,q as n,r as c,t as u,U as b,al as g,o as v,c as x,R as y,a as h,P as m,J as p,O as f,Q as w,a4 as S,E as k,I as _,M as P,aF as z}from"./chunk-bb5ca2a1.js";import{_ as I}from"../assets/index-2738d5ba.js";import"./chunk-7296d483.js";import"./chunk-c8f53b98.js";import"./chunk-dd4ac5f9.js";const j={class:"flex flex-col mt-3 ml-4 flex-1 mr-3"},O={class:"p-6 rounded-2xl bg-white shadow-sm border border-gray-200"},M={class:"max-w-2xl mx-auto"},C={class:"flex justify-between items-center mb-6"},A={class:"text-center bg-blue-50 p-4 rounded-lg border border-blue-200 flex-1 mx-2"},T={class:"text-2xl font-bold text-blue-600"},V={class:"text-center bg-green-50 p-4 rounded-lg border border-green-200 flex-1 mx-2 relative"},W={class:"flex items-center justify-center space-x-2"},D={class:"text-2xl font-bold text-green-600"},E={class:"text-center bg-purple-50 p-4 rounded-lg border border-purple-200 flex-1 mx-2"},H={class:"text-2xl font-bold text-purple-600"},L={class:"flex justify-between items-center mb-6"},U={class:"flex items-center space-x-6"},$={class:"flex items-center space-x-3"},F={class:"flex items-center space-x-3"},N={class:"flex justify-center mb-6"},R={class:"flex justify-center space-x-4 mb-6"},q={class:"lg:hidden flex justify-center mb-6"},B={class:"bg-gray-100 rounded-lg p-4 border border-gray-300"},J={class:"grid grid-cols-3 gap-2"},Q={class:"col-start-2"},G={class:"col-start-1 row-start-2"},K={class:"col-start-2 row-start-2"},X={class:"col-start-3 row-start-2"},Y={key:0,class:"text-center mb-6"},Z={class:"bg-red-50 border-2 border-red-300 rounded-lg p-4 shadow-md"},ee={class:"text-red-600"},ae={class:"text-purple-600"},le={key:0,class:"text-green-600 font-medium"},te=I(i({__name:"Snake",setup(e){const a=n({title:"贪吃蛇"}),l=n({isPlaying:!1,score:0,highScore:0,gameOver:!1,gameTime:0,hasStarted:!1}),t=n({gridSize:window.innerWidth<1024?10:20,cellSize:window.innerWidth<1024?25:20,speed:150,scorePerFood:1}),r=[{label:"慢速",value:200},{label:"正常",value:150},{label:"快速",value:100},{label:"极速",value:50}],i=()=>{const e=t.gridSize;return{x:Math.floor(Math.random()*e),y:Math.floor(Math.random()*e)}};let I=[],te={x:0,y:0},re={x:1,y:0};const se=c([]),de=c({x:0,y:0}),oe=c({x:1,y:0}),ie=()=>{for(I=(()=>{const e=t.gridSize,a=Math.floor(Math.random()*(e-8))+4,l=Math.floor(Math.random()*(e-8))+4,r=[{x:1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:-1}],s=r[Math.floor(Math.random()*r.length)];return[{x:a,y:l},{x:a-s.x,y:l-s.y},{x:a-2*s.x,y:l-2*s.y}]})(),te=i(),re=(e=>{if(e.length<2)return{x:1,y:0};const a=e[0],l=e[1];return{x:a.x-l.x,y:a.y-l.y}})(I);I.some(e=>e.x===te.x&&e.y===te.y);)te=i();se.value=[...I],de.value=s({},te),oe.value=s({},re)};ie();let ne=null,ce=null;const ue=()=>{const e=Math.floor(Math.random()*t.gridSize),a=Math.floor(Math.random()*t.gridSize);se.value.some(l=>l.x===e&&l.y===a)?ue():de.value={x:e,y:a}},be=()=>{if(!l.isPlaying)return;const e=s({},se.value[0]);e.x+=oe.value.x,e.y+=oe.value.y,(e=>e.x<0||e.x>=t.gridSize||e.y<0||e.y>=t.gridSize||se.value.some(a=>a.x===e.x&&a.y===e.y))(e)?ge():(se.value.unshift(e),e.x===de.value.x&&e.y===de.value.y?(l.score+=t.scorePerFood,l.score>l.highScore&&(l.highScore=l.score,Se()),ue()):se.value.pop())},ge=()=>{l.isPlaying=!1,l.gameOver=!0,l.score>l.highScore&&(l.highScore=l.score,Se()),ne&&(clearInterval(ne),ne=null),ce&&(clearInterval(ce),ce=null)},ve=e=>{const a=e%60;return`${Math.floor(e/60).toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`},xe=()=>{const e=l.hasStarted&&!l.gameOver;l.isPlaying=!0,l.gameOver=!1,e||(l.score=0,l.gameTime=0,se.value=[...I],de.value=s({},te),oe.value=s({},re)),ne&&clearInterval(ne),ce&&clearInterval(ce),ne=setInterval(be,t.speed),ce=setInterval(()=>{l.isPlaying&&l.gameTime++},1e3),l.hasStarted=!0},ye=()=>{l.isPlaying?(l.isPlaying=!1,ne&&(clearInterval(ne),ne=null),ce&&(clearInterval(ce),ce=null)):(l.isPlaying=!0,ne=setInterval(be,t.speed),ce=setInterval(()=>{l.isPlaying&&l.gameTime++},1e3))},he=()=>{ne&&clearInterval(ne),ie(),l.hasStarted=!1,xe()},me=()=>{ne&&l.isPlaying&&(clearInterval(ne),ne=setInterval(be,t.speed))},pe=e=>{if(l.isPlaying)switch(e){case"up":0===oe.value.y&&(oe.value={x:0,y:-1});break;case"down":0===oe.value.y&&(oe.value={x:0,y:1});break;case"left":0===oe.value.x&&(oe.value={x:-1,y:0});break;case"right":0===oe.value.x&&(oe.value={x:1,y:0})}},fe=e=>{if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"," ","w","a","s","d","W","A","S","D"].includes(e.key)&&e.preventDefault(),l.isPlaying||" "===e.key)switch(e.key.toLowerCase()){case"arrowup":case"w":0===oe.value.y&&(oe.value={x:0,y:-1});break;case"arrowdown":case"s":0===oe.value.y&&(oe.value={x:0,y:1});break;case"arrowleft":case"a":0===oe.value.x&&(oe.value={x:-1,y:0});break;case"arrowright":case"d":0===oe.value.x&&(oe.value={x:1,y:0});break;case" ":l.gameOver?he():ye()}};u(()=>{document.addEventListener("keydown",fe),we()}),b(()=>{document.removeEventListener("keydown",fe),ne&&clearInterval(ne),ce&&clearInterval(ce),Se()});const we=()=>{try{const e=localStorage.getItem("snakeHighScore");if(e){const a=parseInt(e);!isNaN(a)&&a>=0&&(l.highScore=a)}}catch(e){}},Se=()=>{try{localStorage.setItem("snakeHighScore",l.highScore.toString())}catch(e){}},ke=()=>{l.highScore=0;try{localStorage.removeItem("snakeHighScore")}catch(e){}},_e=t.gridSize*t.cellSize,Pe=[{name:"经典绿色",head:"#15803d",body:"#22c55e",food:"#ef4444"},{name:"蓝色主题",head:"#1d4ed8",body:"#3b82f6",food:"#f59e0b"},{name:"紫色主题",head:"#7c3aed",body:"#a855f7",food:"#10b981"},{name:"橙色主题",head:"#c2410c",body:"#f97316",food:"#8b5cf6"},{name:"粉色主题",head:"#be185d",body:"#ec4899",food:"#06b6d4"},{name:"红色主题",head:"#b91c1c",body:"#ef4444",food:"#10b981"},{name:"青色主题",head:"#0f766e",body:"#14b8a6",food:"#f97316"},{name:"黄色主题",head:"#a16207",body:"#eab308",food:"#8b5cf6"},{name:"灰色主题",head:"#374151",body:"#6b7280",food:"#ef4444"},{name:"靛蓝主题",head:"#3730a3",body:"#6366f1",food:"#f59e0b"},{name:"青绿主题",head:"#047857",body:"#10b981",food:"#f97316"},{name:"玫瑰主题",head:"#be123c",body:"#f43f5e",food:"#06b6d4"}],ze=c(0),Ie=()=>Pe[ze.value];return(e,s)=>{const i=g("el-button"),n=g("el-option"),c=g("el-select"),u=g("el-text");return v(),x("div",j,[y(d,{title:a.title},null,8,["title"]),h("div",O,[h("div",M,[h("div",C,[h("div",A,[s[6]||(s[6]=h("h3",{class:"text-lg font-medium text-blue-900"},"得分",-1)),h("p",T,m(l.score),1)]),h("div",V,[s[8]||(s[8]=h("h3",{class:"text-lg font-medium text-green-900"},"最高分",-1)),h("div",W,[h("p",D,m(l.highScore),1),y(i,{onClick:ke,type:"danger",size:"small",disabled:l.isPlaying||!l.gameOver&&l.gameTime>0,class:"bg-red-500 hover:bg-red-600 border-red-600 text-xs h-6 px-2"},{default:p(()=>s[7]||(s[7]=[f(" 清空 ",-1)])),_:1,__:[7]},8,["disabled"])])]),h("div",E,[s[9]||(s[9]=h("h3",{class:"text-lg font-medium text-purple-900"},"游戏时间",-1)),h("p",H,m(ve(l.gameTime)),1)])]),h("div",L,[h("div",U,[h("div",$,[s[10]||(s[10]=h("label",{class:"text-sm font-medium text-gray-700 whitespace-nowrap"},"游戏速度：",-1)),y(c,{modelValue:t.speed,"onUpdate:modelValue":s[0]||(s[0]=e=>t.speed=e),onChange:me,disabled:l.isPlaying,style:{width:"100px"}},{default:p(()=>[(v(),x(w,null,S(r,e=>y(n,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","disabled"])]),h("div",F,[s[11]||(s[11]=h("label",{class:"text-sm font-medium text-gray-700 whitespace-nowrap"},"颜色主题：",-1)),y(c,{modelValue:ze.value,"onUpdate:modelValue":s[1]||(s[1]=e=>ze.value=e),disabled:l.isPlaying,style:{width:"120px"}},{default:p(()=>[(v(),x(w,null,S(Pe,(e,a)=>y(n,{key:a,label:e.name,value:a},null,8,["label","value"])),64))]),_:1},8,["modelValue","disabled"])])])]),h("div",N,[h("div",{class:"bg-gray-100 relative shadow-lg",style:k({width:_e+"px",height:_e+"px",maxWidth:"100%",maxHeight:"60vh"})},[(v(!0),x(w,null,S(t.gridSize-1,e=>(v(),x("div",{key:`h-${e}`,class:"absolute bg-gray-300",style:k({width:"1px",height:_e+"px",left:e*t.cellSize+"px",top:"0px"})},null,4))),128)),(v(!0),x(w,null,S(t.gridSize-1,e=>(v(),x("div",{key:`v-${e}`,class:"absolute bg-gray-300",style:k({height:"1px",width:_e+"px",left:"0px",top:e*t.cellSize+"px"})},null,4))),128)),(v(!0),x(w,null,S(se.value,(e,a)=>(v(),x("div",{key:a,class:"absolute shadow-sm",style:k({width:t.cellSize-1+"px",height:t.cellSize-1+"px",left:e.x*t.cellSize+"px",top:e.y*t.cellSize+"px",zIndex:0===a?2:1})},[0===a?(v(),x("div",{key:0,class:"w-full h-full rounded-sm",style:k({backgroundColor:Ie().head})},null,4)):(v(),x("div",{key:1,class:"w-full h-full rounded-sm",style:k({backgroundColor:Ie().body})},null,4))],4))),128)),h("div",{class:"absolute rounded-full shadow-md animate-pulse",style:k({width:t.cellSize-2+"px",height:t.cellSize-2+"px",left:de.value.x*t.cellSize+1+"px",top:de.value.y*t.cellSize+1+"px",zIndex:3,backgroundColor:Ie().food})},null,4)],4)]),h("div",R,[l.isPlaying||l.gameOver||l.hasStarted?P("",!0):(v(),_(i,{key:0,onClick:xe,type:"primary",class:"bg-blue-500 hover:bg-blue-600 border-blue-600"},{default:p(()=>s[12]||(s[12]=[f(" 开始游戏 ",-1)])),_:1,__:[12]})),l.isPlaying?(v(),_(i,{key:1,onClick:ye,type:"warning",class:"bg-orange-500 hover:bg-orange-600 border-orange-600"},{default:p(()=>s[13]||(s[13]=[f(" 暂停 ",-1)])),_:1,__:[13]})):P("",!0),l.isPlaying||l.gameOver||!l.hasStarted?P("",!0):(v(),_(i,{key:2,onClick:ye,type:"success",class:"bg-green-500 hover:bg-green-600 border-green-600"},{default:p(()=>s[14]||(s[14]=[f(" 继续游戏 ",-1)])),_:1,__:[14]})),l.gameOver?(v(),_(i,{key:3,onClick:he,type:"success",class:"bg-green-500 hover:bg-green-600 border-green-600"},{default:p(()=>s[15]||(s[15]=[f(" 重新开始 ",-1)])),_:1,__:[15]})):P("",!0)]),h("div",q,[h("div",B,[s[20]||(s[20]=h("h3",{class:"text-center text-sm font-medium text-gray-700 mb-3"}," 方向控制 ",-1)),h("div",J,[h("div",Q,[y(i,{onClick:s[2]||(s[2]=e=>pe("up")),disabled:!l.isPlaying,class:"w-12 h-12 bg-blue-500 hover:bg-blue-600 text-white"},{default:p(()=>s[16]||(s[16]=[f(" ↑ ",-1)])),_:1,__:[16]},8,["disabled"])]),h("div",G,[y(i,{onClick:s[3]||(s[3]=e=>pe("left")),disabled:!l.isPlaying,class:"w-12 h-12 bg-blue-500 hover:bg-blue-600 text-white"},{default:p(()=>s[17]||(s[17]=[f(" ← ",-1)])),_:1,__:[17]},8,["disabled"])]),h("div",K,[y(i,{onClick:s[4]||(s[4]=e=>pe("down")),disabled:!l.isPlaying,class:"w-12 h-12 bg-blue-500 hover:bg-blue-600 text-white"},{default:p(()=>s[18]||(s[18]=[f(" ↓ ",-1)])),_:1,__:[18]},8,["disabled"])]),h("div",X,[y(i,{onClick:s[5]||(s[5]=e=>pe("right")),disabled:!l.isPlaying,class:"w-12 h-12 bg-blue-500 hover:bg-blue-600 text-white"},{default:p(()=>s[19]||(s[19]=[f(" → ",-1)])),_:1,__:[19]},8,["disabled"])])])])]),l.gameOver?(v(),x("div",Y,[h("div",Z,[s[21]||(s[21]=h("h3",{class:"text-lg font-medium text-red-900 mb-2"},"游戏结束",-1)),h("p",ee,"最终得分: "+m(l.score),1),h("p",ae," 游戏时间: "+m(ve(l.gameTime)),1),l.score>l.highScore?(v(),x("p",le," 新纪录！恭喜你创造了新的最高分！ ")):P("",!0)])])):P("",!0),s[22]||(s[22]=z('<div class="bg-gray-50 rounded-lg p-4 border-2 border-gray-200 shadow-sm" data-v-06edb117><h3 class="text-lg font-medium text-gray-900 mb-3" data-v-06edb117>操作说明</h3><div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600" data-v-06edb117><div class="bg-white p-3 rounded border border-gray-200" data-v-06edb117><p data-v-06edb117><strong class="text-blue-600" data-v-06edb117>方向键/WASD：</strong>控制蛇的移动方向 </p><p data-v-06edb117><strong class="text-blue-600" data-v-06edb117>空格键：</strong>暂停/继续游戏 </p></div><div class="bg-white p-3 rounded border border-gray-200" data-v-06edb117><p data-v-06edb117><strong class="text-green-600" data-v-06edb117>目标：</strong>吃到红色食物，让蛇变长 </p><p data-v-06edb117><strong class="text-red-600" data-v-06edb117>注意：</strong>不要撞墙或撞到自己 </p></div></div><div class="lg:hidden mt-4 bg-blue-50 p-3 rounded border border-blue-200" data-v-06edb117><p class="text-sm text-blue-700" data-v-06edb117><strong data-v-06edb117>移动端：</strong>使用下方虚拟方向键控制蛇的移动 </p></div></div>',1))])]),y(o,{title:"描述"},{default:p(()=>[y(u,null,{default:p(()=>s[23]||(s[23]=[f(" 经典贪吃蛇游戏，支持键盘控制：",-1),h("br",null,null,-1),h("br",null,null,-1),f(" 游戏特色：流畅的操作体验，实时得分显示，最高分记录",-1),h("br",null,null,-1),f(" 操作方式：使用方向键或WASD控制蛇的移动，空格键暂停游戏",-1),h("br",null,null,-1),f(" 游戏目标：控制蛇吃到食物，让蛇变得越来越长",-1),h("br",null,null,-1),f(" 挑战模式：避免撞墙和撞到自己，挑战你的反应速度",-1),h("br",null,null,-1),h("br",null,null,-1),f(" 适合休闲娱乐，锻炼反应能力和手眼协调。 ",-1)])),_:1,__:[23]})]),_:1})])}}}),[["__scopeId","data-v-06edb117"]]);export{te as default};
