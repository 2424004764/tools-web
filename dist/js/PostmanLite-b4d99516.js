import{d as e,q as l,r as a,b as t,X as u,al as n,o,c as d,R as s,a as r,J as v,O as i,P as c,M as p,Q as m,a4 as f,K as y,S as h,I as k,u as _}from"./chunk-bb5ca2a1.js";import{_ as V}from"./chunk-3890340c.js";import{_ as b}from"./chunk-9c6aa90d.js";import{c as x,_ as w}from"../assets/index-5d8e84a5.js";import"./chunk-aee1fa50.js";import"./chunk-f261274c.js";import"./chunk-4027890c.js";const g={class:"flex flex-col mt-3 flex-1"},U={class:"p-4 rounded-2xl bg-white space-y-4"},C={class:"flex items-center gap-2"},E={key:0,class:"text-xs text-gray-500"},T={class:"space-y-2"},S={class:"space-y-2"},L={class:"space-y-3"},O={key:0},j={key:1,class:"space-y-2"},P={key:2,class:"space-y-2"},R={class:"flex items-center gap-2"},H=["onChange"],N={key:0,class:"text-xs text-gray-500"},$={class:"space-y-2"},J={class:"text-sm"},G={key:0},A={key:1},D={key:0},F=["src"],B={key:1},I={class:"mb-2 flex items-center gap-2"},X=w(e({__name:"PostmanLite",setup(e){const w=l({title:"在线请求调试"}),X=a("GET"),z=a(""),W=a([{key:"",value:"",enabled:!0}]),K=a([{key:"",value:"",enabled:!0}]),M=a("none"),q=a([{key:"",type:"text",value:"",enabled:!0}]),Q=a(""),Z=a(!1),Y=a(""),ee=a(null),le=a(null),ae=a([]),te=a(""),ue=a(""),ne=a(null),oe=a(!1),de=a("");function se(e){e.value.push({key:"",value:"",enabled:!0})}function re(e,l){e.value.splice(l,1)}const ve=t(()=>{if(!z.value)return"";try{const e=new URL(z.value),l=new URLSearchParams(e.search);return W.value.filter(e=>e.enabled&&e.key).forEach(e=>l.set(e.key,e.value)),e.search=l.toString(),e.toString()}catch(e){return z.value}});function ie(){const e={};return K.value.filter(e=>e.enabled&&e.key).forEach(l=>e[l.key]=l.value),e}function ce(e,l){K.value.some(l=>l.enabled&&l.key.toLowerCase()===e.toLowerCase())||K.value.push({key:e,value:l,enabled:!0})}function pe(){if("GET"!==X.value&&"HEAD"!==X.value&&"none"!==M.value){if("json"===M.value)return ce("Content-Type","application/json"),Q.value||"";if("form"===M.value){ce("Content-Type","application/x-www-form-urlencoded");const e=new URLSearchParams;return q.value.filter(e=>e.enabled&&e.key&&"file"!==e.type).forEach(l=>e.append(l.key,l.value||"")),e.toString()}if("form-data"===M.value){e="Content-Type",K.value=K.value.filter(l=>!(l.enabled&&l.key&&l.key.toLowerCase()===e.toLowerCase()));const l=new FormData;return q.value.filter(e=>e.enabled&&e.key).forEach(e=>{var a;"file"===e.type?(e.files||[]).forEach(a=>l.append(e.key,a,a.name)):l.append(e.key,null!=(a=e.value)?a:"")}),l}var e;return"raw"===M.value?Q.value:void 0}}function me(){return e=this,l=null,a=function*(){if(!z.value)return;Z.value=!0,Y.value="",ee.value=null,le.value=null,ae.value=[],te.value="",ne.value&&(URL.revokeObjectURL(ne.value),ne.value=null),ue.value="";const e=performance.now();try{const a={method:X.value,headers:ie()},t=pe();void 0!==t&&(a.body=t);const u=ve.value||z.value,n=yield fetch(u,a),o=performance.now();ee.value=Math.round(o-e),Y.value=`${n.status} ${n.statusText}`,n.headers.forEach((e,l)=>ae.value.push({key:l,value:e,enabled:!0}));const d=yield n.arrayBuffer();le.value=d.byteLength;const s=n.headers.get("content-type")||"";if(ue.value=s,s.startsWith("image/")){const e=new Blob([d],{type:s});ne.value=URL.createObjectURL(e),te.value=""}else{let e="";try{e=new TextDecoder("utf-8").decode(d)}catch(l){e="[二进制内容]"}if(s.includes("application/json"))try{te.value=JSON.stringify(JSON.parse(e),null,2)}catch(l){te.value=e}else te.value=e}}catch(l){Y.value="请求失败",te.value=String((null==l?void 0:l.message)||l)}finally{Z.value=!1}},new Promise((t,u)=>{var n=e=>{try{d(a.next(e))}catch(l){u(l)}},o=e=>{try{d(a.throw(e))}catch(l){u(l)}},d=e=>e.done?t(e.value):Promise.resolve(e.value).then(n,o);d((a=a.apply(e,l)).next())});var e,l,a}function fe(){q.value.push({key:"",type:"text",value:"",enabled:!0})}function ye(e){return`'${String(e).replace(/'/g,"'\\''")}'`}function he(){const e=ve.value||z.value;if(!e)return;const l=["curl",ye(e)];if(X.value&&"GET"!==X.value&&l.push("-X",X.value),K.value.filter(e=>e.enabled&&e.key).forEach(e=>{l.push("-H",ye(`${e.key}: ${e.value||""}`))}),"GET"!==X.value&&"none"!==M.value)if("json"===M.value){K.value.some(e=>{var l;return e.enabled&&"content-type"===(null==(l=e.key)?void 0:l.toLowerCase())})||l.push("-H",ye("Content-Type: application/json")),l.push("--data-raw",ye(Q.value))}else if("form"===M.value){const e=new URLSearchParams;q.value.filter(e=>e.enabled&&e.key&&"file"!==e.type).forEach(l=>e.append(l.key,l.value||""));const a=e.toString();K.value.some(e=>{var l;return e.enabled&&"content-type"===(null==(l=e.key)?void 0:l.toLowerCase())})||l.push("-H",ye("Content-Type: application/x-www-form-urlencoded")),l.push("--data-raw",ye(a))}else"form-data"===M.value?q.value.filter(e=>e.enabled&&e.key).forEach(e=>{var a;if("file"===e.type){const a=(e.files||[]).map(e=>e.name);0===a.length?l.push("-F",ye(`${e.key}=@<选择文件路径>`)):a.forEach(a=>l.push("-F",ye(`${e.key}=@./${a}`)))}else l.push("-F",ye(`${e.key}=${null!=(a=e.value)?a:""}`))}):"raw"===M.value&&l.push("--data-raw",ye(Q.value));x(l.join(" "))}function ke(){!function(e){var l,a;if(!e.trim())return;X.value="GET",W.value=[{key:"",value:"",enabled:!0}],K.value=[{key:"",value:"",enabled:!0}],M.value="none",q.value=[{key:"",type:"text",value:"",enabled:!0}],Q.value="",z.value="";const t=e.replace(/\\\r?\n/g," ").replace(/\s+/g," ").trim(),u=t.match(/-X\s+([A-Z]+)/);u&&(X.value=u[1]);const n=t.match(/--url\s+(['"])(.*?)\1/);if(n)z.value=n[2];else{const e=t.match(/https?:\/\/[^\s'"]+/);e&&(z.value=e[0])}const o=/(?:-H|--header)\s+(['"])(.*?)\1/g;let d;K.value=[];for(;d=o.exec(t);){const e=d[2],l=e.indexOf(":");if(l>-1){const a=e.slice(0,l).trim(),t=e.slice(l+1).trim();K.value.push({key:a,value:t,enabled:!0})}}0===K.value.length&&(K.value=[{key:"",value:"",enabled:!0}]);const s=/(?:-F|--form)\s+(['"])(.*?)\1/g,r=[];let v;for(;v=s.exec(t);){const e=v[2],l=e.indexOf("=");if(l>-1){const a=e.slice(0,l),t=e.slice(l+1);t.startsWith("@")?r.push({key:a,type:"file",files:[],enabled:!0}):r.push({key:a,type:"text",value:t,enabled:!0})}}if(r.length>0)return M.value="form-data",void(q.value=r);const i=/(?:--data(?:-raw|-binary)?|-d)\s+(['"])([\s\S]*?)\1/g,c=[];let p;for(;p=i.exec(t);)c.push(p[2]);if(c.length>0){const e=c[c.length-1];Q.value=e;const t=(null==(a=null==(l=K.value.find(e=>{var l;return e.enabled&&"content-type"===(null==(l=e.key)?void 0:l.toLowerCase())}))?void 0:l.value)?void 0:a.toLowerCase())||"";if(t.includes("application/x-www-form-urlencoded")){M.value="form";const l=new URLSearchParams(e);q.value=[],l.forEach((e,l)=>q.value.push({key:l,type:"text",value:e,enabled:!0})),0===q.value.length&&(q.value=[{key:"",type:"text",value:"",enabled:!0}])}else t.includes("application/json")?M.value="json":M.value="raw";u||"GET"!==X.value||(X.value="POST")}}(de.value||""),oe.value=!1,de.value=""}function _e(){if(te.value)try{const e=JSON.parse(te.value);te.value=JSON.stringify(e,null,2)}catch(e){}}return u(()=>{ne.value&&URL.revokeObjectURL(ne.value)}),(e,l)=>{const a=n("el-option"),t=n("el-select"),u=n("el-input"),ie=n("el-button"),ce=n("el-checkbox"),pe=n("el-tab-pane"),ye=n("el-radio"),Ve=n("el-radio-group"),be=n("el-tabs"),xe=n("el-table-column"),we=n("el-table"),ge=n("el-text"),Ue=n("el-dialog");return o(),d("div",g,[s(V,{title:w.title},null,8,["title"]),r("div",U,[r("div",C,[s(t,{modelValue:X.value,"onUpdate:modelValue":l[0]||(l[0]=e=>X.value=e),style:{width:"130px"}},{default:v(()=>[s(a,{label:"GET",value:"GET"}),s(a,{label:"POST",value:"POST"}),s(a,{label:"PUT",value:"PUT"}),s(a,{label:"DELETE",value:"DELETE"}),s(a,{label:"PATCH",value:"PATCH"}),s(a,{label:"HEAD",value:"HEAD"}),s(a,{label:"OPTIONS",value:"OPTIONS"})]),_:1},8,["modelValue"]),s(u,{modelValue:z.value,"onUpdate:modelValue":l[1]||(l[1]=e=>z.value=e),placeholder:"https://api.example.com/path"},null,8,["modelValue"]),s(ie,{type:"primary",loading:Z.value,onClick:me},{default:v(()=>l[12]||(l[12]=[i("发送",-1)])),_:1,__:[12]},8,["loading"]),s(ie,{text:"",onClick:l[2]||(l[2]=e=>oe.value=!0)},{default:v(()=>l[13]||(l[13]=[i("导入 cURL",-1)])),_:1,__:[13]}),s(ie,{text:"",onClick:he},{default:v(()=>l[14]||(l[14]=[i("复制 cURL",-1)])),_:1,__:[14]})]),ve.value&&ve.value!==z.value?(o(),d("div",E,"最终请求: "+c(ve.value),1)):p("",!0),s(be,{type:"border-card"},{default:v(()=>[s(pe,{label:"Params"},{default:v(()=>[r("div",T,[(o(!0),d(m,null,f(W.value,(e,a)=>(o(),d("div",{key:a,class:"flex items-center gap-2"},[s(ce,{modelValue:e.enabled,"onUpdate:modelValue":l=>e.enabled=l},null,8,["modelValue","onUpdate:modelValue"]),s(u,{modelValue:e.key,"onUpdate:modelValue":l=>e.key=l,placeholder:"key",style:{width:"220px"}},null,8,["modelValue","onUpdate:modelValue"]),s(u,{modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,placeholder:"value"},null,8,["modelValue","onUpdate:modelValue"]),s(ie,{text:"",type:"danger",onClick:e=>re(W.value,a)},{default:v(()=>l[15]||(l[15]=[i("删除",-1)])),_:2,__:[15]},1032,["onClick"])]))),128)),s(ie,{text:"",type:"primary",onClick:l[3]||(l[3]=e=>se(W.value))},{default:v(()=>l[16]||(l[16]=[i("添加参数",-1)])),_:1,__:[16]})])]),_:1}),s(pe,{label:"Headers"},{default:v(()=>[r("div",S,[(o(!0),d(m,null,f(K.value,(e,a)=>(o(),d("div",{key:a,class:"flex items-center gap-2"},[s(ce,{modelValue:e.enabled,"onUpdate:modelValue":l=>e.enabled=l},null,8,["modelValue","onUpdate:modelValue"]),s(u,{modelValue:e.key,"onUpdate:modelValue":l=>e.key=l,placeholder:"Header",style:{width:"260px"}},null,8,["modelValue","onUpdate:modelValue"]),s(u,{modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,placeholder:"Value"},null,8,["modelValue","onUpdate:modelValue"]),s(ie,{text:"",type:"danger",onClick:e=>re(K.value,a)},{default:v(()=>l[17]||(l[17]=[i("删除",-1)])),_:2,__:[17]},1032,["onClick"])]))),128)),s(ie,{text:"",type:"primary",onClick:l[4]||(l[4]=e=>se(K.value))},{default:v(()=>l[18]||(l[18]=[i("添加Header",-1)])),_:1,__:[18]})])]),_:1}),s(pe,{label:"Body"},{default:v(()=>[r("div",L,[s(Ve,{modelValue:M.value,"onUpdate:modelValue":l[5]||(l[5]=e=>M.value=e)},{default:v(()=>[s(ye,{label:"none"},{default:v(()=>l[19]||(l[19]=[i("none",-1)])),_:1,__:[19]}),s(ye,{label:"json"},{default:v(()=>l[20]||(l[20]=[i("JSON",-1)])),_:1,__:[20]}),s(ye,{label:"form"},{default:v(()=>l[21]||(l[21]=[i("x-www-form-urlencoded",-1)])),_:1,__:[21]}),s(ye,{label:"form-data"},{default:v(()=>l[22]||(l[22]=[i("form-data",-1)])),_:1,__:[22]}),s(ye,{label:"raw"},{default:v(()=>l[23]||(l[23]=[i("Raw",-1)])),_:1,__:[23]})]),_:1},8,["modelValue"]),"json"===M.value||"raw"===M.value?(o(),d("div",O,[s(u,{modelValue:Q.value,"onUpdate:modelValue":l[6]||(l[6]=e=>Q.value=e),type:"textarea",rows:8,placeholder:'JSON 或任意文本。JSON示例: {"a":1}'},null,8,["modelValue"])])):p("",!0),"form"===M.value?(o(),d("div",j,[(o(!0),d(m,null,f(q.value,(e,a)=>y((o(),d("div",{key:"f-"+a,class:"flex items-center gap-2"},[s(ce,{modelValue:e.enabled,"onUpdate:modelValue":l=>e.enabled=l},null,8,["modelValue","onUpdate:modelValue"]),s(u,{modelValue:e.key,"onUpdate:modelValue":l=>e.key=l,placeholder:"key",style:{width:"220px"}},null,8,["modelValue","onUpdate:modelValue"]),s(u,{modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,placeholder:"value"},null,8,["modelValue","onUpdate:modelValue"]),s(ie,{text:"",type:"danger",onClick:e=>re(q.value,a)},{default:v(()=>l[24]||(l[24]=[i("删除",-1)])),_:2,__:[24]},1032,["onClick"])])),[[h,"file"!==e.type]])),128)),s(ie,{text:"",type:"primary",onClick:fe},{default:v(()=>l[25]||(l[25]=[i("添加字段",-1)])),_:1,__:[25]})])):p("",!0),"form-data"===M.value?(o(),d("div",P,[(o(!0),d(m,null,f(q.value,(e,n)=>{var m;return o(),d("div",{key:"fd-"+n,class:"flex flex-col gap-1"},[r("div",R,[s(ce,{modelValue:e.enabled,"onUpdate:modelValue":l=>e.enabled=l},null,8,["modelValue","onUpdate:modelValue"]),s(u,{modelValue:e.key,"onUpdate:modelValue":l=>e.key=l,placeholder:"key",style:{width:"220px"}},null,8,["modelValue","onUpdate:modelValue"]),s(t,{modelValue:e.type,"onUpdate:modelValue":l=>e.type=l,style:{width:"120px"}},{default:v(()=>[s(a,{label:"文本",value:"text"}),s(a,{label:"文件",value:"file"})]),_:2},1032,["modelValue","onUpdate:modelValue"]),"text"===e.type?(o(),k(u,{key:0,modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,placeholder:"value"},null,8,["modelValue","onUpdate:modelValue"])):(o(),d("input",{key:1,type:"file",multiple:"",onChange:e=>function(e,l){const a=l.target,t=Array.from(a.files||[]);q.value[e].files=t}(n,e)},null,40,H)),s(ie,{text:"",type:"danger",onClick:e=>re(q.value,n)},{default:v(()=>l[26]||(l[26]=[i("删除",-1)])),_:2,__:[26]},1032,["onClick"])]),"file"===e.type&&(null==(m=e.files)?void 0:m.length)?(o(),d("div",N," 已选: "+c(e.files.map(e=>e.name).join(", ")),1)):p("",!0)])}),128)),s(ie,{text:"",type:"primary",onClick:fe},{default:v(()=>l[27]||(l[27]=[i("添加字段",-1)])),_:1,__:[27]})])):p("",!0)])]),_:1})]),_:1})]),s(b,{title:"响应"},{default:v(()=>[r("div",$,[r("div",J,[i(" 状态: "+c(Y.value)+" ",1),null!==ee.value?(o(),d("span",G," | 时间: "+c(ee.value)+"ms",1)):p("",!0),null!==le.value?(o(),d("span",A," | 大小: "+c((le.value/1024).toFixed(2))+" KB",1)):p("",!0)]),s(be,null,{default:v(()=>[s(pe,{label:"Body"},{default:v(()=>[ue.value.startsWith("image/")?(o(),d("div",D,[r("img",{src:ne.value||"",alt:"响应图片",style:{"max-width":"100%","max-height":"60vh"}},null,8,F)])):(o(),d("div",B,[r("div",I,[te.value?(o(),k(ie,{key:0,size:"small",onClick:_e},{default:v(()=>l[28]||(l[28]=[i("美化 JSON",-1)])),_:1,__:[28]})):p("",!0),te.value?(o(),k(ie,{key:1,size:"small",onClick:l[7]||(l[7]=e=>_(x)(te.value))},{default:v(()=>l[29]||(l[29]=[i("复制响应",-1)])),_:1,__:[29]})):p("",!0)]),s(u,{type:"textarea",rows:12,modelValue:te.value,"onUpdate:modelValue":l[8]||(l[8]=e=>te.value=e)},null,8,["modelValue"])]))]),_:1}),s(pe,{label:"Headers"},{default:v(()=>[s(we,{data:ae.value,size:"small"},{default:v(()=>[s(xe,{prop:"key",label:"Header",width:"260"}),s(xe,{prop:"value",label:"Value"})]),_:1},8,["data"])]),_:1})]),_:1})])]),_:1}),s(b,{title:"说明"},{default:v(()=>[s(ge,null,{default:v(()=>l[30]||(l[30]=[i(" 仅支持目标接口已开启 CORS 或同源的请求；如需跨域访问，可在服务端增加通用代理后再使用。 ",-1)])),_:1,__:[30]})]),_:1}),s(Ue,{modelValue:oe.value,"onUpdate:modelValue":l[11]||(l[11]=e=>oe.value=e),title:"导入 cURL",width:"600px"},{footer:v(()=>[s(ie,{onClick:l[10]||(l[10]=e=>oe.value=!1)},{default:v(()=>l[31]||(l[31]=[i("取消",-1)])),_:1,__:[31]}),s(ie,{type:"primary",onClick:ke},{default:v(()=>l[32]||(l[32]=[i("导入",-1)])),_:1,__:[32]})]),default:v(()=>[s(u,{modelValue:de.value,"onUpdate:modelValue":l[9]||(l[9]=e=>de.value=e),type:"textarea",rows:10,placeholder:"粘贴 curl 命令，例如：curl 'https://api.example.com' -X POST -H 'Content-Type: application/json'"},null,8,["modelValue"])]),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-e5ad95c9"]]);export{X as default};
