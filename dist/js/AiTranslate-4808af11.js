var e=(e,l,a)=>new Promise((t,o)=>{var u=e=>{try{n(a.next(e))}catch(l){o(l)}},s=e=>{try{n(a.throw(e))}catch(l){o(l)}},n=e=>e.done?t(e.value):Promise.resolve(e.value).then(u,s);n((a=a.apply(e,l)).next())});import{d as l,q as a,r as t,al as o,o as u,c as s,R as n,a as r,K as i,aG as v,Q as d,a4 as c,P as p,aj as b,D as h,J as g,O as m}from"./chunk-bb5ca2a1.js";import{a as f}from"./chunk-cdccf614.js";import{_ as x}from"./chunk-a2707c95.js";import{_ as y}from"./chunk-9c6aa90d.js";import"./chunk-e922f209.js";import"../assets/index-94e3f07b.js";import"./chunk-27701a41.js";const k={class:"flex flex-col mt-3 flex-1"},j={class:"p-4 rounded-2xl bg-white"},T={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},w={class:"space-y-3"},A={class:"grid grid-cols-1 gap-2"},C=["value"],_={class:"flex gap-2"},P=["disabled"],R={class:"space-y-3"},U=["value"],V={class:"flex gap-2"},z=l({__name:"AiTranslate",setup(l){const z=a({title:"AI翻译",desc:"由AI大模型驱动，支持多语言互译，源语言可自动检测。"}),E=t("NpgaKlHjioTlyo2B"),I=t("https://tool.fologde.com/proxy"),$=t("https://text.pollinations.ai"),D={zh:"Chinese",en:"English",ja:"Japanese",ko:"Korean",fr:"French",de:"German",es:"Spanish",pt:"Portuguese",it:"Italian",ru:"Russian",ar:"Arabic",vi:"Vietnamese",tr:"Turkish",id:"Indonesian",nl:"Dutch",pl:"Polish"},G=e=>D[e]||e,K=t(""),B=t(""),F=t(!1),J=[{label:"自动检测",value:"auto"},{label:"中文",value:"zh"},{label:"英文",value:"en"},{label:"日文",value:"ja"},{label:"韩文",value:"ko"},{label:"法文",value:"fr"},{label:"德文",value:"de"},{label:"西班牙文",value:"es"},{label:"葡萄牙文",value:"pt"},{label:"意大利文",value:"it"},{label:"俄文",value:"ru"},{label:"阿拉伯文",value:"ar"},{label:"越南文",value:"vi"},{label:"土耳其文",value:"tr"},{label:"印尼文",value:"id"},{label:"荷兰文",value:"nl"},{label:"波兰文",value:"pl"}],N=t("auto"),O=t("zh"),S=()=>{if("auto"===N.value)return;const e=N.value;N.value=O.value,O.value=e;const l=K.value;K.value=B.value,B.value=l},X=l=>e(this,null,function*(){try{yield navigator.clipboard.writeText(l),alert("已复制")}catch(e){alert("复制失败，请手动复制")}}),q=()=>e(this,null,function*(){var e,l,a,t;if(K.value.trim())if("auto"!==O.value){F.value=!0,B.value="";try{const o={model:"nova-fast",messages:[{role:"user",content:(()=>{const e=N.value,l=O.value,a=K.value.trim();return["You are a professional translator.","auto"===e?"Auto-detect the source language.":`The source language is ${G(e)}.`,`Translate the following text into ${G(l)}.`,"Rules: preserve meaning, tone & formatting (line breaks, markdown, code blocks, URLs);","keep numbers/units; do not add explanations, examples, or notes.","Only output the translated text and nothing else.","---TEXT START---",a,"---TEXT END---"].join("\n")})()}]},u=yield f.post(I.value,o,{params:{target:`${$.value}/v1/chat/completions`},headers:{Authorization:`Bearer ${E.value}`,"Content-Type":"application/json"}});B.value=(null==(t=null==(a=null==(l=null==(e=u.data)?void 0:e.choices)?void 0:l[0])?void 0:a.message)?void 0:t.content)||""}catch(o){alert("翻译失败，请稍后重试")}finally{F.value=!1}}else alert("目标语言不能为自动检测")});return(e,l)=>{const a=o("el-text");return u(),s("div",k,[n(x,{title:z.title},null,8,["title"]),r("div",j,[r("div",T,[r("div",w,[r("div",A,[i(r("select",{"onUpdate:modelValue":l[0]||(l[0]=e=>N.value=e),class:"w-full p-2 border rounded"},[(u(),s(d,null,c(J,e=>r("option",{key:e.value,value:e.value},p(e.label),9,C)),64))],512),[[v,N.value]])]),i(r("textarea",{"onUpdate:modelValue":l[1]||(l[1]=e=>K.value=e),placeholder:"输入要翻译的文本...",class:"w-full p-3 border rounded min-h-[180px]"},null,512),[[b,K.value]]),r("div",_,[r("button",{onClick:q,disabled:F.value,class:h(["px-4 py-2 rounded text-white",F.value?"bg-gray-400":"bg-blue-600 hover:bg-blue-700"])},p(F.value?"翻译中...":"开始翻译"),11,P),r("button",{onClick:S,class:"px-4 py-2 rounded border hover:bg-gray-50"},"交换语言与文本"),r("button",{onClick:l[2]||(l[2]=e=>X(K.value)),class:"px-4 py-2 rounded border hover:bg-gray-50"},"复制原文")])]),r("div",R,[i(r("select",{"onUpdate:modelValue":l[3]||(l[3]=e=>O.value=e),class:"w-full p-2 border rounded"},[(u(!0),s(d,null,c(J.filter(e=>"auto"!==e.value),e=>(u(),s("option",{key:e.value,value:e.value},p(e.label),9,U))),128))],512),[[v,O.value]]),i(r("textarea",{"onUpdate:modelValue":l[4]||(l[4]=e=>B.value=e),readonly:"",class:"w-full p-3 border rounded min-h-[180px] bg-gray-50",placeholder:"翻译结果将显示在这里"},null,512),[[b,B.value]]),r("div",V,[r("button",{onClick:l[5]||(l[5]=e=>X(B.value)),class:"px-4 py-2 rounded border hover:bg-gray-50"},"复制译文")])])])]),n(y,{title:"描述"},{default:g(()=>[n(a,null,{default:g(()=>[m(p(z.desc),1)]),_:1})]),_:1})])}}});export{z as default};
