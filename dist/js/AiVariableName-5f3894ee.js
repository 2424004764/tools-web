import{d as e,r as a,q as l,b as t,al as s,o,c as n,R as r,a as u,K as i,aj as c,aG as d,D as v,P as p,Q as m,a4 as b,M as g,J as x,O as h}from"./chunk-bb5ca2a1.js";import{a as y}from"./chunk-cdccf614.js";import{_ as f}from"./chunk-a21c1e5f.js";import{_ as k}from"./chunk-9c6aa90d.js";import{c as w,_ as j}from"../assets/index-9f20a8ee.js";import"./chunk-e922f209.js";import"./chunk-27701a41.js";const C={class:"flex flex-col mt-3 flex-1"},_={class:"p-4 rounded-2xl bg-white"},T={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},$={class:"space-y-4"},A={class:"grid grid-cols-2 gap-4"},M=["disabled"],P={class:"space-y-3"},V={class:"flex items-center justify-between"},U=["disabled"],q={class:"min-h-[220px] border rounded-lg p-3 bg-gray-50"},z={key:0,class:"text-gray-500"},D={key:1,class:"space-y-2"},G={class:"truncate mr-3"},I=["onClick"],L={key:0,class:"text-gray-400 text-sm"},Q=j(e({__name:"AiVariableName",setup(e){const j=a("pk_xQpDqfF17TnTC8zA"),Q=a("https://tool.fologde.com/proxy"),B=a("https://gen.pollinations.ai"),F=l({title:"AI起变量名",desc:"根据描述自动生成符合命名规范的变量名，支持多种命名风格与语言"}),H=a(""),J=a("camelCase"),K=a("en"),N=a(2),O=a(!1),R=a([]),S=t(()=>!!H.value.trim()&&!O.value),E=["为订单金额生成有语义的变量名","用户登录状态布尔值变量","商品库存数量","文件上传进度百分比","用户上次登录时间","购物车商品列表","是否开启暗色主题开关","最大重试次数"],W=()=>{if(!E.length)return;const e=Math.floor(Math.random()*E.length);H.value=E[e]},X=()=>{return e=this,a=null,l=function*(){var e,a,l,t;if(S.value){O.value=!0,R.value=[];try{const s={model:"nova-fast",messages:[{role:"user",content:(()=>{const e="en"===K.value?"使用英文":"使用拼音";return[`请根据以下需求，生成 ${N.value} 个合适的变量名：`,`- 命名风格：${J.value}`,`- 语言：${e}`,"- 规则：语义准确、简洁、无空格和非法字符；仅输出变量名列表，每行一个，不要额外说明。",`需求：${H.value.trim()}`].join("\n")})()}]},o=yield y.post(Q.value,s,{params:{target:`${B.value}/v1/chat/completions`},headers:{Authorization:`Bearer ${j.value}`,"Content-Type":"application/json"}}),n=((null==(t=null==(l=null==(a=null==(e=o.data)?void 0:e.choices)?void 0:a[0])?void 0:l.message)?void 0:t.content)||"").replace(/\r\n/g,"\n").split("\n").map(e=>e.trim().replace(/^\d+\.\s*/,"").replace(/^-+\s*/,"")).filter(e=>e.length>0);R.value=Array.from(new Set(n)).slice(0,N.value)}catch(s){alert("生成失败，请稍后重试")}finally{O.value=!1}}},new Promise((t,s)=>{var o=e=>{try{r(l.next(e))}catch(a){s(a)}},n=e=>{try{r(l.throw(e))}catch(a){s(a)}},r=e=>e.done?t(e.value):Promise.resolve(e.value).then(o,n);r((l=l.apply(e,a)).next())});var e,a,l},Y=()=>R.value.length&&w(R.value.join("\n")),Z=e=>{const a=e.target;a.classList.add("button-pressed"),setTimeout(()=>{a.classList.remove("button-pressed")},150)};return(e,a)=>{const l=s("el-text");return o(),n("div",C,[r(f,{title:F.title},null,8,["title"]),u("div",_,[u("div",T,[u("div",$,[u("div",null,[u("div",{class:"flex items-center justify-between mb-2"},[a[4]||(a[4]=u("label",{class:"block text-sm text-gray-700"},"需求描述",-1)),u("button",{class:"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded",onClick:W},"示例")]),i(u("textarea",{"onUpdate:modelValue":a[0]||(a[0]=e=>H.value=e),class:"w-full p-3 border rounded-lg min-h-[120px]",placeholder:"例如：为订单金额生成有语义的变量名"},null,512),[[c,H.value]])]),u("div",A,[u("div",null,[a[6]||(a[6]=u("label",{class:"block text-sm text-gray-700 mb-2"},"命名风格",-1)),i(u("select",{"onUpdate:modelValue":a[1]||(a[1]=e=>J.value=e),class:"w-full p-2 border rounded-lg"},a[5]||(a[5]=[u("option",{value:"camelCase"},"camelCase",-1),u("option",{value:"PascalCase"},"PascalCase",-1),u("option",{value:"snake_case"},"snake_case",-1),u("option",{value:"kebab-case"},"kebab-case",-1)]),512),[[d,J.value]])]),u("div",null,[a[8]||(a[8]=u("label",{class:"block text-sm text-gray-700 mb-2"},"语言",-1)),i(u("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>K.value=e),class:"w-full p-2 border rounded-lg"},a[7]||(a[7]=[u("option",{value:"en"},"英文",-1),u("option",{value:"pinyin"},"拼音",-1)]),512),[[d,K.value]])]),u("div",null,[a[9]||(a[9]=u("label",{class:"block text-sm text-gray-700 mb-2"},"数量",-1)),i(u("input",{"onUpdate:modelValue":a[3]||(a[3]=e=>N.value=e),type:"number",min:"1",max:"50",class:"w-full p-2 border rounded-lg"},null,512),[[c,N.value,void 0,{number:!0}]])])]),u("button",{onClick:X,disabled:!S.value,class:v(["py-3 px-6 rounded-lg w-full transition",S.value?"bg-blue-600 hover:bg-blue-700 text-white":"bg-gray-400 cursor-not-allowed"])},p(O.value?"生成中...":"生成变量名"),11,M)]),u("div",P,[u("div",V,[a[10]||(a[10]=u("div",{class:"text-sm text-gray-600"},"生成结果",-1)),u("button",{class:"px-3 py-1 text-sm bg-emerald-500 text-white rounded transition-all duration-150 hover:bg-emerald-600",disabled:!R.value.length,onClick:Y,onMousedown:Z,onTouchstart:Z}," 复制全部 ",40,U)]),u("div",q,[O.value?(o(),n("div",z,"生成中...")):(o(),n("ul",D,[(o(!0),n(m,null,b(R.value,(e,a)=>(o(),n("li",{key:a,class:"flex items-center justify-between bg-white p-2 rounded border"},[u("span",G,p(e),1),u("button",{class:"px-2 py-1 text-xs bg-blue-500 text-white rounded transition-all duration-150 hover:bg-blue-600",onClick:a=>w(e),onMousedown:Z,onTouchstart:Z}," 复制 ",40,I)]))),128)),R.value.length?g("",!0):(o(),n("div",L,"暂无结果"))]))])])])]),r(k,{title:"描述"},{default:x(()=>[r(l,null,{default:x(()=>[h(p(F.desc),1)]),_:1})]),_:1})])}}}),[["__scopeId","data-v-aa35e555"]]);export{Q as default};
