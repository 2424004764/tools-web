var e=(e,a,l)=>new Promise((t,u)=>{var o=e=>{try{r(l.next(e))}catch(a){u(a)}},s=e=>{try{r(l.throw(e))}catch(a){u(a)}},r=e=>e.done?t(e.value):Promise.resolve(e.value).then(o,s);r((l=l.apply(e,a)).next())});import{d as a,q as l,r as t,al as u,o,c as s,R as r,a as n,K as i,aG as d,Q as v,a4 as c,P as p,aj as b,D as h,J as g,O as m}from"./chunk-bb5ca2a1.js";import{a as f}from"./chunk-5443edaa.js";import{_ as x}from"./chunk-fa7e2c33.js";import{_ as y}from"./chunk-9c6aa90d.js";import"./chunk-d6839cfd.js";import"../assets/index-2c4d407e.js";import"./chunk-eb404ece.js";const k={class:"flex flex-col mt-3 flex-1"},j={class:"p-4 rounded-2xl bg-white"},w={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},T={class:"space-y-3"},A={class:"grid grid-cols-1 gap-2"},_=["value"],C={class:"flex gap-2"},R=["disabled"],U={class:"space-y-3"},$=["value"],E={class:"flex gap-2"},I=a({__name:"AiTranslate",setup(a){const I=l({title:"AI翻译",desc:"由AI大模型驱动，支持多语言互译，源语言可自动检测。"}),P=t("NpgaKlHjioTlyo2B"),V=t("https://tool.fologde.com/proxy"),z=t("https://text.pollinations.ai"),D={zh:"Chinese",en:"English",ja:"Japanese",ko:"Korean",fr:"French",de:"German",es:"Spanish",pt:"Portuguese",it:"Italian",ru:"Russian",ar:"Arabic",vi:"Vietnamese",tr:"Turkish",id:"Indonesian",nl:"Dutch",pl:"Polish"},K=e=>D[e]||e,S=t(""),B=t(""),F=t(!1),G=[{label:"自动检测",value:"auto"},{label:"中文",value:"zh"},{label:"英文",value:"en"},{label:"日文",value:"ja"},{label:"韩文",value:"ko"},{label:"法文",value:"fr"},{label:"德文",value:"de"},{label:"西班牙文",value:"es"},{label:"葡萄牙文",value:"pt"},{label:"意大利文",value:"it"},{label:"俄文",value:"ru"},{label:"阿拉伯文",value:"ar"},{label:"越南文",value:"vi"},{label:"土耳其文",value:"tr"},{label:"印尼文",value:"id"},{label:"荷兰文",value:"nl"},{label:"波兰文",value:"pl"}],J=t("auto"),M=t("zh"),N=()=>{if("auto"===J.value)return;const e=J.value;J.value=M.value,M.value=e;const a=S.value;S.value=B.value,B.value=a},O=a=>e(this,null,function*(){try{yield navigator.clipboard.writeText(a),alert("已复制")}catch(e){alert("复制失败，请手动复制")}}),X=()=>e(this,null,function*(){if(S.value.trim())if("auto"!==M.value){F.value=!0,B.value="";try{const e="​".repeat(1+Math.floor(3*Math.random())),a=(()=>{const e=J.value,a=M.value,l=S.value.trim();return["You are a professional translator.","auto"===e?"Auto-detect the source language.":`The source language is ${K(e)}.`,`Translate the following text into ${K(a)}.`,"Rules: preserve meaning, tone & formatting (line breaks, markdown, code blocks, URLs);","keep numbers/units; do not add explanations, examples, or notes.","Only output the translated text and nothing else.","---TEXT START---",l,"---TEXT END---"].join("\n")})()+e,l=yield f.get(`${V.value}?path=${encodeURIComponent(a)}&target=${z.value}&params=_t=${Date.now()}`,{headers:{Authorization:"Bearer "+P.value}}),t="string"==typeof l.data?l.data:String(l.data);B.value=t}catch(e){alert("翻译失败，请稍后重试")}finally{F.value=!1}}else alert("目标语言不能为自动检测")});return(e,a)=>{const l=u("el-text");return o(),s("div",k,[r(x,{title:I.title},null,8,["title"]),n("div",j,[n("div",w,[n("div",T,[n("div",A,[i(n("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>J.value=e),class:"w-full p-2 border rounded"},[(o(),s(v,null,c(G,e=>n("option",{key:e.value,value:e.value},p(e.label),9,_)),64))],512),[[d,J.value]])]),i(n("textarea",{"onUpdate:modelValue":a[1]||(a[1]=e=>S.value=e),placeholder:"输入要翻译的文本...",class:"w-full p-3 border rounded min-h-[180px]"},null,512),[[b,S.value]]),n("div",C,[n("button",{onClick:X,disabled:F.value,class:h(["px-4 py-2 rounded text-white",F.value?"bg-gray-400":"bg-blue-600 hover:bg-blue-700"])},p(F.value?"翻译中...":"开始翻译"),11,R),n("button",{onClick:N,class:"px-4 py-2 rounded border hover:bg-gray-50"},"交换语言与文本"),n("button",{onClick:a[2]||(a[2]=e=>O(S.value)),class:"px-4 py-2 rounded border hover:bg-gray-50"},"复制原文")])]),n("div",U,[i(n("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>M.value=e),class:"w-full p-2 border rounded"},[(o(!0),s(v,null,c(G.filter(e=>"auto"!==e.value),e=>(o(),s("option",{key:e.value,value:e.value},p(e.label),9,$))),128))],512),[[d,M.value]]),i(n("textarea",{"onUpdate:modelValue":a[4]||(a[4]=e=>B.value=e),readonly:"",class:"w-full p-3 border rounded min-h-[180px] bg-gray-50",placeholder:"翻译结果将显示在这里"},null,512),[[b,B.value]]),n("div",E,[n("button",{onClick:a[5]||(a[5]=e=>O(B.value)),class:"px-4 py-2 rounded border hover:bg-gray-50"},"复制译文")])])])]),r(y,{title:"描述"},{default:g(()=>[r(l,null,{default:g(()=>[m(p(I.desc),1)]),_:1})]),_:1})])}}});export{I as default};
