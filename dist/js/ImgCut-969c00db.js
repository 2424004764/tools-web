var l=(l,e,a)=>new Promise((t,s)=>{var u=l=>{try{r(a.next(l))}catch(e){s(e)}},o=l=>{try{r(a.throw(l))}catch(e){s(e)}},r=l=>l.done?t(l.value):Promise.resolve(l.value).then(u,o);r((a=a.apply(l,e)).next())});import{D as e}from"./chunk-7c0c6fbd.js";import{T as a}from"./chunk-f92b9743.js";import{h as t}from"./chunk-d6839cfd.js";import{d as s,q as u,r as o,b as r,m as i,t as n,al as d,o as c,c as m,R as f,a as v,J as p,O as h,E as _,Q as g,a4 as x,M as w}from"./chunk-bb5ca2a1.js";import{_ as b}from"../assets/index-4e015737.js";import"./chunk-5443edaa.js";import"./chunk-eb404ece.js";const k={class:"flex flex-col mt-3 flex-1"},y={class:"p-4 rounded-2xl bg-white"},j={class:"flex mt-3"},I={class:"flex"},R={key:0,class:"mt-3 min-h-md bg-gray-100 p-3 mb-3 flex flex-col md:flex-row gap-4 items-start"},F={class:"w-full md:w-1/2"},C=["src"],D={class:"w-full md:w-1/2"},E={class:"w-full"},L=["src"],U={key:1},M=b(s({__name:"ImgCut",setup(s){const b=u({title:"图片切割"}),M=o(),V=o(3),q=o({}),P=o([]),T=o(),$=e=>l(this,null,function*(){let a=new FileReader;a.readAsDataURL(e.file),a.addEventListener("load",()=>l(this,null,function*(){const l=new Image;l.onload=()=>{q.value=l,A()},l.src=a.result}),!1)}),z=l=>{T.value.clearFiles();const e=l[0];e.uid=t(),T.value.handleStart(e),T.value.submit()},A=()=>{const l=document.createElement("canvas"),e=l.getContext("2d"),a=q.value,t=Math.floor(a.naturalWidth/V.value),s=Math.floor(a.naturalHeight/V.value),u=[];l.width=t,l.height=s;for(let o=0;o<V.value;o++)for(let r=0;r<V.value;r++)null==e||e.drawImage(a,r*t,o*s,t,s,0,0,t,s),u.push(l.toDataURL());P.value=u},H=r(()=>`grid: repeat(${V.value}, 1fr) / repeat(${V.value}, 1fr);`);return i(H,()=>{M.value&&A()}),n(()=>{}),(l,t)=>{const s=d("el-button"),u=d("el-upload"),o=d("el-text"),r=d("el-input-number"),i=d("el-empty");return c(),m("div",k,[f(e,{title:b.title},null,8,["title"]),v("div",y,[f(u,{"file-list":M.value,"onUpdate:fileList":t[0]||(t[0]=l=>M.value=l),class:"dataFileRef flex flex-col md:flex-row gap-2 md:gap-3 w-full",ref_key:"dataFileRef",ref:T,accept:"image/*","http-request":$,"on-exceed":z,limit:1},{default:p(()=>[f(s,{type:"primary"},{default:p(()=>t[2]||(t[2]=[h("请上传需要切割的图片",-1)])),_:1,__:[2]})]),_:1},8,["file-list"]),v("div",j,[v("div",I,[f(o,null,{default:p(()=>t[3]||(t[3]=[h("行数和列数",-1)])),_:1,__:[3]}),f(r,{modelValue:V.value,"onUpdate:modelValue":t[1]||(t[1]=l=>V.value=l),min:1,max:10,class:"ml-3"},null,8,["modelValue"])])]),q.value.src?(c(),m("div",R,[v("div",F,[f(o,null,{default:p(()=>t[4]||(t[4]=[h("预览: ",-1)])),_:1,__:[4]}),v("div",{style:_(H.value),class:"grid gap-2 w-full"},[(c(!0),m(g,null,x(P.value,(l,e)=>(c(),m("img",{key:e,src:l,alt:"结果",class:"w-full h-auto block"},null,8,C))),128))],4)]),v("div",D,[f(o,null,{default:p(()=>t[5]||(t[5]=[h("原图: ",-1)])),_:1,__:[5]}),v("div",E,[q.value.src?(c(),m("img",{key:0,src:q.value.src,alt:"原图",class:"max-w-full h-auto block"},null,8,L)):w("",!0)])])])):(c(),m("div",U,[f(i,{"image-size":200,description:"无预览"})]))]),f(a,{title:"描述"},{default:p(()=>[f(o,null,{default:p(()=>t[6]||(t[6]=[h(" 将图片分割成四宫格、九宫格、十六宫格，支持自定义行与列；",-1),v("br",null,null,-1),h(" 比如：九宫格切图广泛应用于微信朋友圈，微博等社交媒体。 ",-1)])),_:1,__:[6]})]),_:1})])}}}),[["__scopeId","data-v-9cb241b4"],["__file","D:/dev/nodejs/tool-web1/tools-web/src/components/Tools/ImgCut/ImgCut.vue"]]);export{M as default};
