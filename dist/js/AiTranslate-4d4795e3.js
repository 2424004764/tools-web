var e=(e,a,l)=>new Promise((t,u)=>{var r=e=>{try{o(l.next(e))}catch(a){u(a)}},s=e=>{try{o(l.throw(e))}catch(a){u(a)}},o=e=>e.done?t(e.value):Promise.resolve(e.value).then(r,s);o((l=l.apply(e,a)).next())});import{d as a,q as l,r as t,al as u,o as r,c as s,R as o,a as n,K as i,aG as d,Q as v,a4 as c,P as p,aj as b,D as h,J as g,O as m}from"./chunk-bb5ca2a1.js";import{a as f}from"./chunk-5443edaa.js";import{_ as x}from"./chunk-10c426ed.js";import{_ as y}from"./chunk-9c6aa90d.js";import"./chunk-d6839cfd.js";import"../assets/index-92ba4add.js";import"./chunk-eb404ece.js";const k={class:"flex flex-col mt-3 flex-1"},T={class:"p-4 rounded-2xl bg-white"},_={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},I={class:"space-y-3"},w={class:"grid grid-cols-1 gap-2"},j=["value"],A={class:"flex gap-2"},E=["disabled"],P={class:"space-y-3"},L=["value"],O={class:"flex gap-2"},R=a({__name:"AiTranslate",setup(a){const R=l({title:"AI翻译",desc:"由AI大模型驱动，支持多语言互译，源语言可自动检测。"}),U=t({}.VITE_POLLINATIONS_API_KEY||""),V=t({}.VITE_POLLINATIONS_PROXY_URL),N=t({}.VITE_POLLINATIONS_TEXT_URL),C={zh:"Chinese",en:"English",ja:"Japanese",ko:"Korean",fr:"French",de:"German",es:"Spanish",pt:"Portuguese",it:"Italian",ru:"Russian",ar:"Arabic",vi:"Vietnamese",tr:"Turkish",id:"Indonesian",nl:"Dutch",pl:"Polish"},S=e=>C[e]||e,$=t(""),z=t(""),D=t(!1),X=[{label:"自动检测",value:"auto"},{label:"中文",value:"zh"},{label:"英文",value:"en"},{label:"日文",value:"ja"},{label:"韩文",value:"ko"},{label:"法文",value:"fr"},{label:"德文",value:"de"},{label:"西班牙文",value:"es"},{label:"葡萄牙文",value:"pt"},{label:"意大利文",value:"it"},{label:"俄文",value:"ru"},{label:"阿拉伯文",value:"ar"},{label:"越南文",value:"vi"},{label:"土耳其文",value:"tr"},{label:"印尼文",value:"id"},{label:"荷兰文",value:"nl"},{label:"波兰文",value:"pl"}],K=t("auto"),Y=t("zh"),F=()=>{if("auto"===K.value)return;const e=K.value;K.value=Y.value,Y.value=e;const a=$.value;$.value=z.value,z.value=a},G=a=>e(this,null,function*(){try{yield navigator.clipboard.writeText(a),alert("已复制")}catch(e){alert("复制失败，请手动复制")}}),J=()=>e(this,null,function*(){if($.value.trim())if("auto"!==Y.value){D.value=!0,z.value="";try{const e="​".repeat(1+Math.floor(3*Math.random())),a=(()=>{const e=K.value,a=Y.value,l=$.value.trim();return["You are a professional translator.","auto"===e?"Auto-detect the source language.":`The source language is ${S(e)}.`,`Translate the following text into ${S(a)}.`,"Rules: preserve meaning, tone & formatting (line breaks, markdown, code blocks, URLs);","keep numbers/units; do not add explanations, examples, or notes.","Only output the translated text and nothing else.","---TEXT START---",l,"---TEXT END---"].join("\n")})()+e,l=yield f.get(`${V.value}?path=${encodeURIComponent(a)}&target=${N.value}&params=_t=${Date.now()}`,{headers:{Authorization:"Bearer "+U.value}}),t="string"==typeof l.data?l.data:String(l.data);z.value=t}catch(e){alert("翻译失败，请稍后重试")}finally{D.value=!1}}else alert("目标语言不能为自动检测")});return(e,a)=>{const l=u("el-text");return r(),s("div",k,[o(x,{title:R.title},null,8,["title"]),n("div",T,[n("div",_,[n("div",I,[n("div",w,[i(n("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>K.value=e),class:"w-full p-2 border rounded"},[(r(),s(v,null,c(X,e=>n("option",{key:e.value,value:e.value},p(e.label),9,j)),64))],512),[[d,K.value]])]),i(n("textarea",{"onUpdate:modelValue":a[1]||(a[1]=e=>$.value=e),placeholder:"输入要翻译的文本...",class:"w-full p-3 border rounded min-h-[180px]"},null,512),[[b,$.value]]),n("div",A,[n("button",{onClick:J,disabled:D.value,class:h(["px-4 py-2 rounded text-white",D.value?"bg-gray-400":"bg-blue-600 hover:bg-blue-700"])},p(D.value?"翻译中...":"开始翻译"),11,E),n("button",{onClick:F,class:"px-4 py-2 rounded border hover:bg-gray-50"},"交换语言与文本"),n("button",{onClick:a[2]||(a[2]=e=>G($.value)),class:"px-4 py-2 rounded border hover:bg-gray-50"},"复制原文")])]),n("div",P,[i(n("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>Y.value=e),class:"w-full p-2 border rounded"},[(r(!0),s(v,null,c(X.filter(e=>"auto"!==e.value),e=>(r(),s("option",{key:e.value,value:e.value},p(e.label),9,L))),128))],512),[[d,Y.value]]),i(n("textarea",{"onUpdate:modelValue":a[4]||(a[4]=e=>z.value=e),readonly:"",class:"w-full p-3 border rounded min-h-[180px] bg-gray-50",placeholder:"翻译结果将显示在这里"},null,512),[[b,z.value]]),n("div",O,[n("button",{onClick:a[5]||(a[5]=e=>G(z.value)),class:"px-4 py-2 rounded border hover:bg-gray-50"},"复制译文")])])])]),o(y,{title:"描述"},{default:g(()=>[o(l,null,{default:g(()=>[m(p(R.desc),1)]),_:1})]),_:1})])}}});export{R as default};
