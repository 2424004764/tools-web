import{d as e,q as t,r as a,t as l,U as i,al as s,o as r,c as d,R as n,a as o,P as g,I as u,J as c,O as b,M as v,E as m,Q as h,a4 as x,D as p,W as f,aF as y}from"./chunk-bb5ca2a1.js";import{_ as w}from"./chunk-0024800c.js";import{_ as M}from"./chunk-9c6aa90d.js";import{_ as S}from"../assets/index-f8980254.js";import"./chunk-7296d483.js";import"./chunk-c8f53b98.js";import"./chunk-dd4ac5f9.js";const k={class:"flex flex-col mt-3 ml-4 flex-1 mr-3"},_={class:"p-6 rounded-2xl bg-white shadow-sm border border-gray-200"},C={class:"max-w-4xl mx-auto"},R={class:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6"},T={class:"text-center bg-blue-50 p-3 rounded-lg border border-blue-200"},j={class:"text-xl font-bold text-blue-600"},F={class:"text-center bg-green-50 p-3 rounded-lg border border-green-200"},I={class:"text-xl font-bold text-green-600"},P={class:"text-center bg-red-50 p-3 rounded-lg border border-red-200"},$={class:"text-xl font-bold text-red-600"},z={class:"text-center bg-purple-50 p-3 rounded-lg border border-purple-200"},L={class:"text-xl font-bold text-purple-600"},O={class:"text-center bg-orange-50 p-3 rounded-lg border border-orange-200"},W={class:"text-xl font-bold text-orange-600"},H={class:"flex justify-center mb-6"},A={class:"flex justify-center mb-6"},D=["onClick","onContextmenu","onTouchstart","onTouchend"],q=["innerHTML"],B={key:0,class:"text-center mb-6"},E={class:"bg-green-50 border-2 border-green-300 rounded-lg p-4 shadow-md"},J={class:"text-green-600"},Q={key:0,class:"text-yellow-600 font-medium mt-2"},U={key:1,class:"text-center mb-6"},G={class:"bg-red-50 border-2 border-red-300 rounded-lg p-4 shadow-md"},K={class:"text-red-600"},N=S(e({__name:"Minesweeper",setup(e){const S=t({title:"扫雷"}),N=t({isPlaying:!1,gameOver:!1,won:!1,time:0,highScore:0,minesLeft:0,revealedCount:0}),V=t({width:window.innerWidth<768?7:16,height:window.innerWidth<768?7:16,mines:window.innerWidth<768?10:40,cellSize:window.innerWidth<768?35:30}),X=a([]);let Y=null;const Z=(e,t)=>{let a=0;for(let l=-1;l<=1;l++)for(let i=-1;i<=1;i++){const s=t+l,r=e+i;s>=0&&s<V.height&&r>=0&&r<V.width&&X.value[s][r].isMine&&a++}return a},ee=(e,t)=>{if(!X.value[t][e].isRevealed&&!X.value[t][e].isFlagged)if(0===N.revealedCount&&(((e,t)=>{let a=0;for(;a<V.mines;){const l=Math.floor(Math.random()*V.width),i=Math.floor(Math.random()*V.height);!X.value[i][l].isMine&&(Math.abs(l-e)>1||Math.abs(i-t)>1)&&(X.value[i][l].isMine=!0,a++)}for(let l=0;l<V.height;l++)for(let e=0;e<V.width;e++)X.value[l][e].isMine||(X.value[l][e].neighborMines=Z(e,l))})(e,t),N.isPlaying=!0,ae()),X.value[t][e].isRevealed=!0,N.revealedCount++,X.value[t][e].isMine)le();else{if(0===X.value[t][e].neighborMines)for(let a=-1;a<=1;a++)for(let l=-1;l<=1;l++){const i=t+a,s=e+l;i>=0&&i<V.height&&s>=0&&s<V.width&&!X.value[i][s].isRevealed&&!X.value[i][s].isFlagged&&ee(s,i)}N.revealedCount===V.width*V.height-V.mines&&ie()}},te=(e,t)=>{X.value[t][e].isRevealed||X.value[t][e].isFlagged||(X.value[t][e].isFlagged=!0,N.minesLeft--)},ae=()=>{Y=setInterval(()=>{N.isPlaying&&N.time++},1e3)},le=()=>{N.isPlaying=!1,N.gameOver=!0;for(let e=0;e<V.height;e++)for(let t=0;t<V.width;t++)X.value[e][t].isMine&&(X.value[e][t].isRevealed=!0);Y&&(clearInterval(Y),Y=null)},ie=()=>{N.isPlaying=!1,N.won=!0;for(let e=0;e<V.height;e++)for(let t=0;t<V.width;t++)X.value[e][t].isMine&&(X.value[e][t].isFlagged=!0);Y&&(clearInterval(Y),Y=null),(N.time<N.highScore||0===N.highScore)&&(N.highScore=N.time,localStorage.setItem("minesweeperHighScore",N.highScore.toString()))},se=()=>{N.isPlaying=!1,N.gameOver=!1,N.won=!1,N.time=0,N.revealedCount=0,N.minesLeft=V.mines,X.value=Array(V.height).fill(null).map(()=>Array(V.width).fill(null).map(()=>({isMine:!1,isRevealed:!1,isFlagged:!1,neighborMines:0})))},re=()=>{Y&&(clearInterval(Y),Y=null),se()},de=e=>`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`,ne=e=>{const t="border border-gray-400 flex items-center justify-center font-bold transition-all duration-200";return e.isRevealed?(e.isMine,`${t} bg-gray-200 text-gray-800`):e.isFlagged?`${t} bg-yellow-400 text-yellow-800`:`${t} bg-gray-100 hover:bg-gray-200 text-gray-600`},oe=e=>e.isFlagged?"🚩":e.isRevealed?e.isMine?'<img src="/images/logo/mines.png" alt="地雷" class="w-4 h-4" />':0===e.neighborMines?"":e.neighborMines.toString():"",ge=e=>{if(!e.isRevealed||e.isMine)return"";return{1:"text-blue-600",2:"text-green-600",3:"text-red-600",4:"text-purple-600",5:"text-yellow-600",6:"text-cyan-600",7:"text-pink-600",8:"text-gray-600"}[e.neighborMines]||""};let ue=0,ce=null,be=!1;return l(()=>{const e=localStorage.getItem("minesweeperHighScore");e&&(N.highScore=parseInt(e)),se()}),i(()=>{Y&&clearInterval(Y)}),(e,t)=>{const a=s("el-button"),l=s("el-text");return r(),d("div",k,[n(w,{title:S.title},null,8,["title"]),o("div",_,[o("div",C,[o("div",R,[o("div",T,[t[1]||(t[1]=o("h3",{class:"text-sm font-medium text-blue-900"},"时间",-1)),o("p",j,g(de(N.time)),1)]),o("div",F,[t[2]||(t[2]=o("h3",{class:"text-sm font-medium text-green-900"},"最高分",-1)),o("p",I,g(de(N.highScore)),1)]),o("div",P,[t[3]||(t[3]=o("h3",{class:"text-sm font-medium text-red-900"},"剩余地雷",-1)),o("p",$,g(N.minesLeft),1)]),o("div",z,[t[4]||(t[4]=o("h3",{class:"text-sm font-medium text-purple-900"},"游戏板",-1)),o("p",L,g(V.width)+"×"+g(V.height),1)]),o("div",O,[t[5]||(t[5]=o("h3",{class:"text-sm font-medium text-orange-900"},"地雷数",-1)),o("p",W,g(V.mines),1)])]),o("div",H,[N.gameOver||N.won?(r(),u(a,{key:0,onClick:re,type:"success",class:"bg-green-500 hover:bg-green-600 border-green-600"},{default:c(()=>t[6]||(t[6]=[b(" 重新开始 ",-1)])),_:1,__:[6]})):v("",!0)]),o("div",A,[o("div",{class:"bg-gray-300 p-4 rounded-lg shadow-lg",style:m({display:"grid",gridTemplateColumns:`repeat(${V.width}, ${V.cellSize}px)`,gap:"1px"})},[(r(!0),d(h,null,x(X.value,(e,a)=>(r(),d(h,{key:`row-${a}`},[(r(!0),d(h,null,x(e,(e,l)=>(r(),d("div",{key:`${l}-${a}`,class:p(["cursor-pointer select-none",ne(e)]),style:m({width:V.cellSize+"px",height:V.cellSize+"px",fontSize:.4*V.cellSize+"px"}),onClick:e=>ee(l,a),onContextmenu:f(e=>te(l,a),["prevent"]),onTouchstart:e=>((e,t,a)=>{N.isPlaying&&!X.value[a][t].isRevealed&&(ue=Date.now(),be=!1,ce=setTimeout(()=>{X.value[a][t].isFlagged||te(t,a),be=!0},500))})(0,l,a),onTouchend:e=>((e,t,a)=>{if(!N.isPlaying)return;const l=Date.now()-ue;ce&&(clearTimeout(ce),ce=null),l<500&&!be&&ee(t,a)})(0,l,a),onTouchmove:t[0]||(t[0]=e=>{ce&&(clearTimeout(ce),ce=null)})},[o("span",{class:p(ge(e)),innerHTML:oe(e)},null,10,q)],46,D))),128))],64))),128))],4)]),N.won?(r(),d("div",B,[o("div",E,[t[7]||(t[7]=o("h3",{class:"text-lg font-medium text-green-900 mb-2"},"恭喜获胜！",-1)),o("p",J,"用时: "+g(de(N.time)),1),N.time<N.highScore||0===N.highScore?(r(),d("p",Q," 新纪录！恭喜你创造了新的最快时间！ ")):v("",!0)])])):v("",!0),N.gameOver?(r(),d("div",U,[o("div",G,[t[8]||(t[8]=o("h3",{class:"text-lg font-medium text-red-900 mb-2"},"游戏结束！",-1)),o("p",K,"用时: "+g(de(N.time)),1),t[9]||(t[9]=o("p",{class:"text-red-600"},"踩到地雷了，再接再厉！",-1))])])):v("",!0),t[10]||(t[10]=y('<div class="bg-gray-50 rounded-lg p-4 border-2 border-gray-200 shadow-sm" data-v-eab564ee><h3 class="text-lg font-medium text-gray-900 mb-3" data-v-eab564ee>游戏说明</h3><div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600" data-v-eab564ee><div class="bg-white p-3 rounded border border-gray-200" data-v-eab564ee><p data-v-eab564ee><strong class="text-blue-600" data-v-eab564ee>游戏目标：</strong>找出所有地雷，避免踩到地雷</p><p data-v-eab564ee><strong class="text-blue-600" data-v-eab564ee>操作方式：</strong></p><ul class="list-disc list-inside ml-2 mt-1 space-y-1" data-v-eab564ee><li data-v-eab564ee>PC端：左键点击揭示，右键标记地雷</li><li data-v-eab564ee>移动端：短按揭示，长按500毫秒标记地雷</li></ul></div><div class="bg-white p-3 rounded border border-gray-200" data-v-eab564ee><p data-v-eab564ee><strong class="text-green-600" data-v-eab564ee>数字含义：</strong>数字表示周围8个格子中地雷的数量</p><p data-v-eab564ee><strong class="text-red-600" data-v-eab564ee>挑战：</strong>用最短时间找出所有地雷</p></div></div><div class="mt-4 bg-white p-4 rounded border border-gray-200" data-v-eab564ee><h4 class="text-md font-medium text-gray-800 mb-2" data-v-eab564ee>详细玩法：</h4><div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600" data-v-eab564ee><div data-v-eab564ee><p class="font-medium text-gray-700 mb-2" data-v-eab564ee>🎯 游戏规则：</p><ul class="list-disc list-inside space-y-1" data-v-eab564ee><li data-v-eab564ee>游戏开始时，地雷随机分布在格子中</li><li data-v-eab564ee>第一次点击永远不会踩到地雷</li><li data-v-eab564ee>数字表示周围8个格子中地雷的数量</li><li data-v-eab564ee>空白格子会自动揭示周围的格子</li><li data-v-eab564ee>标记所有地雷或揭示所有安全格子获胜</li></ul></div><div data-v-eab564ee><p class="font-medium text-gray-700 mb-2" data-v-eab564ee>🎮 操作技巧：</p><ul class="list-disc list-inside space-y-1" data-v-eab564ee><li data-v-eab564ee>从角落开始，更容易找到突破口</li><li data-v-eab564ee>利用数字信息推理地雷位置</li><li data-v-eab564ee>标记确定的地雷，避免重复点击</li><li data-v-eab564ee>注意剩余地雷数量，帮助判断</li><li data-v-eab564ee>遇到困难时，可以重新开始游戏</li></ul></div></div><div class="mt-3 p-3 bg-yellow-50 rounded border border-yellow-200" data-v-eab564ee><p class="text-sm text-yellow-800" data-v-eab564ee><strong data-v-eab564ee>💡 提示：</strong>游戏会自动记录你的最快完成时间，挑战自己的记录吧！ </p></div></div></div>',1))])]),n(M,{title:"描述"},{default:c(()=>[n(l,null,{default:c(()=>t[11]||(t[11]=[b(" 经典扫雷游戏，考验你的逻辑推理能力：",-1),o("br",null,null,-1),o("br",null,null,-1),b(" 游戏特色：经典扫雷玩法，数字提示系统，实时计时统计",-1),o("br",null,null,-1),b(" 操作方式：左键点击揭示格子，右键标记地雷，数字表示周围地雷数",-1),o("br",null,null,-1),b(" 游戏目标：找出所有地雷，避免踩到地雷，挑战最快时间",-1),o("br",null,null,-1),b(" 训练效果：锻炼逻辑思维、推理能力和空间判断能力",-1),o("br",null,null,-1),o("br",null,null,-1),b(" 适合所有年龄段，是经典的益智游戏。 ",-1)])),_:1,__:[11]})]),_:1})])}}}),[["__scopeId","data-v-eab564ee"]]);export{N as default};
