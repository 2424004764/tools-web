var e=(e,a,l)=>new Promise((t,u)=>{var o=e=>{try{r(l.next(e))}catch(a){u(a)}},s=e=>{try{r(l.throw(e))}catch(a){u(a)}},r=e=>e.done?t(e.value):Promise.resolve(e.value).then(o,s);r((l=l.apply(e,a)).next())});import{d as a,q as l,r as t,al as u,o,c as s,R as r,a as n,K as i,aG as d,Q as v,a4 as c,P as p,aj as b,D as h,J as g,O as m}from"./chunk-bb5ca2a1.js";import{a as f}from"./chunk-96adf8d3.js";import{_ as x}from"./chunk-5446628c.js";import{_ as y}from"./chunk-9c6aa90d.js";import"./chunk-0a8d181f.js";import"../assets/index-978e9918.js";import"./chunk-b045bb46.js";const k={class:"flex flex-col mt-3 flex-1"},w={class:"p-4 rounded-2xl bg-white"},j={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},T={class:"space-y-3"},A={class:"grid grid-cols-1 gap-2"},_=["value"],C={class:"flex gap-2"},R=["disabled"],U={class:"space-y-3"},$=["value"],I={class:"flex gap-2"},P=a({__name:"AiTranslate",setup(a){const P=l({title:"AI翻译",desc:"由AI大模型驱动，支持多语言互译，源语言可自动检测。"}),V=t("NpgaKlHjioTlyo2B"),z=t("https://tool.fologde.com/proxy"),D=t("https://text.pollinations.ai"),E={zh:"Chinese",en:"English",ja:"Japanese",ko:"Korean",fr:"French",de:"German",es:"Spanish",pt:"Portuguese",it:"Italian",ru:"Russian",ar:"Arabic",vi:"Vietnamese",tr:"Turkish",id:"Indonesian",nl:"Dutch",pl:"Polish"},K=e=>E[e]||e,S=t(""),B=t(""),G=t(!1),J=[{label:"自动检测",value:"auto"},{label:"中文",value:"zh"},{label:"英文",value:"en"},{label:"日文",value:"ja"},{label:"韩文",value:"ko"},{label:"法文",value:"fr"},{label:"德文",value:"de"},{label:"西班牙文",value:"es"},{label:"葡萄牙文",value:"pt"},{label:"意大利文",value:"it"},{label:"俄文",value:"ru"},{label:"阿拉伯文",value:"ar"},{label:"越南文",value:"vi"},{label:"土耳其文",value:"tr"},{label:"印尼文",value:"id"},{label:"荷兰文",value:"nl"},{label:"波兰文",value:"pl"}],M=t("auto"),N=t("zh"),O=()=>{if("auto"===M.value)return;const e=M.value;M.value=N.value,N.value=e;const a=S.value;S.value=B.value,B.value=a},X=a=>e(this,null,function*(){try{yield navigator.clipboard.writeText(a),alert("已复制")}catch(e){alert("复制失败，请手动复制")}}),q=()=>e(this,null,function*(){if(S.value.trim())if("auto"!==N.value){G.value=!0,B.value="";try{const e="​".repeat(1+Math.floor(3*Math.random())),a=(()=>{const e=M.value,a=N.value,l=S.value.trim();return["You are a professional translator.","auto"===e?"Auto-detect the source language.":`The source language is ${K(e)}.`,`Translate the following text into ${K(a)}.`,"Rules: preserve meaning, tone & formatting (line breaks, markdown, code blocks, URLs);","keep numbers/units; do not add explanations, examples, or notes.","Only output the translated text and nothing else.","---TEXT START---",l,"---TEXT END---"].join("\n")})()+e,l=yield f.get(`${z.value}?path=${encodeURIComponent(a)}&target=${D.value}&params=_t=${Date.now()}`,{headers:{Authorization:"Bearer "+V.value}}),t="string"==typeof l.data?l.data:String(l.data);B.value=t}catch(e){alert("翻译失败，请稍后重试")}finally{G.value=!1}}else alert("目标语言不能为自动检测")});return(e,a)=>{const l=u("el-text");return o(),s("div",k,[r(x,{title:P.title},null,8,["title"]),n("div",w,[n("div",j,[n("div",T,[n("div",A,[i(n("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>M.value=e),class:"w-full p-2 border rounded"},[(o(),s(v,null,c(J,e=>n("option",{key:e.value,value:e.value},p(e.label),9,_)),64))],512),[[d,M.value]])]),i(n("textarea",{"onUpdate:modelValue":a[1]||(a[1]=e=>S.value=e),placeholder:"输入要翻译的文本...",class:"w-full p-3 border rounded min-h-[180px]"},null,512),[[b,S.value]]),n("div",C,[n("button",{onClick:q,disabled:G.value,class:h(["px-4 py-2 rounded text-white",G.value?"bg-gray-400":"bg-blue-600 hover:bg-blue-700"])},p(G.value?"翻译中...":"开始翻译"),11,R),n("button",{onClick:O,class:"px-4 py-2 rounded border hover:bg-gray-50"},"交换语言与文本"),n("button",{onClick:a[2]||(a[2]=e=>X(S.value)),class:"px-4 py-2 rounded border hover:bg-gray-50"},"复制原文")])]),n("div",U,[i(n("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>N.value=e),class:"w-full p-2 border rounded"},[(o(!0),s(v,null,c(J.filter(e=>"auto"!==e.value),e=>(o(),s("option",{key:e.value,value:e.value},p(e.label),9,$))),128))],512),[[d,N.value]]),i(n("textarea",{"onUpdate:modelValue":a[4]||(a[4]=e=>B.value=e),readonly:"",class:"w-full p-3 border rounded min-h-[180px] bg-gray-50",placeholder:"翻译结果将显示在这里"},null,512),[[b,B.value]]),n("div",I,[n("button",{onClick:a[5]||(a[5]=e=>X(B.value)),class:"px-4 py-2 rounded border hover:bg-gray-50"},"复制译文")])])])]),r(y,{title:"描述"},{default:g(()=>[r(l,null,{default:g(()=>[m(p(P.desc),1)]),_:1})]),_:1})])}}});export{P as default};
