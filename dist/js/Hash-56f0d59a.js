var e=(e,l,t)=>new Promise((a,i)=>{var o=e=>{try{n(t.next(e))}catch(l){i(l)}},s=e=>{try{n(t.throw(e))}catch(l){i(l)}},n=e=>e.done?a(e.value):Promise.resolve(e.value).then(o,s);n((t=t.apply(e,l)).next())});import{_ as l}from"./chunk-be34673d.js";import{_ as t}from"./chunk-9c6aa90d.js";import{c as a,_ as i}from"../assets/index-372abdb0.js";import{E as o}from"./chunk-0a8d181f.js";import{d as s,q as n,m as r,al as d,o as u,c,R as m,a as f,J as y,M as x,O as p,P as g,I as h}from"./chunk-bb5ca2a1.js";import"./chunk-96adf8d3.js";import"./chunk-b045bb46.js";const A={class:"flex flex-col mt-3 flex-1"},H={class:"p-4 rounded-2xl bg-white"},v={class:"flex flex-wrap gap-3 items-center"},_={key:0,class:"flex-1 min-w-[240px]"},S={class:"mt-4"},b={class:"mb-2 text-sm text-gray-600"},C={class:"mt-2 flex flex-wrap gap-2 button-container"},w={class:"mt-3"},k={class:"mt-6"},M={key:0,class:"mt-2 text-xs text-gray-500"},R={class:"mt-2 flex flex-wrap gap-2 button-container"},V={class:"mt-3"},z=i(s({__name:"Hash",setup(i){const s=n({title:"哈希校验/HMAC"}),z=n({algo:"SHA-256",text:"",hmacKey:"",textResult:"",fileResult:"",fileName:"",fileSize:0,loadingText:!1,loadingFile:!1,file:null}),j=e=>(new TextEncoder).encode(e),K=e=>{const l=new Uint8Array(e);return Array.from(l).map(e=>e.toString(16).padStart(2,"0")).join("")},F=()=>{if(!window.crypto||!window.crypto.subtle)throw o.error("当前环境不支持 Web Crypto"),new Error("WebCrypto not available")},U=(l,t)=>e(this,null,function*(){F();const e=yield crypto.subtle.digest({name:l},t);return K(e)}),B=()=>e(this,null,function*(){try{if(z.loadingText=!0,"HMAC-SHA256"===z.algo){F();const e=yield crypto.subtle.importKey("raw",j(z.hmacKey||""),{name:"HMAC",hash:"SHA-256"},!1,["sign"]),l=yield crypto.subtle.sign("HMAC",e,j(z.text||""));z.textResult=K(l)}else{const e=yield U(z.algo,j(z.text||"").buffer);z.textResult=e}}catch(e){}finally{z.loadingText=!1}}),N=l=>e(this,null,function*(){try{if(z.loadingFile=!0,"HMAC-SHA256"===z.algo){F();const e=yield crypto.subtle.importKey("raw",j(z.hmacKey||""),{name:"HMAC",hash:"SHA-256"},!1,["sign"]),t=yield l.arrayBuffer(),a=yield crypto.subtle.sign("HMAC",e,t);z.fileResult=K(a)}else{const e=yield l.arrayBuffer(),t=yield U(z.algo,e);z.fileResult=t}}catch(e){}finally{z.loadingFile=!1}}),T=l=>e(this,null,function*(){const e=l.target,t=e.files&&e.files[0];t&&(z.fileName=t.name,z.fileSize=t.size,z.file=t,yield N(t))}),E=()=>{z.text="",z.textResult=""},P=()=>a(z.textResult),q=()=>a(z.fileResult),I=()=>{z.text="The quick brown fox jumps over the lazy dog"};return r(()=>[z.text,z.algo,z.hmacKey],()=>{B(),z.file&&N(z.file)}),(e,a)=>{const i=d("el-option"),o=d("el-select"),n=d("el-input"),r=d("el-link"),j=d("el-button"),K=d("el-text");return u(),c("div",A,[m(l,{title:s.title},null,8,["title"]),f("div",H,[f("div",v,[f("div",null,[m(o,{modelValue:z.algo,"onUpdate:modelValue":a[0]||(a[0]=e=>z.algo=e),placeholder:"选择算法",style:{width:"180px"}},{default:y(()=>[m(i,{label:"SHA-1",value:"SHA-1"}),m(i,{label:"SHA-256",value:"SHA-256"}),m(i,{label:"SHA-512",value:"SHA-512"}),m(i,{label:"HMAC-SHA256",value:"HMAC-SHA256"})]),_:1},8,["modelValue"])]),"HMAC-SHA256"===z.algo?(u(),c("div",_,[m(n,{modelValue:z.hmacKey,"onUpdate:modelValue":a[1]||(a[1]=e=>z.hmacKey=e),placeholder:"HMAC 密钥（文本）"},null,8,["modelValue"])])):x("",!0)]),f("div",S,[f("div",b,[a[7]||(a[7]=p(" 文本摘要/HMAC ",-1)),m(r,{class:"ml-2",type:"primary",onClick:I},{default:y(()=>a[6]||(a[6]=[p("填充示例",-1)])),_:1,__:[6]})]),m(n,{modelValue:z.text,"onUpdate:modelValue":a[2]||(a[2]=e=>z.text=e),type:"textarea",rows:6,placeholder:"在此输入文本"},null,8,["modelValue"]),f("div",C,[m(j,{onClick:P},{default:y(()=>a[8]||(a[8]=[p("复制结果",-1)])),_:1,__:[8]}),m(j,{type:"danger",onClick:E},{default:y(()=>a[9]||(a[9]=[p("清空",-1)])),_:1,__:[9]})]),f("div",w,[a[10]||(a[10]=f("div",{class:"text-sm text-gray-600 mb-1"},"结果：",-1)),m(n,{modelValue:z.textResult,"onUpdate:modelValue":a[3]||(a[3]=e=>z.textResult=e),readonly:""},null,8,["modelValue"])])]),f("div",k,[a[15]||(a[15]=f("div",{class:"mb-2 text-sm text-gray-600"},"文件摘要/HMAC",-1)),f("input",{type:"file",onChange:T},null,32),z.fileName?(u(),c("div",M," 文件："+g(z.fileName)+"（"+g(z.fileSize)+" 字节 ≈ "+g((z.fileSize/1024).toFixed(2))+" KB / "+g((z.fileSize/1024/1024).toFixed(2))+" MB / "+g((z.fileSize/1024/1024/1024).toFixed(2))+" GB） ",1)):x("",!0),f("div",R,[m(j,{onClick:q},{default:y(()=>a[11]||(a[11]=[p("复制结果",-1)])),_:1,__:[11]}),m(j,{type:"danger",onClick:a[4]||(a[4]=e=>{return l=null==e?void 0:e.target,z.fileName="",z.fileSize=0,z.fileResult="",z.file=null,z.loadingFile=!1,void(l&&(l.value=""));var l})},{default:y(()=>a[12]||(a[12]=[p("清空",-1)])),_:1,__:[12]}),z.loadingFile?(u(),h(j,{key:0,loading:!0,disabled:""},{default:y(()=>a[13]||(a[13]=[p("计算中",-1)])),_:1,__:[13]})):x("",!0)]),f("div",V,[a[14]||(a[14]=f("div",{class:"text-sm text-gray-600 mb-1"},"结果：",-1)),m(n,{modelValue:z.fileResult,"onUpdate:modelValue":a[5]||(a[5]=e=>z.fileResult=e),readonly:""},null,8,["modelValue"])])])]),m(t,{title:"描述"},{default:y(()=>[m(K,null,{default:y(()=>a[16]||(a[16]=[p(" 支持 SHA-1、SHA-256、SHA-512 与 HMAC-SHA256；文本/文件摘要；结果十六进制显示，可复制。 ",-1)])),_:1,__:[16]})]),_:1})])}}}),[["__scopeId","data-v-14f6807c"]]);export{z as default};
