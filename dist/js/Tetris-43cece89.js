var e=Object.defineProperty,l=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,d=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t,o=(e,l)=>{for(var a in l||(l={}))r.call(l,a)&&d(e,a,l[a]);if(t)for(var a of t(l))s.call(l,a)&&d(e,a,l[a]);return e},i=(e,t)=>l(e,a(t));import{_ as n}from"./chunk-222eeebe.js";import{_ as c}from"./chunk-9c6aa90d.js";import{d as u,q as g,r as b,t as v,U as p,al as f,o as x,c as h,R as m,a as y,P as w,J as k,O as S,I as P,D as _,M as L,E as O,Q as I,a4 as j,aF as z}from"./chunk-bb5ca2a1.js";import{_ as W}from"../assets/index-ca88e876.js";import"./chunk-8b37ed0a.js";import"./chunk-273e6dc9.js";import"./chunk-94d45690.js";const M={class:"flex flex-col mt-3 ml-4 flex-1 mr-3"},D={class:"p-6 rounded-2xl bg-white shadow-sm border border-gray-200"},A={class:"max-w-4xl mx-auto"},C={class:"grid grid-cols-2 md:grid-cols-6 gap-4 mb-6"},H={class:"text-center bg-blue-50 p-3 rounded-lg border border-blue-200"},$={class:"text-xl font-bold text-blue-600"},E={class:"text-center bg-green-50 p-3 rounded-lg border border-green-200"},T={class:"text-xl font-bold text-green-600"},J={class:"text-center bg-purple-50 p-3 rounded-lg border border-purple-200"},R={class:"text-xl font-bold text-purple-600"},U={class:"text-center bg-orange-50 p-3 rounded-lg border border-orange-200"},Z={class:"text-xl font-bold text-orange-600"},q={class:"text-center bg-indigo-50 p-3 rounded-lg border border-indigo-200"},F={class:"text-xl font-bold text-indigo-600"},Q={class:"text-center bg-red-50 p-3 rounded-lg border border-red-200"},B={class:"text-xl font-bold text-red-600"},G={class:"flex flex-col sm:flex-row justify-center items-center gap-4 mb-6"},K={class:"flex items-center gap-3 bg-gray-50 p-3 rounded-lg border border-gray-200"},N={class:"text-sm font-bold text-gray-800 min-w-[40px] text-center"},V={class:"flex gap-3"},X={class:"flex justify-center mb-6"},Y={key:0,class:"text-center mb-6"},ee={class:"flex justify-center mb-6"},le={class:"flex gap-8"},ae={class:"bg-gray-100 p-4 rounded-lg shadow-lg"},te={class:"bg-gray-100 p-4 rounded-lg shadow-lg"},re={key:1,class:"text-center mb-6"},se={class:"bg-red-50 border-2 border-red-300 rounded-lg p-4 shadow-md"},de={class:"text-red-600"},oe={class:"text-red-600"},ie={class:"text-red-600"},ne={key:0,class:"text-yellow-600 font-medium mt-2"},ce=W(u({__name:"Tetris",setup(e){const l=g({title:"俄罗斯方块"}),a=g({isPlaying:!1,isPaused:!1,score:0,highScore:0,level:1,lines:0,gameOver:!1}),t=g({boardWidth:window.innerWidth<768?10:12,boardHeight:window.innerWidth<768?20:22,cellSize:window.innerWidth<768?25:30,speedLevel:3,minSpeedLevel:1,maxSpeedLevel:10}),r=e=>1100-100*e,s=b([]),d=b(null),u=b(null);let W=null;const ce={I:[[1,1,1,1]],O:[[1,1],[1,1]],T:[[0,1,0],[1,1,1]],S:[[0,1,1],[1,1,0]],Z:[[1,1,0],[0,1,1]],J:[[1,0,0],[1,1,1]],L:[[0,0,1],[1,1,1]]},ue={I:"#00f5ff",O:"#ffff00",T:"#a000f0",S:"#00f000",Z:"#f00000",J:"#0000f0",L:"#ffa000"},ge=()=>{s.value=Array(t.boardHeight).fill(null).map(()=>Array(t.boardWidth).fill(0))},be=()=>{const e=Object.keys(ce),l=e[Math.floor(Math.random()*e.length)];return{shape:ce[l],type:l,x:Math.floor(t.boardWidth/2)-Math.floor(ce[l][0].length/2),y:0}},ve=(e,l)=>{for(let a=0;a<e.shape.length;a++)for(let r=0;r<e.shape[a].length;r++)if(e.shape[a][r]){const s=e.x+r,d=e.y+a;if(s<0||s>=t.boardWidth||d>=t.boardHeight||d>=0&&l[d][s])return!0}return!1},pe=()=>{let e=0;for(let l=t.boardHeight-1;l>=0;l--)s.value[l].every(e=>1===e)&&(s.value.splice(l,1),s.value.unshift(Array(t.boardWidth).fill(0)),e++,l++);if(e>0){a.lines+=e,a.score+=100*e*a.level;const l=Math.floor(a.lines/10)+1;if(l>a.level&&(a.level=l,W)){clearInterval(W);const e=r(t.speedLevel);W=setInterval(ye,Math.max(100,e-50*a.level))}}},fe=(e,l)=>{if(!d.value)return!1;const a=i(o({},d.value),{x:d.value.x+e,y:d.value.y+l});return!ve(a,s.value)&&(d.value.x=a.x,d.value.y=a.y,!0)},xe=()=>{if(!d.value)return;const e=d.value.shape[0].map((e,l)=>d.value.shape.map(e=>e[l]).reverse()),l=i(o({},d.value),{shape:e});ve(l,s.value)||(d.value.shape=e)},he=()=>{if(a.isPlaying)if(a.isPaused=!a.isPaused,a.isPaused)W&&(clearInterval(W),W=null);else{const e=r(t.speedLevel);W=setInterval(ye,Math.max(100,e-50*a.level))}},me=e=>{const l=Math.max(t.minSpeedLevel,Math.min(t.maxSpeedLevel,t.speedLevel+e));if(t.speedLevel=l,a.isPlaying&&!a.isPaused&&W){clearInterval(W);const e=r(t.speedLevel);W=setInterval(ye,Math.max(100,e-50*a.level))}},ye=()=>{a.isPlaying&&!a.isPaused&&d.value&&(fe(0,1)||(()=>{if(d.value){for(let e=0;e<d.value.shape.length;e++)for(let l=0;l<d.value.shape[e].length;l++)if(d.value.shape[e][l]){const a=d.value.x+l,t=d.value.y+e;t>=0&&(s.value[t][a]=1)}pe(),d.value=u.value,u.value=be(),d.value&&ve(d.value,s.value)&&ke()}})())},we=()=>{a.isPlaying=!0,a.isPaused=!1,a.gameOver=!1,a.score=0,a.level=1,a.lines=0,ge(),d.value=be(),u.value=be();const e=r(t.speedLevel);W=setInterval(ye,e)},ke=()=>{a.isPlaying=!1,a.gameOver=!0,W&&(clearInterval(W),W=null),a.score>a.highScore&&(a.highScore=a.score,localStorage.setItem("tetrisHighScore",a.highScore.toString()))},Se=()=>{W&&clearInterval(W),we()},Pe=e=>{if(a.isPlaying){if("p"===e.key||"P"===e.key)return e.preventDefault(),void he();if(!a.isPaused)switch(e.key){case"ArrowLeft":case"a":case"A":e.preventDefault(),fe(-1,0);break;case"ArrowRight":case"d":case"D":e.preventDefault(),fe(1,0);break;case"ArrowDown":case"s":case"S":e.preventDefault(),fe(0,1);break;case"ArrowUp":case" ":case"w":case"W":e.preventDefault(),xe()}}};return v(()=>{const e=localStorage.getItem("tetrisHighScore");e&&(a.highScore=parseInt(e)),ge(),u.value=be(),window.addEventListener("keydown",Pe)}),p(()=>{W&&clearInterval(W),window.removeEventListener("keydown",Pe)}),(e,r)=>{var o,i;const g=f("el-button"),b=f("el-text");return x(),h("div",M,[m(n,{title:l.title},null,8,["title"]),y("div",D,[y("div",A,[y("div",C,[y("div",H,[r[2]||(r[2]=y("h3",{class:"text-sm font-medium text-blue-900"},"得分",-1)),y("p",$,w(a.score),1)]),y("div",E,[r[3]||(r[3]=y("h3",{class:"text-sm font-medium text-green-900"},"最高分",-1)),y("p",T,w(a.highScore),1)]),y("div",J,[r[4]||(r[4]=y("h3",{class:"text-sm font-medium text-purple-900"},"等级",-1)),y("p",R,w(a.level),1)]),y("div",U,[r[5]||(r[5]=y("h3",{class:"text-sm font-medium text-orange-900"},"消除行数",-1)),y("p",Z,w(a.lines),1)]),y("div",q,[r[6]||(r[6]=y("h3",{class:"text-sm font-medium text-indigo-900"},"游戏板",-1)),y("p",F,w(t.boardWidth)+"×"+w(t.boardHeight),1)]),y("div",Q,[r[7]||(r[7]=y("h3",{class:"text-sm font-medium text-red-900"},"速度",-1)),y("p",B,w(t.speedLevel)+"级",1)])]),y("div",G,[y("div",K,[r[10]||(r[10]=y("span",{class:"text-sm font-medium text-gray-700"},"速度等级:",-1)),m(g,{size:"small",onClick:r[0]||(r[0]=e=>me(-1)),disabled:t.speedLevel<=t.minSpeedLevel,class:"bg-blue-500 hover:bg-blue-600"},{default:k(()=>r[8]||(r[8]=[S(" 慢 ",-1)])),_:1,__:[8]},8,["disabled"]),y("span",N,w(t.speedLevel),1),m(g,{size:"small",onClick:r[1]||(r[1]=e=>me(1)),disabled:t.speedLevel>=t.maxSpeedLevel,class:"bg-red-500 hover:bg-red-600"},{default:k(()=>r[9]||(r[9]=[S(" 快 ",-1)])),_:1,__:[9]},8,["disabled"]),r[11]||(r[11]=y("span",{class:"text-xs text-gray-500"},"(1慢-10快)",-1))]),y("div",V,[a.isPlaying?(x(),P(g,{key:0,onClick:he,type:a.isPaused?"success":"warning",class:_(a.isPaused?"bg-green-500 hover:bg-green-600":"bg-yellow-500 hover:bg-yellow-600")},{default:k(()=>[S(w(a.isPaused?"继续 (P)":"暂停 (P)"),1)]),_:1},8,["type","class"])):L("",!0),a.isPlaying?(x(),P(g,{key:1,onClick:Se,type:"danger",class:"bg-red-500 hover:bg-red-600 border-red-600"},{default:k(()=>r[12]||(r[12]=[S(" 重新开始 ",-1)])),_:1,__:[12]})):L("",!0)])]),y("div",X,[a.isPlaying||a.gameOver?L("",!0):(x(),P(g,{key:0,onClick:we,type:"primary",class:"bg-blue-500 hover:bg-blue-600 border-blue-600"},{default:k(()=>r[13]||(r[13]=[S(" 开始游戏 ",-1)])),_:1,__:[13]})),a.gameOver?(x(),P(g,{key:1,onClick:Se,type:"success",class:"bg-green-500 hover:bg-green-600 border-green-600"},{default:k(()=>r[14]||(r[14]=[S(" 重新开始 ",-1)])),_:1,__:[14]})):L("",!0)]),a.isPaused&&a.isPlaying?(x(),h("div",Y,r[15]||(r[15]=[y("div",{class:"bg-yellow-50 border-2 border-yellow-300 rounded-lg p-4 shadow-md"},[y("h3",{class:"text-lg font-medium text-yellow-900 mb-2"},"游戏已暂停"),y("p",{class:"text-yellow-600"},"按 P 键或点击继续按钮恢复游戏")],-1)]))):L("",!0),y("div",ee,[y("div",le,[y("div",ae,[y("div",{class:"border-2 border-gray-400 bg-gray-800 relative",style:O({width:t.boardWidth*t.cellSize+"px",height:t.boardHeight*t.cellSize+"px"})},[(x(!0),h(I,null,j(s.value,(e,l)=>(x(),h(I,{key:l},[(x(!0),h(I,null,j(e,(e,a)=>(x(),h("div",{key:`${a}-${l}`,class:_(["border border-gray-600 absolute",{"bg-gray-700":0===e,"bg-blue-500":1===e}]),style:O({width:t.cellSize+"px",height:t.cellSize+"px",left:a*t.cellSize+"px",top:l*t.cellSize+"px"})},null,6))),128))],64))),128)),d.value&&a.isPlaying?(x(!0),h(I,{key:0},j(d.value.shape,(e,l)=>(x(),h(I,{key:`piece-row-${l}`},[(x(!0),h(I,null,j(e,(e,a)=>(x(),h(I,{key:`piece-${a}-${l}`},[e?(x(),h("div",{key:0,class:"border border-gray-600 absolute",style:O({width:t.cellSize+"px",height:t.cellSize+"px",backgroundColor:ue[d.value.type],left:(d.value.x+a)*t.cellSize+"px",top:(d.value.y+l)*t.cellSize+"px"})},null,4)):L("",!0)],64))),128))],64))),128)):L("",!0)],4)]),y("div",te,[r[16]||(r[16]=y("h3",{class:"text-lg font-medium text-gray-900 mb-3"},"下一个",-1)),y("div",{class:"border-2 border-gray-400 bg-gray-800 p-2",style:O({display:"grid",gridTemplateColumns:`repeat(${(null==(i=null==(o=u.value)?void 0:o.shape[0])?void 0:i.length)||4}, ${.8*t.cellSize}px)`,gap:"1px"})},[u.value?(x(!0),h(I,{key:0},j(u.value.shape.flat(),e=>(x(),h("div",{key:Math.random(),class:_(["border border-gray-600",{"bg-gray-700":!e,"bg-blue-500":e}]),style:O({width:.8*t.cellSize+"px",height:.8*t.cellSize+"px",backgroundColor:e?ue[u.value.type]:"#374151"})},null,6))),128)):L("",!0)],4)])])]),a.gameOver?(x(),h("div",re,[y("div",se,[r[17]||(r[17]=y("h3",{class:"text-lg font-medium text-red-900 mb-2"},"游戏结束！",-1)),y("p",de,"最终得分: "+w(a.score),1),y("p",oe,"消除行数: "+w(a.lines),1),y("p",ie,"达到等级: "+w(a.level),1),a.score>a.highScore?(x(),h("p",ne," 新纪录！恭喜你创造了新的最高分！ ")):L("",!0)])])):L("",!0),r[18]||(r[18]=z('<div class="bg-gray-50 rounded-lg p-4 border-2 border-gray-200 shadow-sm" data-v-99baffc8><h3 class="text-lg font-medium text-gray-900 mb-3" data-v-99baffc8>游戏说明</h3><div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600" data-v-99baffc8><div class="bg-white p-3 rounded border border-gray-200" data-v-99baffc8><p data-v-99baffc8><strong class="text-blue-600" data-v-99baffc8>游戏目标：</strong>消除完整的横行，获得高分</p><p data-v-99baffc8><strong class="text-blue-600" data-v-99baffc8>操作方式：</strong>方向键或WASD控制，空格键/W键旋转</p><p data-v-99baffc8><strong class="text-blue-600" data-v-99baffc8>游戏控制：</strong>P键暂停/继续，可调节下落速度</p></div><div class="bg-white p-3 rounded border border-gray-200" data-v-99baffc8><p data-v-99baffc8><strong class="text-green-600" data-v-99baffc8>键盘操作：</strong>A/←左移，D/→右移，S/↓快降，W/↑/空格旋转</p><p data-v-99baffc8><strong class="text-purple-600" data-v-99baffc8>得分规则：</strong>每消除一行+100分×当前等级</p><p data-v-99baffc8><strong class="text-red-600" data-v-99baffc8>升级机制：</strong>每消除10行升一级，速度加快</p></div></div></div>',1))])]),m(c,{title:"描述"},{default:k(()=>[m(b,null,{default:k(()=>r[19]||(r[19]=[S(" 经典俄罗斯方块游戏，考验你的空间思维和反应速度：",-1),y("br",null,null,-1),y("br",null,null,-1),S(" 游戏特色：经典俄罗斯方块玩法，7种不同形状的方块，实时得分统计",-1),y("br",null,null,-1),S(" 操作方式：方向键控制移动，空格键旋转方块，消除完整横行",-1),y("br",null,null,-1),S(" 游戏目标：尽可能多地消除横行，获得高分，挑战更高等级",-1),y("br",null,null,-1),S(" 训练效果：锻炼空间思维能力、反应速度和策略规划",-1),y("br",null,null,-1),y("br",null,null,-1),S(" 适合所有年龄段，是经典的益智游戏。 ",-1)])),_:1,__:[19]})]),_:1})])}}}),[["__scopeId","data-v-99baffc8"]]);export{ce as default};
