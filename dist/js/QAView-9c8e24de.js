var e=(e,s,a)=>new Promise((t,n)=>{var c=e=>{try{o(a.next(e))}catch(s){n(s)}},i=e=>{try{o(a.throw(e))}catch(s){n(s)}},o=e=>e.done?t(e.value):Promise.resolve(e.value).then(c,i);o((a=a.apply(e,s)).next())});import{d as s,aA as a,r as t,t as n,al as c,ar as i,o,c as l,K as r,a as d,P as u,R as v,J as h,O as m,u as q,M as p,Q as w,a4 as f}from"./chunk-bb5ca2a1.js";import{f as k}from"./chunk-f8d8cddf.js";import{d as y,K as _,H as g,I as b,E as C}from"./chunk-e922f209.js";import{_ as x}from"../assets/index-6c437f5f.js";import"./chunk-cdccf614.js";import"./chunk-27701a41.js";const I={class:"qa-view-fullscreen"},Q={class:"qa-view-content"},T={key:0,class:"qa-page"},$={class:"qa-header"},j={class:"qa-title"},A={class:"qa-actions"},L={key:0,class:"qa-header-content"},H=["innerHTML"],M={class:"qa-main-content"},P={key:0,class:"qa-items-container"},R={class:"qa-question-section"},z={class:"section-header"},D={class:"section-title"},K={class:"section-content"},N={class:"question-content"},S={class:"qa-answer-section"},U={class:"section-header"},E={class:"section-title"},J={class:"section-content"},O={class:"answer-content"},V={key:1,class:"qa-fallback-container"},B={class:"qa-question-section"},F={class:"section-header"},G={class:"section-content"},W={class:"question-content"},X={class:"qa-answer-section"},Y={class:"section-header"},Z={class:"section-content"},ee={class:"answer-content"},se={key:1,class:"qa-footer-content"},ae=["innerHTML"],te={class:"qa-page-info"},ne={class:"page-meta"},ce={class:"meta-item"},ie={class:"meta-item"},oe={key:1,class:"qa-not-found"},le=x(s({__name:"QAView",setup(s){const x=a(),le=t(null),re=t(!0),de=()=>e(this,null,function*(){try{re.value=!0;const e=x.params.id,s=yield k.get(`/api/qa-view/${e}`);200===s.status?le.value=s.data:C.error("QA页面不存在或未公开")}catch(e){C.error("获取QA页面失败")}finally{re.value=!1}}),ue=()=>e(this,null,function*(){try{yield navigator.clipboard.writeText(window.location.href),C.success("链接已复制到剪贴板")}catch(e){C.error("复制失败")}});return n(()=>{de()}),(e,s)=>{const a=c("el-button"),t=c("el-icon"),n=i("loading");return o(),l("div",I,[r((o(),l("div",Q,[le.value?(o(),l("div",T,[d("div",$,[d("h1",j,u(le.value.title),1),d("div",A,[v(a,{type:"primary",icon:q(y),onClick:ue},{default:h(()=>s[1]||(s[1]=[m(" 复制链接 ",-1)])),_:1,__:[1]},8,["icon"]),v(a,{type:"success",icon:q(_),onClick:s[0]||(s[0]=e=>(e=>{var s;const a=encodeURIComponent(window.location.href),t=encodeURIComponent((null==(s=le.value)?void 0:s.title)||"");let n="";switch(e){case"weibo":n=`https://service.weibo.com/share/share.php?url=${a}&title=${t}`;break;case"qq":n=`https://connect.qq.com/widget/shareqq/index.html?url=${a}&title=${t}`;break;case"twitter":n=`https://twitter.com/intent/tweet?url=${a}&text=${t}`}n&&window.open(n,"_blank","width=600,height=400")})("weibo"))},{default:h(()=>s[2]||(s[2]=[m(" 分享到微博 ",-1)])),_:1,__:[2]},8,["icon"])])]),le.value.headerContent?(o(),l("div",L,[d("div",{class:"custom-content",innerHTML:le.value.headerContent},null,8,H)])):p("",!0),d("div",M,[le.value.qaItems&&le.value.qaItems.length>0?(o(),l("div",P,[(o(!0),l(w,null,f(le.value.qaItems,(e,s)=>(o(),l("div",{key:s,class:"qa-item-section"},[d("div",R,[d("div",z,[v(t,{class:"section-icon"},{default:h(()=>[v(q(g))]),_:1}),d("h2",D,"问题 "+u(s+1),1)]),d("div",K,[d("div",N,u(e.question),1)])]),d("div",S,[d("div",U,[v(t,{class:"section-icon"},{default:h(()=>[v(q(b))]),_:1}),d("h2",E,"答案 "+u(s+1),1)]),d("div",J,[d("div",O,u(e.answer),1)])])]))),128))])):(o(),l("div",V,[d("div",B,[d("div",F,[v(t,{class:"section-icon"},{default:h(()=>[v(q(g))]),_:1}),s[3]||(s[3]=d("h2",{class:"section-title"},"问题",-1))]),d("div",G,[d("div",W,u(le.value.question||"暂无问题"),1)])]),d("div",X,[d("div",Y,[v(t,{class:"section-icon"},{default:h(()=>[v(q(b))]),_:1}),s[4]||(s[4]=d("h2",{class:"section-title"},"答案",-1))]),d("div",Z,[d("div",ee,u(le.value.answer||"暂无答案"),1)])])]))]),le.value.footerContent?(o(),l("div",se,[d("div",{class:"custom-content",innerHTML:le.value.footerContent},null,8,ae)])):p("",!0),d("div",te,[d("div",ne,[d("span",ce,"创建时间："+u(new Date(le.value.createTime).toLocaleString("zh-CN")),1),d("span",ie,"更新时间："+u(new Date(le.value.updateTime).toLocaleString("zh-CN")),1)])])])):re.value?p("",!0):(o(),l("div",oe,[v(t,{class:"not-found-icon"},{default:h(()=>[v(q(g))]),_:1}),s[5]||(s[5]=d("h2",{class:"not-found-title"},"QA页面不存在",-1)),s[6]||(s[6]=d("p",{class:"not-found-desc"},"该QA页面可能已被删除或未公开",-1))]))])),[[n,re.value]])])}}}),[["__scopeId","data-v-d97c24b5"]]);export{le as default};
