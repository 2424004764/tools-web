var e=Object.defineProperty,t=(t,r,s)=>(((t,r,s)=>{r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[r]=s})(t,"symbol"!=typeof r?r+"":r,s),s);import{a as r}from"./chunk-5443edaa.js";import{d as s,h as o}from"../assets/index-f6e90b6f.js";import{E as n}from"./chunk-d6839cfd.js";const i=new class{constructor(){t(this,"instance"),t(this,"proxyUrl"),this.proxyUrl="https://tool.fologde.com",this.instance=r.create({baseURL:this.proxyUrl,timeout:3e4}),this.instance.interceptors.request.use(e=>{const t=s();return t&&(e.headers=e.headers||{},e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),this.instance.interceptors.response.use(e=>e,e=>{if(e.response){const t=e.response.status;401===t?(n.error("登录已过期，即将跳转到登录页"),setTimeout(()=>{window.location.href="/login"},1e3)):o(t)}else e.request&&n.error("网络连接失败");return Promise.reject(e)})}get(e,t){return this.instance.get(e,t)}post(e,t,r){return this.instance.post(e,t,r)}put(e,t,r){return this.instance.put(e,t,r)}delete(e,t){return this.instance.delete(e,t)}getProxyUrl(){return this.proxyUrl}};export{i as f};
