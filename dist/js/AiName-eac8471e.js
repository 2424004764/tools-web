var e=(e,l,t)=>new Promise((a,s)=>{var n=e=>{try{u(t.next(e))}catch(l){s(l)}},o=e=>{try{u(t.throw(e))}catch(l){s(l)}},u=e=>e.done?a(e.value):Promise.resolve(e.value).then(n,o);u((t=t.apply(e,l)).next())});import{d as l,r as t,q as a,m as s,b as n,al as o,o as u,c as r,R as i,a as c,K as d,aj as v,aG as p,aF as m,Q as g,a4 as f,P as b,D as x,M as h,J as y,O as k}from"./chunk-bb5ca2a1.js";import{a as w}from"./chunk-cdccf614.js";import{_ as $}from"./chunk-bc8937e5.js";import{_ as j}from"./chunk-9c6aa90d.js";import{c as U}from"../assets/index-7475df8e.js";import{E as V}from"./chunk-e922f209.js";import"./chunk-27701a41.js";const C={class:"flex flex-col mt-3 flex-1"},_={class:"p-4 rounded-2xl bg-white"},M={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},A={class:"space-y-4"},P={class:"grid grid-cols-2 gap-3"},T={class:"grid grid-cols-2 gap-3"},W={class:"grid grid-cols-3 gap-3"},q={key:0,class:"col-span-3 grid grid-cols-3 gap-3"},z={class:"col-span-3"},D={key:1,class:"col-span-3"},F={class:"flex items-center justify-between mb-2"},G={class:"flex flex-wrap gap-2 text-xs"},N=["onClick"],Q=["disabled"],B={class:"space-y-3"},E={class:"flex items-center justify-between"},H=["disabled"],I={class:"min-h-[220px] border rounded-lg p-3 bg-gray-50"},J={key:0,class:"text-gray-500"},K={key:1,class:"space-y-2"},O={class:"pr-3"},R={class:"font-medium"},S={key:0,class:"text-gray-600 text-sm mt-1"},L=["onClick"],X={key:0,class:"text-gray-400 text-sm"},Y=l({__name:"AiName",setup(l){const Y=t("pk_xQpDqfF17TnTC8zA"),Z=t("https://tool.fologde.com/proxy"),ee=t("https://gen.pollinations.ai"),le=a({title:"AI起名",desc:"输入父母姓氏，选择名的长度与性别，一键生成多个中文姓名，并给出命名理由"}),te=t(""),ae=t(""),se=t("父姓"),ne=t("男"),oe=t("1-2"),ue=t("不限"),re=t(10),ie=t(""),ce=t(""),de=t(""),ve=t("前"),pe=t("");s(ce,e=>{pe.value=function(e){var l;if(!e)return"";const[t,a]=e.split("T");if(!t)return"";if(!a)return`${t} 00:00:00`;const s=a.split(":");return`${t} ${s[0]||"00"}:${s[1]||"00"}:${(null==(l=s[2])?void 0:l.slice(0,2))||"00"}`}((e||"").trim())},{immediate:!0});const me=["聪慧睿智","健康平安","自信阳光","知书达理","博学多才","坚毅勇敢","温婉大方","心怀远志","独立自强","善良纯真"],ge=t(!1),fe=t([]),be=n(()=>("母姓"===se.value?!!ae.value.trim():!!te.value.trim())&&!ge.value&&re.value>0&&re.value<=50),xe=n(()=>"1-2"===oe.value||"2"===oe.value),he=[{f:"张",m:"李"},{f:"王",m:"赵"},{f:"陈",m:"刘"}],ye=()=>{const e=Math.floor(Math.random()*he.length);te.value=he[e].f,ae.value=he[e].m},ke=(e,l)=>{const t=te.value.trim(),a=ae.value.trim(),s=se.value,n="不限"===ue.value?"不限定风格":`${ue.value}风格`,o=ne.value,u=e||oe.value,r=[`你是一位中文姓名学助理，请基于以下约束生成 ${null!=l?l:re.value} 个中文全名，并给出简洁的命名理由：`,`- 输入姓氏：父姓「${t||"无"}」、母姓「${a||"无"}」`,`- 姓氏使用：${s}`,`- 名字长度：仅名部分为 ${"1-2"===u?"1 或 2":u} 个汉字（不含姓氏）；${"1"===u?"名必须为 1 个汉字，禁止 2 字名":"2"===u?"名必须为 2 个汉字，禁止 1 字名":"名只能为 1 或 2 个汉字，且 2 字名数量不得少于 1 字名；输出顺序从 2 字名开始，然后与 1 字名交替排列（2、1、2、1...）"}`,`- 性别：${o}（注意名字读感与性别气质匹配）`,`- 风格：${n}（语义积极、读起来顺口，避免生僻与负面含义）`],i=ie.value.replace(/\r?\n/g,"；").trim();i&&r.push(`- 寓意：${i}（名字需体现或贴近该寓意）`);const c=pe.value;c&&r.push(`- 出生日期时间：${c}（精确到时分秒，可用于参考读音与寓意的协调与避讳）`);const d=(de.value||"").trim().slice(0,1);if(d&&("2"===u||"1-2"===u)){const e="前"===ve.value?"第1位":"第2位";"2"===u?r.push(`- 固定字：名中必须包含「${d}」，且位置在${e}`):r.push(`- 固定字：若为1字名则名=「${d}」；若为2字名则包含「${d}」且位置在${e}`)}return r.push("- 规则：所有姓名必须以所选姓氏开头；避免多音不雅，尽量避开同音低俗；可参考寓意、音律、字形搭配、文化典故等","- 自检：逐条校验“名”的汉字个数是否满足本次设定；当设为“1-2”时，保证 2 字名数量不小于 1 字名，且尽量交替；不满足请在内部修正后再输出","- 输出：姓名和理由每行一个，破折号分割姓名和理由，不要添加序号或额外说明"),r.join("\n")};function we(e){if(!e)return 0;const l=e.match(/[\u4e00-\u9fa5]/g);return l?l.length:0}const $e=()=>e(this,null,function*(){if(be.value){ge.value=!0,fe.value=[];try{if("母姓"===se.value&&!ae.value.trim())return V.warning('已选择"母姓"，请先填写母姓再生成'),void(ge.value=!1);if("父姓"===se.value&&!te.value.trim())return V.warning('已选择"父姓"，请先填写父姓再生成'),void(ge.value=!1);const l=new Set,t=[],a=e=>{const a=(e=>{const l=e.replace(/\r\n/g,"\n").split("\n"),t=[];for(const a of l){const e=a.trim();if(!e)continue;let l="",s="";if(e.includes("\t")){const[t,...a]=e.split("\t");l=(t||"").trim(),s=a.join("\t").trim()}else if(e.includes("—")||e.includes("-")||e.includes("：")||e.includes(":")){const t=e.split(/\s*[—\-：:]\s*/);l=(t[0]||"").trim(),s=(t.slice(1).join("：")||"").trim()}else l=e,s="";l&&t.push({name:l,reason:s})}return t})(e);for(const s of a){const e=s.name;if(e&&!l.has(e)&&(l.add(e),t.push(s),t.length>=3*re.value))break}},s=l=>e(this,null,function*(){var e,t,a,s;const n={model:"nova-fast",messages:[{role:"user",content:l}]};return(null==(s=null==(a=null==(t=null==(e=(yield w.post(Z.value,n,{params:{target:`${ee.value}/v1/chat/completions`},headers:{Authorization:`Bearer ${Y.value}`,"Content-Type":"application/json"}})).data)?void 0:e.choices)?void 0:t[0])?void 0:a.message)?void 0:s.content)||""});if("1-2"===oe.value){const e=Math.ceil(re.value/2),l=re.value-e,t=ke("2",e),n=ke("1",l),[o,u]=yield Promise.all([s(t),s(n)]);a(o),a(u)}else{const e=ke(oe.value);a(yield s(e))}const n=function(e){const l=("父姓"===se.value?te.value.trim():ae.value.trim())||te.value.trim()||ae.value.trim(),t=oe.value,a=(de.value||"").trim().slice(0,1),s=a&&("2"===t||"1-2"===t),n=e.filter(e=>{const n=(e.name||"").trim();if(!n)return!1;let o=n;l&&n.startsWith(l)&&(o=n.slice(l.length));const u=we(o);if(!("1-2"===t?1===u||2===u:u===Number(t)))return!1;if(!s)return!0;if(1===u)return o===a;if(2===u){const e=o[0],l=o[1];return"前"===ve.value?e===a:l===a}return!0});if("1-2"!==t)return n;const o=n.filter(e=>{const t=e.name.trim();return 1===we(l&&t.startsWith(l)?t.slice(l.length):t)}),u=n.filter(e=>{const t=e.name.trim();return 2===we(l&&t.startsWith(l)?t.slice(l.length):t)}),r=Math.ceil(re.value/2),i=[];for(let d=0;d<r&&d<o.length;d++)i.push(o[d]);for(let d=0;d<r&&d<u.length;d++)i.push(u[d]);const c=[...o.slice(r),...u.slice(r)];for(const d of c){if(i.length>=re.value)break;i.find(e=>e.name===d.name)||i.push(d)}return i}(t);fe.value=n.slice(0,re.value)}catch(l){alert("生成失败，请稍后重试")}finally{ge.value=!1}}}),je=()=>fe.value.length&&U(fe.value.map(e=>`${e.name}\t${e.reason}`).join("\n"));return(e,l)=>{const t=o("el-text");return u(),r("div",C,[i($,{title:le.title},null,8,["title"]),c("div",_,[c("div",M,[c("div",A,[c("div",{class:"flex items-center justify-between"},[l[12]||(l[12]=c("label",{class:"block text-sm text-gray-700"},"父姓 / 母姓",-1)),c("button",{class:"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded",onClick:ye},"示例")]),c("div",P,[d(c("input",{"onUpdate:modelValue":l[0]||(l[0]=e=>te.value=e),maxlength:"2",placeholder:"父姓，如 张",class:"w-full p-2 border rounded-lg"},null,512),[[v,te.value]]),d(c("input",{"onUpdate:modelValue":l[1]||(l[1]=e=>ae.value=e),maxlength:"2",placeholder:"母姓，如 李（可选）",class:"w-full p-2 border rounded-lg"},null,512),[[v,ae.value]])]),c("div",T,[c("div",null,[l[14]||(l[14]=c("label",{class:"block text-sm text-gray-700 mb-1"},"姓氏使用",-1)),d(c("select",{"onUpdate:modelValue":l[2]||(l[2]=e=>se.value=e),class:"w-full p-2 border rounded-lg"},l[13]||(l[13]=[c("option",{value:"父姓"},"父姓",-1),c("option",{value:"母姓"},"母姓",-1)]),512),[[p,se.value]])]),c("div",null,[l[16]||(l[16]=c("label",{class:"block text-sm text-gray-700 mb-1"},"性别",-1)),d(c("select",{"onUpdate:modelValue":l[3]||(l[3]=e=>ne.value=e),class:"w-full p-2 border rounded-lg"},l[15]||(l[15]=[c("option",{value:"男"},"男",-1),c("option",{value:"女"},"女",-1)]),512),[[p,ne.value]])])]),c("div",W,[c("div",null,[l[18]||(l[18]=c("label",{class:"block text-sm text-gray-700 mb-1"},"名的长度",-1)),d(c("select",{"onUpdate:modelValue":l[4]||(l[4]=e=>oe.value=e),class:"w-full p-2 border rounded-lg"},l[17]||(l[17]=[c("option",{value:"1"},"1",-1),c("option",{value:"1-2"},"1-2（默认）",-1),c("option",{value:"2"},"2",-1)]),512),[[p,oe.value]])]),c("div",null,[l[20]||(l[20]=c("label",{class:"block text-sm text-gray-700 mb-1"},"风格",-1)),d(c("select",{"onUpdate:modelValue":l[5]||(l[5]=e=>ue.value=e),class:"w-full p-2 border rounded-lg"},l[19]||(l[19]=[m('<option value="不限">不限</option><option value="古典">古典</option><option value="现代">现代</option><option value="文雅">文雅</option><option value="阳光">阳光</option><option value="中性">中性</option><option value="诗意">诗意</option>',7)]),512),[[p,ue.value]])]),c("div",null,[l[21]||(l[21]=c("label",{class:"block text-sm text-gray-700 mb-1"},"数量",-1)),d(c("input",{"onUpdate:modelValue":l[6]||(l[6]=e=>re.value=e),type:"number",min:"1",max:"50",class:"w-full p-2 border rounded-lg"},null,512),[[v,re.value,void 0,{number:!0}]])]),xe.value?(u(),r("div",q,[c("div",null,[l[22]||(l[22]=c("label",{class:"block text-sm text-gray-700 mb-1"},"固定字（名）",-1)),d(c("input",{"onUpdate:modelValue":l[7]||(l[7]=e=>de.value=e),maxlength:"1",placeholder:"仅 1 个汉字",class:"w-full p-2 border rounded-lg"},null,512),[[v,de.value]])]),c("div",null,[l[24]||(l[24]=c("label",{class:"block text-sm text-gray-700 mb-1"},"固定字位置",-1)),d(c("select",{"onUpdate:modelValue":l[8]||(l[8]=e=>ve.value=e),class:"w-full p-2 border rounded-lg"},l[23]||(l[23]=[c("option",{value:"前"},"前（第1位）",-1),c("option",{value:"后"},"后（第2位）",-1)]),512),[[p,ve.value]])]),c("div",z,[l[25]||(l[25]=c("label",{class:"block text-sm text-gray-700 mb-1"},"出生日期时间",-1)),d(c("input",{"onUpdate:modelValue":l[9]||(l[9]=e=>ce.value=e),type:"datetime-local",step:"1",class:"w-full p-2 border rounded-lg"},null,512),[[v,ce.value]])])])):(u(),r("div",D,[l[26]||(l[26]=c("label",{class:"block text-sm text-gray-700 mb-1"},"出生日期时间",-1)),d(c("input",{"onUpdate:modelValue":l[10]||(l[10]=e=>ce.value=e),type:"datetime-local",step:"1",class:"w-full p-2 border rounded-lg min-w-[320px]"},null,512),[[v,ce.value]])]))]),c("div",null,[c("div",F,[l[27]||(l[27]=c("label",{class:"block text-sm w-40 text-gray-700"},"寓意（可选）",-1)),c("div",G,[(u(),r(g,null,f(me,e=>c("button",{key:e,class:"px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded",onClick:l=>(e=>{ie.value=e})(e)},b(e),9,N)),64))])]),d(c("textarea",{"onUpdate:modelValue":l[11]||(l[11]=e=>ie.value=e),rows:"3",maxlength:"200",placeholder:"例如：聪慧睿智 / 健康平安 / 自信阳光\\n可分行填写多个侧重点",class:"w-full p-2 border rounded-lg min-h-[80px]"},null,512),[[v,ie.value]])]),c("button",{onClick:$e,disabled:!be.value,class:x(["py-3 px-6 rounded-lg w-full transition",be.value?"bg-blue-600 hover:bg-blue-700 text-white":"bg-gray-400 cursor-not-allowed"])},b(ge.value?"生成中...":"生成姓名"),11,Q)]),c("div",B,[c("div",E,[l[28]||(l[28]=c("div",{class:"text-sm text-gray-600"},"生成结果",-1)),c("button",{class:"px-3 py-1 text-sm bg-emerald-500 text-white rounded",disabled:!fe.value.length,onClick:je},"复制全部",8,H)]),c("div",I,[ge.value?(u(),r("div",J,"生成中...")):(u(),r("ul",K,[(u(!0),r(g,null,f(fe.value,(e,l)=>(u(),r("li",{key:l,class:"flex items-start justify-between bg-white p-3 rounded border"},[c("div",O,[c("div",R,b(e.name),1),e.reason?(u(),r("div",S,b(e.reason),1)):h("",!0)]),c("button",{class:"px-2 py-1 text-xs bg-blue-500 text-white rounded h-fit",onClick:l=>{return t=e.name,U(t);var t}},"复制",8,L)]))),128)),fe.value.length?h("",!0):(u(),r("div",X,"暂无结果"))]))])])])]),i(j,{title:"描述"},{default:y(()=>[i(t,null,{default:y(()=>[k(b(le.desc),1)]),_:1})]),_:1})])}}});export{Y as default};
