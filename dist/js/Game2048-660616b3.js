import{_ as e}from"./chunk-b26ce546.js";import{_ as t}from"./chunk-9c6aa90d.js";import{d as r,q as l,r as s,t as a,U as i,al as o,o as n,c as d,R as c,a as g,P as u,I as v,J as m,O as b,M as h,E as f,Q as p,a4 as x,D as S,aF as y}from"./chunk-bb5ca2a1.js";import{_ as w}from"../assets/index-94414794.js";import"./chunk-0a8d181f.js";import"./chunk-96adf8d3.js";import"./chunk-b045bb46.js";const z={class:"flex flex-col mt-3 ml-4 flex-1 mr-3"},k={class:"p-6 rounded-2xl bg-white shadow-sm border border-gray-200"},E={class:"max-w-2xl mx-auto"},L={class:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"},M={class:"text-center bg-blue-50 p-3 rounded-lg border border-blue-200"},_={class:"text-xl font-bold text-blue-600"},A={class:"text-center bg-green-50 p-3 rounded-lg border border-green-200"},D={class:"text-xl font-bold text-green-600"},O={class:"text-center bg-purple-50 p-3 rounded-lg border border-purple-200"},P={class:"text-xl font-bold text-purple-600"},j={class:"text-center bg-indigo-50 p-3 rounded-lg border border-indigo-200"},T={class:"text-xl font-bold text-indigo-600"},I={class:"flex justify-center mb-6"},J={class:"flex justify-center mb-6"},N={key:0,class:"text-center mb-6"},W={key:1,class:"text-center mb-6"},X={class:"bg-red-50 border-2 border-red-300 rounded-lg p-4 shadow-md"},Y={class:"text-red-600"},q={class:"text-red-600"},G={key:0,class:"text-yellow-600 font-medium mt-2"},H=w(r({__name:"Game2048",setup(r){const w=l({title:"2048"}),H=l({isPlaying:!1,score:0,highScore:0,gameOver:!1,won:!1,bestTile:0}),$=l({gridSize:(window.innerWidth,4),cellSize:window.innerWidth<768?60:80,cellGap:8}),C=s([]),R=()=>{const e=[];for(let t=0;t<$.gridSize;t++)for(let r=0;r<$.gridSize;r++)0===C.value[t][r]&&e.push({row:t,col:r});if(e.length>0){const t=e[Math.floor(Math.random()*e.length)];C.value[t.row][t.col]=Math.random()<.9?2:4}},U=()=>{for(let e=0;e<$.gridSize;e++)for(let t=0;t<$.gridSize;t++)if(0===C.value[e][t])return!1;for(let e=0;e<$.gridSize;e++)for(let t=0;t<$.gridSize;t++){const r=C.value[e][t];if(t<$.gridSize-1&&C.value[e][t+1]===r)return!1;if(e<$.gridSize-1&&C.value[e+1][t]===r)return!1}return!0},F=()=>{for(let e=0;e<$.gridSize;e++)for(let t=0;t<$.gridSize;t++)if(C.value[e][t]>=2048)return!0;return!1},Q=()=>{let e=0;for(let t=0;t<$.gridSize;t++)for(let r=0;r<$.gridSize;r++)C.value[t][r]>e&&(e=C.value[t][r]);H.bestTile=Math.max(H.bestTile,e),H.score>H.highScore&&(H.highScore=H.score,localStorage.setItem("game2048HighScore",H.highScore.toString()))},B=()=>{let e=!1;for(let t=0;t<$.gridSize;t++){const r=C.value[t].filter(e=>0!==e);for(let e=0;e<r.length-1;e++)r[e]===r[e+1]&&(r[e]*=2,H.score+=r[e],r.splice(e+1,1));const l=r.concat(Array($.gridSize-r.length).fill(0));JSON.stringify(C.value[t])!==JSON.stringify(l)&&(e=!0),C.value[t]=l}return e},K=()=>{let e=!1;for(let t=0;t<$.gridSize;t++){const r=C.value[t].filter(e=>0!==e);for(let e=r.length-1;e>0;e--)r[e]===r[e-1]&&(r[e]*=2,H.score+=r[e],r.splice(e-1,1),e--);const l=Array($.gridSize-r.length).fill(0).concat(r);JSON.stringify(C.value[t])!==JSON.stringify(l)&&(e=!0),C.value[t]=l}return e},V=()=>{let e=!1;for(let t=0;t<$.gridSize;t++){const r=[];for(let e=0;e<$.gridSize;e++)0!==C.value[e][t]&&r.push(C.value[e][t]);for(let e=0;e<r.length-1;e++)r[e]===r[e+1]&&(r[e]*=2,H.score+=r[e],r.splice(e+1,1));const l=r.concat(Array($.gridSize-r.length).fill(0));for(let s=0;s<$.gridSize;s++)C.value[s][t]!==l[s]&&(e=!0),C.value[s][t]=l[s]}return e},Z=()=>{let e=!1;for(let t=0;t<$.gridSize;t++){const r=[];for(let e=0;e<$.gridSize;e++)0!==C.value[e][t]&&r.push(C.value[e][t]);for(let e=r.length-1;e>0;e--)r[e]===r[e-1]&&(r[e]*=2,H.score+=r[e],r.splice(e-1,1),e--);const l=Array($.gridSize-r.length).fill(0).concat(r);for(let s=0;s<$.gridSize;s++)C.value[s][t]!==l[s]&&(e=!0),C.value[s][t]=l[s]}return e},ee=e=>{if(!H.isPlaying)return;let t=!1;switch(e.key){case"ArrowLeft":case"a":case"A":e.preventDefault(),t=B();break;case"ArrowRight":case"d":case"D":e.preventDefault(),t=K();break;case"ArrowUp":case"w":case"W":e.preventDefault(),t=V();break;case"ArrowDown":case"s":case"S":e.preventDefault(),t=Z()}t&&(R(),Q(),F()&&!H.won&&(H.won=!0),U()&&re())},te=()=>{H.isPlaying=!0,H.gameOver=!1,H.won=!1,H.score=0,C.value=Array($.gridSize).fill(null).map(()=>Array($.gridSize).fill(0)),R(),R()},re=()=>{H.isPlaying=!1,H.gameOver=!0,localStorage.setItem("game2048HighScore",H.highScore.toString())},le=()=>{te()},se=e=>e<=4?"text-tile-text-dark":"text-tile-text-light";let ae=0,ie=0,oe=0,ne=0;const de=e=>{if(!H.isPlaying)return;const t=e.touches[0];ae=t.clientX,ie=t.clientY,e.preventDefault()},ce=e=>{H.isPlaying&&e.preventDefault()},ge=e=>{if(!H.isPlaying)return;const t=e.changedTouches[0];oe=t.clientX,ne=t.clientY,e.preventDefault(),ue()},ue=()=>{const e=oe-ae,t=ne-ie;let r=!1;Math.abs(e)>Math.abs(t)?Math.abs(e)>30&&(r=e>0?K():B()):Math.abs(t)>30&&(r=t>0?Z():V()),r&&(R(),Q(),F()&&!H.won&&(H.won=!0),U()&&re())};let ve=0,me=0,be=0,he=0,fe=!1;const pe=e=>{H.isPlaying&&(fe=!0,ve=e.clientX,me=e.clientY)},xe=e=>{H.isPlaying&&fe&&e.preventDefault()},Se=e=>{H.isPlaying&&fe&&(fe=!1,be=e.clientX,he=e.clientY,ye())},ye=()=>{const e=be-ve,t=he-me;let r=!1;Math.abs(e)>Math.abs(t)?Math.abs(e)>30&&(r=e>0?K():B()):Math.abs(t)>30&&(r=t>0?Z():V()),r&&(R(),Q(),F()&&!H.won&&(H.won=!0),U()&&re())};return a(()=>{const e=localStorage.getItem("game2048HighScore");e&&(H.highScore=parseInt(e)),window.addEventListener("keydown",ee);const t=document.querySelector(".game-board");t&&(t.addEventListener("touchstart",de,{passive:!1}),t.addEventListener("touchmove",ce,{passive:!1}),t.addEventListener("touchend",ge,{passive:!1}),t.addEventListener("mousedown",pe),t.addEventListener("mousemove",xe),t.addEventListener("mouseup",Se)),te()}),i(()=>{window.removeEventListener("keydown",ee);const e=document.querySelector(".game-board");e&&(e.removeEventListener("touchstart",de),e.removeEventListener("touchmove",ce),e.removeEventListener("touchend",ge),e.removeEventListener("mousedown",pe),e.removeEventListener("mousemove",xe),e.removeEventListener("mouseup",Se))}),(r,l)=>{const s=o("el-button"),a=o("el-text");return n(),d("div",z,[c(e,{title:w.title},null,8,["title"]),g("div",k,[g("div",E,[g("div",L,[g("div",M,[l[0]||(l[0]=g("h3",{class:"text-sm font-medium text-blue-900"},"得分",-1)),g("p",_,u(H.score),1)]),g("div",A,[l[1]||(l[1]=g("h3",{class:"text-sm font-medium text-green-900"},"最高分",-1)),g("p",D,u(H.highScore),1)]),g("div",O,[l[2]||(l[2]=g("h3",{class:"text-sm font-medium text-purple-900"},"最佳方块",-1)),g("p",P,u(H.bestTile),1)]),g("div",j,[l[3]||(l[3]=g("h3",{class:"text-sm font-medium text-indigo-900"},"游戏板",-1)),g("p",T,u($.gridSize)+"×"+u($.gridSize),1)])]),g("div",I,[H.gameOver?(n(),v(s,{key:0,onClick:le,type:"success",class:"bg-green-500 hover:bg-green-600 border-green-600"},{default:m(()=>l[4]||(l[4]=[b(" 重新开始 ",-1)])),_:1,__:[4]})):h("",!0)]),g("div",J,[g("div",{class:"game-board bg-gray-300 p-4 rounded-lg shadow-lg",style:f({display:"grid",gridTemplateColumns:`repeat(${$.gridSize}, ${$.cellSize}px)`,gap:$.cellGap+"px"})},[(n(!0),d(p,null,x(C.value,(e,t)=>(n(),d(p,{key:`row-${t}`},[(n(!0),d(p,null,x(e,e=>{return n(),d("div",{key:Math.random(),class:S(["bg-gray-200 rounded-lg flex items-center justify-center font-bold transition-all duration-200",[(t=e,{0:"bg-gray-200",2:"bg-tile-2",4:"bg-tile-4",8:"bg-tile-8",16:"bg-tile-16",32:"bg-tile-32",64:"bg-tile-64",128:"bg-tile-128",256:"bg-tile-256",512:"bg-tile-512",1024:"bg-tile-1024",2048:"bg-tile-2048"}[t]||"bg-tile-dark"),se(e)]]),style:f({width:$.cellSize+"px",height:$.cellSize+"px",fontSize:e>=1e3?"1.5rem":e>=100?"1.75rem":"2rem"})},u(e||""),7);var t}),128))],64))),128))],4)]),H.won&&!H.gameOver?(n(),d("div",N,l[5]||(l[5]=[g("div",{class:"bg-yellow-50 border-2 border-yellow-300 rounded-lg p-4 shadow-md"},[g("h3",{class:"text-lg font-medium text-yellow-900 mb-2"},"恭喜获胜！"),g("p",{class:"text-yellow-600"},"你已经达到了2048！可以继续游戏挑战更高分数")],-1)]))):h("",!0),H.gameOver?(n(),d("div",W,[g("div",X,[l[6]||(l[6]=g("h3",{class:"text-lg font-medium text-red-900 mb-2"},"游戏结束！",-1)),g("p",Y,"最终得分: "+u(H.score),1),g("p",q,"最佳方块: "+u(H.bestTile),1),H.score>H.highScore?(n(),d("p",G," 新纪录！恭喜你创造了新的最高分！ ")):h("",!0)])])):h("",!0),l[7]||(l[7]=y('<div class="bg-gray-50 rounded-lg p-4 border-2 border-gray-200 shadow-sm" data-v-703401d1><h3 class="text-lg font-medium text-gray-900 mb-3" data-v-703401d1>游戏说明</h3><div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600" data-v-703401d1><div class="bg-white p-3 rounded border border-gray-200" data-v-703401d1><p data-v-703401d1><strong class="text-blue-600" data-v-703401d1>游戏目标：</strong>通过滑动合并相同数字，达到2048</p><p data-v-703401d1><strong class="text-blue-600" data-v-703401d1>操作方式：</strong>键盘方向键/WASD，鼠标拖拽，触摸滑动</p></div><div class="bg-white p-3 rounded border border-gray-200" data-v-703401d1><p data-v-703401d1><strong class="text-green-600" data-v-703401d1>合并规则：</strong>相同数字的方块相撞时会合并</p><p data-v-703401d1><strong class="text-red-600" data-v-703401d1>挑战：</strong>每次移动后会随机出现新的数字</p></div></div></div>',1))])]),c(t,{title:"描述"},{default:m(()=>[c(a,null,{default:m(()=>l[8]||(l[8]=[b(" 经典2048益智游戏，考验你的策略思维和数字逻辑：",-1),g("br",null,null,-1),g("br",null,null,-1),b(" 游戏特色：经典2048玩法，数字合并机制，实时得分统计",-1),g("br",null,null,-1),b(" 操作方式：使用方向键控制方块移动，相同数字自动合并",-1),g("br",null,null,-1),b(" 游戏目标：通过策略性移动，将数字合并到2048或更高",-1),g("br",null,null,-1),b(" 训练效果：锻炼逻辑思维、策略规划和空间布局能力",-1),g("br",null,null,-1),g("br",null,null,-1),b(" 适合所有年龄段，是经典的益智游戏。 ",-1)])),_:1,__:[8]})]),_:1})])}}}),[["__scopeId","data-v-703401d1"]]);export{H as default};
