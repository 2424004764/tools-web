var e=(e,l,a)=>new Promise((t,s)=>{var n=e=>{try{i(a.next(e))}catch(l){s(l)}},o=e=>{try{i(a.throw(e))}catch(l){s(l)}},i=e=>e.done?t(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,l)).next())});import{d as l,q as a,r as t,t as s,U as n,al as o,o as i,c as r,a as u,R as c,K as d,aG as v,Q as g,a4 as m,P as p,D as b,O as f,M as x,J as h,W as y}from"./chunk-bb5ca2a1.js";import{a as w}from"./chunk-c8f53b98.js";import{_ as k}from"./chunk-0024800c.js";import{_ as j}from"./chunk-9c6aa90d.js";import{_ as C}from"../assets/index-f8980254.js";import"./chunk-7296d483.js";import"./chunk-dd4ac5f9.js";const $={class:"flex flex-col mt-3 flex-1"},I={class:"p-6 rounded-2xl bg-white"},A={class:"mb-8 p-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-200"},_={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4"},D={class:"space-y-2"},M=["value"],S={class:"space-y-2"},U=["value"],B={class:"space-y-2"},O=["disabled"],R=["value"],T={class:"space-y-2"},L={class:"flex items-center"},z={class:"ml-2 text-sm text-gray-600"},E={class:"space-y-2"},P=["disabled"],N={key:0,class:"flex items-center justify-center"},Y={key:1},H={class:"mt-4 flex flex-col sm:flex-row sm:items-center sm:justify-between text-sm text-gray-600 space-y-2 sm:space-y-0"},V={class:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-4"},K={key:0},X={class:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-2"},q={class:"space-y-4"},G={class:"flex items-center justify-between"},J={class:"text-lg font-semibold text-gray-800"},Q={class:"text-sm text-gray-500"},W={key:0,class:"text-center py-12"},F={class:"inline-flex items-center space-x-2"},Z={class:"text-lg text-gray-600"},ee={key:0,class:"mt-2 text-sm text-orange-600"},le={key:1,class:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg"},ae={key:2,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},te={class:"absolute top-3 right-3"},se={class:"px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800 rounded-full"},ne={class:"mb-4 pt-8"},oe={class:"text-lg text-gray-800 leading-relaxed font-medium"},ie={class:"flex items-center justify-between text-sm text-gray-500"},re=["onClick","disabled"],ue={key:0,class:"flex items-center"},ce={key:1},de=["onClick"],ve={key:3,class:"text-center py-12"},ge={class:"bg-white rounded-xl max-w-4xl max-h-[90vh] overflow-hidden"},me={class:"flex items-center justify-between p-6 border-b"},pe={class:"text-xl font-semibold text-gray-800"},be={class:"p-6 max-h-[70vh] overflow-y-auto"},fe={key:0,class:"text-center py-12"},xe={class:"mt-4 text-sm text-gray-500"},he={class:"mt-2 text-lg font-medium text-gray-800"},ye={key:1,class:"text-center"},we={class:"mb-4"},ke={class:"text-lg font-medium text-gray-800"},je={class:"flex justify-center mb-6"},Ce=["src"],$e=C(l({__name:"AiDailyMotivation",setup(l){const C=a({title:"AI每日励志鸡汤文",desc:"AI智能生成每日励志鸡汤文，支持多种风格选择，定时刷新，为你的每一天注入正能量。"}),$e=t("NpgaKlHjioTlyo2B"),Ie=t("https://tool.fologde.com/proxy"),Ae=t("https://text.pollinations.ai"),_e=t("https://image.pollinations.ai"),De=t(!1),Me=t(!1),Se=t(!0),Ue=t(1),Be=t("励志"),Oe=t(5),Re=t(null),Te=t(null),Le=t(0),ze=t([]),Ee=[{value:"励志",label:"励志",emoji:"⚡"},{value:"情感",label:"情感",emoji:"❤️"},{value:"成长",label:"成长",emoji:"⭐"},{value:"职场",label:"职场",emoji:"💼"},{value:"学习",label:"学习",emoji:"🎓"},{value:"生活",label:"生活",emoji:"🏠"},{value:"友情",label:"友情",emoji:"👫"},{value:"爱情",label:"爱情",emoji:"💝"}],Pe=[{value:1,label:"1条"},{value:2,label:"2条"},{value:4,label:"4条"},{value:5,label:"5条"},{value:6,label:"6条"},{value:8,label:"8条"},{value:10,label:"10条"}],Ne=[{value:1,label:"1分钟"},{value:5,label:"5分钟"},{value:10,label:"10分钟"}],Ye=(l=!1)=>e(this,null,function*(){if(De.value)return;De.value=!0;let e=0;for(;e<3;)try{const e=`请生成${Oe.value}条${Be.value}风格的励志鸡汤文，要求：\n1. 每条鸡汤文要简洁有力，字数控制在30-50字之间\n2. 内容要积极向上，富有哲理和启发性\n3. 风格要符合"${Be.value}"主题\n4. 每条鸡汤文单独一行，不要编号，不要标点符号结尾\n5. 只输出鸡汤文内容，不要其他解释文字`,l=yield w.get(`${Ie.value}?path=${encodeURIComponent(e)}&target=${Ae.value}&params=_t=${Date.now()}`,{headers:{Authorization:"Bearer "+$e.value}});const a=("string"==typeof l.data?l.data:String(l.data)).split("\n").map(e=>e.trim()).filter(e=>e.length>0&&e.length<=100).slice(0,Oe.value);if(0===a.length||a.some(e=>e.length<10))throw new Error("生成的内容无效或过短");const t=a.map((e,l)=>({id:Date.now()+l,content:e,style:Be.value,timestamp:new Date}));ze.value=t,Re.value=new Date,Se.value&&Ve();break}catch(a){if(e++,e<3){yield new Promise(e=>setTimeout(e,2e3));continue}l||alert("AI生成失败，已重试3次。请检查网络连接或稍后重试。当前显示的是上次成功生成的内容。")}De.value=!1}),He=()=>e(this,null,function*(){if(!Me.value){Me.value=!0;try{yield Ye(!1)}finally{Me.value=!1}}}),Ve=()=>{Te.value&&(clearInterval(Te.value),Te.value=null),Se.value&&(Te.value=setInterval(()=>{Ye(!0)},60*Ue.value*1e3))},Ke=()=>{Se.value=!Se.value,Se.value?Ve():Te.value&&(clearInterval(Te.value),Te.value=null)},Xe=l=>e(this,null,function*(){try{yield navigator.clipboard.writeText(l);const e=document.createElement("div");e.textContent="已复制",e.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded shadow-lg z-50",document.body.appendChild(e),setTimeout(()=>{document.body.removeChild(e)},2e3)}catch(e){}}),qe=e=>e.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),Ge=t({}),Je=t(!1),Qe=t(""),We=t(""),Fe=t(null),Ze=t(null),el=(l,a)=>e(this,null,function*(){if(!Ge.value[a]){Ge.value[a]=!0,We.value=l,Fe.value=a,Je.value=!0,Ze.value=new AbortController;try{const e=`励志鸡汤文封面背景：${l}，简约现代设计风格，渐变背景，适合作为文字封面，高清图片`,a={model:"sdxl",width:"1024",height:"1024",nologo:"true",seed:Math.floor(1e8*Math.random()).toString()},t=Object.fromEntries(Object.entries(a).filter(([e,l])=>void 0!==l).map(([e,l])=>[e,String(l)]));t._t=String(Date.now());const s=new URLSearchParams(t).toString(),n=yield w.get(`${Ie.value}?path=prompt/${encodeURIComponent(e)}&target=${_e.value}&params=${s}`,{headers:{Authorization:"Bearer "+$e.value},responseType:"blob",signal:Ze.value.signal}),o=new Blob([n.data],{type:"image/png"}),i=URL.createObjectURL(o),r=yield ll(i,l);Qe.value=r}catch(e){if(w.isCancel(e))return;alert("封面生成失败，请稍后重试"),null!==Fe.value&&(Ge.value[Fe.value]=!1)}finally{Ze.value=null}}}),ll=(e,l)=>new Promise(a=>{const t=document.createElement("canvas"),s=t.getContext("2d"),n=new Image;n.onload=()=>{t.width=n.width,t.height=n.height,s.drawImage(n,0,0),s.fillStyle="rgba(0, 0, 0, 0.3)",s.fillRect(0,0,t.width,t.height),s.fillStyle="#ffffff",s.textAlign="center",s.textBaseline="middle";const e=.8*t.width;let o=Math.min(80,t.width/15);const i=l.split(""),r=[];let u="";for(let l=0;l<i.length;l++){const a=u+i[l];s.font=`${o}px "Microsoft YaHei", sans-serif`;s.measureText(a).width>e&&""!==u?(r.push(u),u=i[l]):u=a}u&&r.push(u),r.length>4&&(o=Math.min(60,t.width/20),s.font=`${o}px "Microsoft YaHei", sans-serif`);const c=1.5*o,d=c*r.length,v=(t.height-d)/2;r.forEach((e,l)=>{const a=v+l*c;s.shadowColor="rgba(0, 0, 0, 0.8)",s.shadowBlur=10,s.shadowOffsetX=2,s.shadowOffsetY=2,s.fillText(e,t.width/2,a),s.shadowColor="transparent",s.shadowBlur=0,s.shadowOffsetX=0,s.shadowOffsetY=0});const g=t.toDataURL("image/png");a(g)},n.src=e}),al=()=>{Ze.value&&(Ze.value.abort(),Ze.value=null),null!==Fe.value&&(Ge.value[Fe.value]=!1),Je.value=!1,Qe.value="",We.value="",Fe.value=null},tl=()=>{if(!Qe.value)return;const e=document.createElement("a");e.download=`鸡汤文封面_${Date.now()}.png`,e.href=Qe.value,e.click()};s(()=>{Ye()}),n(()=>{Te.value&&(clearInterval(Te.value),Te.value=null)});const sl=()=>{Se.value&&Ve()},nl=()=>{Ye()},ol=()=>{Ye()};return(e,l)=>{const a=o("el-text");return i(),r(g,null,[u("div",$,[c(k,{title:C.title},null,8,["title"]),u("div",I,[u("div",A,[u("div",_,[u("div",D,[l[3]||(l[3]=u("label",{class:"text-sm font-medium text-gray-700"},"鸡汤文风格",-1)),d(u("select",{"onUpdate:modelValue":l[0]||(l[0]=e=>Be.value=e),onChange:nl,class:"w-full p-3 border border-gray-300 rounded-lg bg-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[(i(),r(g,null,m(Ee,e=>u("option",{key:e.value,value:e.value},p(e.emoji)+" "+p(e.label),9,M)),64))],544),[[v,Be.value]])]),u("div",S,[l[4]||(l[4]=u("label",{class:"text-sm font-medium text-gray-700"},"生成条数",-1)),d(u("select",{"onUpdate:modelValue":l[1]||(l[1]=e=>Oe.value=e),onChange:ol,class:"w-full p-3 border border-gray-300 rounded-lg bg-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[(i(),r(g,null,m(Pe,e=>u("option",{key:e.value,value:e.value},p(e.label),9,U)),64))],544),[[v,Oe.value]])]),u("div",B,[l[5]||(l[5]=u("label",{class:"text-sm font-medium text-gray-700"},"自动刷新间隔",-1)),d(u("select",{"onUpdate:modelValue":l[2]||(l[2]=e=>Ue.value=e),onChange:sl,disabled:!Se.value,class:"w-full p-3 border border-gray-300 rounded-lg bg-white focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100"},[(i(),r(g,null,m(Ne,e=>u("option",{key:e.value,value:e.value},p(e.label),9,R)),64))],40,O),[[v,Ue.value]])]),u("div",T,[l[6]||(l[6]=u("label",{class:"text-sm font-medium text-gray-700"},"自动刷新",-1)),u("div",L,[u("button",{onClick:Ke,class:b(["relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",Se.value?"bg-blue-600":"bg-gray-200"])},[u("span",{class:b(["inline-block h-4 w-4 transform rounded-full bg-white transition-transform",Se.value?"translate-x-6":"translate-x-1"])},null,2)],2),u("span",z,p(Se.value?"开启":"关闭"),1)])]),u("div",E,[l[8]||(l[8]=u("label",{class:"text-sm font-medium text-gray-700"},"操作",-1)),u("button",{onClick:He,disabled:Me.value||De.value,class:"w-full p-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors"},[Me.value?(i(),r("span",N,l[7]||(l[7]=[u("div",{class:"refresh-spinner mr-2"},null,-1),f(" 刷新中... ",-1)]))):(i(),r("span",Y,"立即刷新"))],8,P)])]),u("div",H,[u("div",V,[u("span",null,"状态: "+p(De.value?"生成中...":Me.value?"刷新中...":"就绪"),1),Re.value?(i(),r("span",K," 上次刷新: "+p((t=Re.value,t.toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"})))+" "+p(qe(Re.value)),1)):x("",!0)]),u("div",X,[u("span",null,"当前风格: "+p(Be.value),1),u("span",null,"刷新间隔: "+p(Ue.value)+"分钟",1)])])]),u("div",q,[u("div",G,[u("h3",J,p(Be.value)+"鸡汤文 ("+p(ze.value.length)+"条) ",1),u("div",Q,p(Se.value?`每${Ue.value}分钟自动刷新`:"手动刷新模式"),1)]),De.value&&0===ze.value.length?(i(),r("div",W,[u("div",F,[l[9]||(l[9]=u("div",{class:"loading-spinner-large"},null,-1)),u("span",Z,p(Le.value>0?`AI生成失败，正在进行第${Le.value+1}次重试...`:"AI正在生成鸡汤文中..."),1)]),Le.value>0?(i(),r("div",ee," 重试次数: "+p(Le.value)+"/3 ",1)):x("",!0)])):x("",!0),Me.value&&ze.value.length>0?(i(),r("div",le,l[10]||(l[10]=[u("div",{class:"flex items-center justify-center space-x-2 text-blue-700"},[u("div",{class:"loading-spinner-small"}),u("span",null,"正在刷新鸡汤文，请稍候...")],-1)]))):x("",!0),!De.value||ze.value.length>0?(i(),r("div",ae,[(i(!0),r(g,null,m(ze.value,e=>(i(),r("div",{key:e.id,class:"group relative p-6 bg-gradient-to-br from-yellow-50 to-orange-50 border border-yellow-200 rounded-xl hover:shadow-lg transition-all duration-300 hover:scale-105"},[u("div",te,[u("span",se,p(e.style),1)]),u("div",ne,[u("p",oe,' "'+p(e.content)+'" ',1)]),u("div",ie,[u("button",{onClick:l=>el(e.content,e.id),disabled:Ge.value[e.id],class:"px-3 py-1 text-green-600 hover:bg-green-50 rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[Ge.value[e.id]?(i(),r("span",ue,l[11]||(l[11]=[u("div",{class:"refresh-spinner mr-1"},null,-1),f(" 生成中... ",-1)]))):(i(),r("span",ce,"生成封面"))],8,re),u("button",{onClick:l=>Xe(e.content),class:"opacity-0 group-hover:opacity-100 transition-opacity px-3 py-1 text-blue-600 hover:bg-blue-50 rounded-md"}," 复制 ",8,de)]),l[12]||(l[12]=u("div",{class:"absolute -top-2 -left-2 w-4 h-4 bg-yellow-400 rounded-full opacity-20"},null,-1)),l[13]||(l[13]=u("div",{class:"absolute -bottom-2 -right-2 w-6 h-6 bg-orange-300 rounded-full opacity-20"},null,-1))]))),128))])):x("",!0),De.value||0!==ze.value.length?x("",!0):(i(),r("div",ve,l[14]||(l[14]=[u("div",{class:"text-gray-400"},[u("div",{class:"text-6xl mb-4"},"☕"),u("div",{class:"text-lg"},"暂无鸡汤文"),u("div",{class:"text-sm"},"点击刷新按钮生成新的鸡汤文")],-1)])))]),l[15]||(l[15]=u("div",{class:"mt-8 p-4 bg-gray-50 rounded-lg"},[u("h4",{class:"font-medium text-gray-800 mb-2"},"💡 使用说明"),u("ul",{class:"text-sm text-gray-600 space-y-1"},[u("li",null,"• 选择你喜欢的鸡汤文风格，AI会自动生成5条相关内容"),u("li",null,"• 开启自动刷新后，系统会定时生成新的鸡汤文"),u("li",null,"• 每条鸡汤文都可以单独复制，方便分享给朋友"),u("li",null," • 支持多种风格：励志、情感、成长、职场、学习、生活、友情、爱情 ")])],-1))]),c(j,{title:"描述"},{default:h(()=>[c(a,null,{default:h(()=>[f(p(C.desc),1)]),_:1})]),_:1})]),Je.value?(i(),r("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:y(al,["self"])},[u("div",ge,[u("div",me,[u("h3",pe,p(Qe.value?"生成的封面":"正在生成封面..."),1),u("button",{onClick:al,class:"text-gray-400 hover:text-gray-600 transition-colors"},l[16]||(l[16]=[u("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),u("div",be,[Qe.value?(i(),r("div",ye,[u("div",we,[l[19]||(l[19]=u("p",{class:"text-gray-600 mb-2"},"鸡汤文内容：",-1)),u("p",ke,'"'+p(We.value)+'"',1)]),u("div",je,[u("img",{src:Qe.value,alt:"生成的封面",class:"max-w-full max-h-[60vh] object-contain rounded-lg shadow-lg"},null,8,Ce)]),u("div",{class:"flex justify-center space-x-4"},[u("button",{onClick:tl,class:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"}," 下载封面 "),u("button",{onClick:al,class:"px-6 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors"}," 关闭 ")])])):(i(),r("div",fe,[l[18]||(l[18]=u("div",{class:"inline-flex items-center space-x-2"},[u("div",{class:"loading-spinner-large"}),u("span",{class:"text-lg text-gray-600"},"AI正在生成封面，请稍候...")],-1)),u("div",xe,[l[17]||(l[17]=u("p",null,"鸡汤文内容：",-1)),u("p",he,'"'+p(We.value)+'"',1)])]))])])])):x("",!0)],64);var t}}}),[["__scopeId","data-v-73d16039"]]);export{$e as default};
