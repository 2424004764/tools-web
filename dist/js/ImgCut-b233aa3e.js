var l=(l,e,a)=>new Promise((t,s)=>{var u=l=>{try{i(a.next(l))}catch(e){s(e)}},r=l=>{try{i(a.throw(l))}catch(e){s(e)}},i=l=>l.done?t(l.value):Promise.resolve(l.value).then(u,r);i((a=a.apply(l,e)).next())});import{_ as e}from"./chunk-713f54a1.js";import{_ as a}from"./chunk-9c6aa90d.js";import{h as t}from"./chunk-7296d483.js";import{d as s,q as u,r,b as i,m as n,t as o,al as d,o as c,c as m,R as f,a as v,J as p,O as h,E as _,Q as x,a4 as g,M as w}from"./chunk-bb5ca2a1.js";import{_ as k}from"../assets/index-37cc6dcb.js";import"./chunk-c8f53b98.js";import"./chunk-dd4ac5f9.js";const y={class:"flex flex-col mt-3 flex-1"},b={class:"p-4 rounded-2xl bg-white"},j={class:"flex mt-3"},R={class:"flex"},F={key:0,class:"mt-3 min-h-md bg-gray-100 p-3 mb-3 flex flex-col md:flex-row gap-4 items-start"},I={class:"w-full md:w-1/2"},L=["src"],U={class:"w-full md:w-1/2"},C={class:"w-full"},E=["src"],M={key:1},V=k(s({__name:"ImgCut",setup(s){const k=u({title:"图片切割"}),V=r(),q=r(3),D=r({}),P=r([]),$=r(),z=e=>l(this,null,function*(){let a=new FileReader;a.readAsDataURL(e.file),a.addEventListener("load",()=>l(this,null,function*(){const l=new Image;l.onload=()=>{D.value=l,B()},l.src=a.result}),!1)}),A=l=>{$.value.clearFiles();const e=l[0];e.uid=t(),$.value.handleStart(e),$.value.submit()},B=()=>{const l=document.createElement("canvas"),e=l.getContext("2d"),a=D.value,t=Math.floor(a.naturalWidth/q.value),s=Math.floor(a.naturalHeight/q.value),u=[];l.width=t,l.height=s;for(let r=0;r<q.value;r++)for(let i=0;i<q.value;i++)null==e||e.drawImage(a,i*t,r*s,t,s,0,0,t,s),u.push(l.toDataURL());P.value=u},H=i(()=>`grid: repeat(${q.value}, 1fr) / repeat(${q.value}, 1fr);`);return n(H,()=>{V.value&&B()}),o(()=>{}),(l,t)=>{const s=d("el-button"),u=d("el-upload"),r=d("el-text"),i=d("el-input-number"),n=d("el-empty");return c(),m("div",y,[f(e,{title:k.title},null,8,["title"]),v("div",b,[f(u,{"file-list":V.value,"onUpdate:fileList":t[0]||(t[0]=l=>V.value=l),class:"dataFileRef flex flex-col md:flex-row gap-2 md:gap-3 w-full",ref_key:"dataFileRef",ref:$,accept:"image/*","http-request":z,"on-exceed":A,limit:1},{default:p(()=>[f(s,{type:"primary"},{default:p(()=>t[2]||(t[2]=[h("请上传需要切割的图片",-1)])),_:1,__:[2]})]),_:1},8,["file-list"]),v("div",j,[v("div",R,[f(r,null,{default:p(()=>t[3]||(t[3]=[h("行数和列数",-1)])),_:1,__:[3]}),f(i,{modelValue:q.value,"onUpdate:modelValue":t[1]||(t[1]=l=>q.value=l),min:1,max:10,class:"ml-3"},null,8,["modelValue"])])]),D.value.src?(c(),m("div",F,[v("div",I,[f(r,null,{default:p(()=>t[4]||(t[4]=[h("预览: ",-1)])),_:1,__:[4]}),v("div",{style:_(H.value),class:"grid gap-2 w-full"},[(c(!0),m(x,null,g(P.value,(l,e)=>(c(),m("img",{key:e,src:l,alt:"结果",class:"w-full h-auto block"},null,8,L))),128))],4)]),v("div",U,[f(r,null,{default:p(()=>t[5]||(t[5]=[h("原图: ",-1)])),_:1,__:[5]}),v("div",C,[D.value.src?(c(),m("img",{key:0,src:D.value.src,alt:"原图",class:"max-w-full h-auto block"},null,8,E)):w("",!0)])])])):(c(),m("div",M,[f(n,{"image-size":200,description:"无预览"})]))]),f(a,{title:"描述"},{default:p(()=>[f(r,null,{default:p(()=>t[6]||(t[6]=[h(" 将图片分割成四宫格、九宫格、十六宫格，支持自定义行与列；",-1),v("br",null,null,-1),h(" 比如：九宫格切图广泛应用于微信朋友圈，微博等社交媒体。 ",-1)])),_:1,__:[6]})]),_:1})])}}}),[["__scopeId","data-v-050c051f"]]);export{V as default};
