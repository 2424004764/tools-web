var e=Object.defineProperty,l=Object.defineProperties,t=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,d=(l,t,a)=>t in l?e(l,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[t]=a,o=(e,l)=>{for(var t in l||(l={}))r.call(l,t)&&d(e,t,l[t]);if(a)for(var t of a(l))s.call(l,t)&&d(e,t,l[t]);return e},i=(e,a)=>l(e,t(a));import{_ as n}from"./chunk-c06ab625.js";import{_ as b}from"./chunk-9c6aa90d.js";import{d as c,q as u,r as g,t as v,U as p,al as f,o as x,c as h,R as m,a as y,P as w,J as k,O as S,I as P,D as _,M as L,E as O,Q as I,a4 as j,aF as z}from"./chunk-bb5ca2a1.js";import{_ as W}from"../assets/index-154b0451.js";import"./chunk-e922f209.js";import"./chunk-cdccf614.js";import"./chunk-27701a41.js";const M={class:"flex flex-col mt-3 ml-4 flex-1 mr-3"},D={class:"p-6 rounded-2xl bg-white shadow-sm border border-gray-200"},A={class:"max-w-4xl mx-auto"},C={class:"grid grid-cols-2 md:grid-cols-6 gap-4 mb-6"},H={class:"text-center bg-blue-50 p-3 rounded-lg border border-blue-200"},$={class:"text-xl font-bold text-blue-600"},E={class:"text-center bg-green-50 p-3 rounded-lg border border-green-200"},T={class:"text-xl font-bold text-green-600"},J={class:"text-center bg-purple-50 p-3 rounded-lg border border-purple-200"},F={class:"text-xl font-bold text-purple-600"},R={class:"text-center bg-orange-50 p-3 rounded-lg border border-orange-200"},U={class:"text-xl font-bold text-orange-600"},Z={class:"text-center bg-indigo-50 p-3 rounded-lg border border-indigo-200"},q={class:"text-xl font-bold text-indigo-600"},G={class:"text-center bg-red-50 p-3 rounded-lg border border-red-200"},Q={class:"text-xl font-bold text-red-600"},B={class:"flex flex-col sm:flex-row justify-center items-center gap-4 mb-6"},K={class:"flex items-center gap-3 bg-gray-50 p-3 rounded-lg border border-gray-200"},N={class:"text-sm font-bold text-gray-800 min-w-[40px] text-center"},V={class:"flex gap-3"},X={class:"flex justify-center mb-6"},Y={key:0,class:"text-center mb-6"},ee={class:"flex justify-center mb-6"},le={class:"flex gap-8"},te={class:"bg-gray-100 p-4 rounded-lg shadow-lg"},ae={class:"bg-gray-100 p-4 rounded-lg shadow-lg"},re={key:1,class:"text-center mb-6"},se={class:"bg-red-50 border-2 border-red-300 rounded-lg p-4 shadow-md"},de={class:"text-red-600"},oe={class:"text-red-600"},ie={class:"text-red-600"},ne={key:0,class:"text-yellow-600 font-medium mt-2"},be=W(c({__name:"Tetris",setup(e){const l=u({title:"俄罗斯方块"}),t=u({isPlaying:!1,isPaused:!1,score:0,highScore:0,level:1,lines:0,gameOver:!1}),a=u({boardWidth:window.innerWidth<768?10:12,boardHeight:window.innerWidth<768?20:22,cellSize:window.innerWidth<768?25:30,speedLevel:3,minSpeedLevel:1,maxSpeedLevel:10}),r=e=>1100-100*e,s=g([]),d=g(null),c=g(null);let W=null;const be={I:[[1,1,1,1]],O:[[1,1],[1,1]],T:[[0,1,0],[1,1,1]],S:[[0,1,1],[1,1,0]],Z:[[1,1,0],[0,1,1]],J:[[1,0,0],[1,1,1]],L:[[0,0,1],[1,1,1]]},ce={I:"#00f5ff",O:"#ffff00",T:"#a000f0",S:"#00f000",Z:"#f00000",J:"#0000f0",L:"#ffa000"},ue=()=>{s.value=Array(a.boardHeight).fill(null).map(()=>Array(a.boardWidth).fill(0))},ge=()=>{const e=Object.keys(be),l=e[Math.floor(Math.random()*e.length)];return{shape:be[l],type:l,x:Math.floor(a.boardWidth/2)-Math.floor(be[l][0].length/2),y:0}},ve=(e,l)=>{for(let t=0;t<e.shape.length;t++)for(let r=0;r<e.shape[t].length;r++)if(e.shape[t][r]){const s=e.x+r,d=e.y+t;if(s<0||s>=a.boardWidth||d>=a.boardHeight||d>=0&&l[d][s])return!0}return!1},pe=()=>{let e=0;for(let l=a.boardHeight-1;l>=0;l--)s.value[l].every(e=>1===e)&&(s.value.splice(l,1),s.value.unshift(Array(a.boardWidth).fill(0)),e++,l++);if(e>0){t.lines+=e,t.score+=100*e*t.level;const l=Math.floor(t.lines/10)+1;if(l>t.level&&(t.level=l,W)){clearInterval(W);const e=r(a.speedLevel);W=setInterval(ye,Math.max(100,e-50*t.level))}}},fe=(e,l)=>{if(!d.value)return!1;const t=i(o({},d.value),{x:d.value.x+e,y:d.value.y+l});return!ve(t,s.value)&&(d.value.x=t.x,d.value.y=t.y,!0)},xe=()=>{if(!d.value)return;const e=d.value.shape[0].map((e,l)=>d.value.shape.map(e=>e[l]).reverse()),l=i(o({},d.value),{shape:e});ve(l,s.value)||(d.value.shape=e)},he=()=>{if(t.isPlaying)if(t.isPaused=!t.isPaused,t.isPaused)W&&(clearInterval(W),W=null);else{const e=r(a.speedLevel);W=setInterval(ye,Math.max(100,e-50*t.level))}},me=e=>{const l=Math.max(a.minSpeedLevel,Math.min(a.maxSpeedLevel,a.speedLevel+e));if(a.speedLevel=l,t.isPlaying&&!t.isPaused&&W){clearInterval(W);const e=r(a.speedLevel);W=setInterval(ye,Math.max(100,e-50*t.level))}},ye=()=>{t.isPlaying&&!t.isPaused&&d.value&&(fe(0,1)||(()=>{if(d.value){for(let e=0;e<d.value.shape.length;e++)for(let l=0;l<d.value.shape[e].length;l++)if(d.value.shape[e][l]){const t=d.value.x+l,a=d.value.y+e;a>=0&&(s.value[a][t]=1)}pe(),d.value=c.value,c.value=ge(),d.value&&ve(d.value,s.value)&&ke()}})())},we=()=>{t.isPlaying=!0,t.isPaused=!1,t.gameOver=!1,t.score=0,t.level=1,t.lines=0,ue(),d.value=ge(),c.value=ge();const e=r(a.speedLevel);W=setInterval(ye,e)},ke=()=>{t.isPlaying=!1,t.gameOver=!0,W&&(clearInterval(W),W=null),t.score>t.highScore&&(t.highScore=t.score,localStorage.setItem("tetrisHighScore",t.highScore.toString()))},Se=()=>{W&&clearInterval(W),we()},Pe=e=>{if(t.isPlaying){if("p"===e.key||"P"===e.key)return e.preventDefault(),void he();if(!t.isPaused)switch(e.key){case"ArrowLeft":case"a":case"A":e.preventDefault(),fe(-1,0);break;case"ArrowRight":case"d":case"D":e.preventDefault(),fe(1,0);break;case"ArrowDown":case"s":case"S":e.preventDefault(),fe(0,1);break;case"ArrowUp":case" ":case"w":case"W":e.preventDefault(),xe()}}};return v(()=>{const e=localStorage.getItem("tetrisHighScore");e&&(t.highScore=parseInt(e)),ue(),c.value=ge(),window.addEventListener("keydown",Pe)}),p(()=>{W&&clearInterval(W),window.removeEventListener("keydown",Pe)}),(e,r)=>{var o,i;const u=f("el-button"),g=f("el-text");return x(),h("div",M,[m(n,{title:l.title},null,8,["title"]),y("div",D,[y("div",A,[y("div",C,[y("div",H,[r[2]||(r[2]=y("h3",{class:"text-sm font-medium text-blue-900"},"得分",-1)),y("p",$,w(t.score),1)]),y("div",E,[r[3]||(r[3]=y("h3",{class:"text-sm font-medium text-green-900"},"最高分",-1)),y("p",T,w(t.highScore),1)]),y("div",J,[r[4]||(r[4]=y("h3",{class:"text-sm font-medium text-purple-900"},"等级",-1)),y("p",F,w(t.level),1)]),y("div",R,[r[5]||(r[5]=y("h3",{class:"text-sm font-medium text-orange-900"},"消除行数",-1)),y("p",U,w(t.lines),1)]),y("div",Z,[r[6]||(r[6]=y("h3",{class:"text-sm font-medium text-indigo-900"},"游戏板",-1)),y("p",q,w(a.boardWidth)+"×"+w(a.boardHeight),1)]),y("div",G,[r[7]||(r[7]=y("h3",{class:"text-sm font-medium text-red-900"},"速度",-1)),y("p",Q,w(a.speedLevel)+"级",1)])]),y("div",B,[y("div",K,[r[10]||(r[10]=y("span",{class:"text-sm font-medium text-gray-700"},"速度等级:",-1)),m(u,{size:"small",onClick:r[0]||(r[0]=e=>me(-1)),disabled:a.speedLevel<=a.minSpeedLevel,class:"bg-blue-500 hover:bg-blue-600"},{default:k(()=>r[8]||(r[8]=[S(" 慢 ",-1)])),_:1,__:[8]},8,["disabled"]),y("span",N,w(a.speedLevel),1),m(u,{size:"small",onClick:r[1]||(r[1]=e=>me(1)),disabled:a.speedLevel>=a.maxSpeedLevel,class:"bg-red-500 hover:bg-red-600"},{default:k(()=>r[9]||(r[9]=[S(" 快 ",-1)])),_:1,__:[9]},8,["disabled"]),r[11]||(r[11]=y("span",{class:"text-xs text-gray-500"},"(1慢-10快)",-1))]),y("div",V,[t.isPlaying?(x(),P(u,{key:0,onClick:he,type:t.isPaused?"success":"warning",class:_(t.isPaused?"bg-green-500 hover:bg-green-600":"bg-yellow-500 hover:bg-yellow-600")},{default:k(()=>[S(w(t.isPaused?"继续 (P)":"暂停 (P)"),1)]),_:1},8,["type","class"])):L("",!0),t.isPlaying?(x(),P(u,{key:1,onClick:Se,type:"danger",class:"bg-red-500 hover:bg-red-600 border-red-600"},{default:k(()=>r[12]||(r[12]=[S(" 重新开始 ",-1)])),_:1,__:[12]})):L("",!0)])]),y("div",X,[t.isPlaying||t.gameOver?L("",!0):(x(),P(u,{key:0,onClick:we,type:"primary",class:"bg-blue-500 hover:bg-blue-600 border-blue-600"},{default:k(()=>r[13]||(r[13]=[S(" 开始游戏 ",-1)])),_:1,__:[13]})),t.gameOver?(x(),P(u,{key:1,onClick:Se,type:"success",class:"bg-green-500 hover:bg-green-600 border-green-600"},{default:k(()=>r[14]||(r[14]=[S(" 重新开始 ",-1)])),_:1,__:[14]})):L("",!0)]),t.isPaused&&t.isPlaying?(x(),h("div",Y,r[15]||(r[15]=[y("div",{class:"bg-yellow-50 border-2 border-yellow-300 rounded-lg p-4 shadow-md"},[y("h3",{class:"text-lg font-medium text-yellow-900 mb-2"},"游戏已暂停"),y("p",{class:"text-yellow-600"},"按 P 键或点击继续按钮恢复游戏")],-1)]))):L("",!0),y("div",ee,[y("div",le,[y("div",te,[y("div",{class:"border-2 border-gray-400 bg-gray-800 relative",style:O({width:a.boardWidth*a.cellSize+"px",height:a.boardHeight*a.cellSize+"px"})},[(x(!0),h(I,null,j(s.value,(e,l)=>(x(),h(I,{key:l},[(x(!0),h(I,null,j(e,(e,t)=>(x(),h("div",{key:`${t}-${l}`,class:_(["border border-gray-600 absolute",{"bg-gray-700":0===e,"bg-blue-500":1===e}]),style:O({width:a.cellSize+"px",height:a.cellSize+"px",left:t*a.cellSize+"px",top:l*a.cellSize+"px"})},null,6))),128))],64))),128)),d.value&&t.isPlaying?(x(!0),h(I,{key:0},j(d.value.shape,(e,l)=>(x(),h(I,{key:`piece-row-${l}`},[(x(!0),h(I,null,j(e,(e,t)=>(x(),h(I,{key:`piece-${t}-${l}`},[e?(x(),h("div",{key:0,class:"border border-gray-600 absolute",style:O({width:a.cellSize+"px",height:a.cellSize+"px",backgroundColor:ce[d.value.type],left:(d.value.x+t)*a.cellSize+"px",top:(d.value.y+l)*a.cellSize+"px"})},null,4)):L("",!0)],64))),128))],64))),128)):L("",!0)],4)]),y("div",ae,[r[16]||(r[16]=y("h3",{class:"text-lg font-medium text-gray-900 mb-3"},"下一个",-1)),y("div",{class:"border-2 border-gray-400 bg-gray-800 p-2",style:O({display:"grid",gridTemplateColumns:`repeat(${(null==(i=null==(o=c.value)?void 0:o.shape[0])?void 0:i.length)||4}, ${.8*a.cellSize}px)`,gap:"1px"})},[c.value?(x(!0),h(I,{key:0},j(c.value.shape.flat(),e=>(x(),h("div",{key:Math.random(),class:_(["border border-gray-600",{"bg-gray-700":!e,"bg-blue-500":e}]),style:O({width:.8*a.cellSize+"px",height:.8*a.cellSize+"px",backgroundColor:e?ce[c.value.type]:"#374151"})},null,6))),128)):L("",!0)],4)])])]),t.gameOver?(x(),h("div",re,[y("div",se,[r[17]||(r[17]=y("h3",{class:"text-lg font-medium text-red-900 mb-2"},"游戏结束！",-1)),y("p",de,"最终得分: "+w(t.score),1),y("p",oe,"消除行数: "+w(t.lines),1),y("p",ie,"达到等级: "+w(t.level),1),t.score>t.highScore?(x(),h("p",ne," 新纪录！恭喜你创造了新的最高分！ ")):L("",!0)])])):L("",!0),r[18]||(r[18]=z('<div class="bg-gray-50 rounded-lg p-4 border-2 border-gray-200 shadow-sm" data-v-efbb446b><h3 class="text-lg font-medium text-gray-900 mb-3" data-v-efbb446b>游戏说明</h3><div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600" data-v-efbb446b><div class="bg-white p-3 rounded border border-gray-200" data-v-efbb446b><p data-v-efbb446b><strong class="text-blue-600" data-v-efbb446b>游戏目标：</strong>消除完整的横行，获得高分</p><p data-v-efbb446b><strong class="text-blue-600" data-v-efbb446b>操作方式：</strong>方向键或WASD控制，空格键/W键旋转</p><p data-v-efbb446b><strong class="text-blue-600" data-v-efbb446b>游戏控制：</strong>P键暂停/继续，可调节下落速度</p></div><div class="bg-white p-3 rounded border border-gray-200" data-v-efbb446b><p data-v-efbb446b><strong class="text-green-600" data-v-efbb446b>键盘操作：</strong>A/←左移，D/→右移，S/↓快降，W/↑/空格旋转</p><p data-v-efbb446b><strong class="text-purple-600" data-v-efbb446b>得分规则：</strong>每消除一行+100分×当前等级</p><p data-v-efbb446b><strong class="text-red-600" data-v-efbb446b>升级机制：</strong>每消除10行升一级，速度加快</p></div></div></div>',1))])]),m(b,{title:"描述"},{default:k(()=>[m(g,null,{default:k(()=>r[19]||(r[19]=[S(" 经典俄罗斯方块游戏，考验你的空间思维和反应速度：",-1),y("br",null,null,-1),y("br",null,null,-1),S(" 游戏特色：经典俄罗斯方块玩法，7种不同形状的方块，实时得分统计",-1),y("br",null,null,-1),S(" 操作方式：方向键控制移动，空格键旋转方块，消除完整横行",-1),y("br",null,null,-1),S(" 游戏目标：尽可能多地消除横行，获得高分，挑战更高等级",-1),y("br",null,null,-1),S(" 训练效果：锻炼空间思维能力、反应速度和策略规划",-1),y("br",null,null,-1),y("br",null,null,-1),S(" 适合所有年龄段，是经典的益智游戏。 ",-1)])),_:1,__:[19]})]),_:1})])}}}),[["__scopeId","data-v-efbb446b"]]);export{be as default};
