var e=(e,a,l)=>new Promise((t,u)=>{var s=e=>{try{r(l.next(e))}catch(a){u(a)}},o=e=>{try{r(l.throw(e))}catch(a){u(a)}},r=e=>e.done?t(e.value):Promise.resolve(e.value).then(s,o);r((l=l.apply(e,a)).next())});import{d as a,q as l,r as t,al as u,o as s,c as o,R as r,a as n,K as i,aG as d,Q as v,a4 as c,P as p,aj as b,D as h,J as g,O as m}from"./chunk-bb5ca2a1.js";import{a as f}from"./chunk-5443edaa.js";import{D as x}from"./chunk-7c0c6fbd.js";import{T as y}from"./chunk-f92b9743.js";import{_ as k}from"../assets/index-4e015737.js";import"./chunk-d6839cfd.js";import"./chunk-eb404ece.js";const T={class:"flex flex-col mt-3 flex-1"},w={class:"p-4 rounded-2xl bg-white"},j={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},A={class:"space-y-3"},_={class:"grid grid-cols-1 gap-2"},C=["value"],D={class:"flex gap-2"},R=["disabled"],U={class:"space-y-3"},$=["value"],E={class:"flex gap-2"},I=k(a({__name:"AiTranslate",setup(a){const k=l({title:"AI翻译",desc:"由AI大模型驱动，支持多语言互译，源语言可自动检测。"}),I=t(""),P=t(""),V=t("https://text.pollinations.ai"),z={zh:"Chinese",en:"English",ja:"Japanese",ko:"Korean",fr:"French",de:"German",es:"Spanish",pt:"Portuguese",it:"Italian",ru:"Russian",ar:"Arabic",vi:"Vietnamese",tr:"Turkish",id:"Indonesian",nl:"Dutch",pl:"Polish"},S=e=>z[e]||e,F=t(""),G=t(""),J=t(!1),K=[{label:"自动检测",value:"auto"},{label:"中文",value:"zh"},{label:"英文",value:"en"},{label:"日文",value:"ja"},{label:"韩文",value:"ko"},{label:"法文",value:"fr"},{label:"德文",value:"de"},{label:"西班牙文",value:"es"},{label:"葡萄牙文",value:"pt"},{label:"意大利文",value:"it"},{label:"俄文",value:"ru"},{label:"阿拉伯文",value:"ar"},{label:"越南文",value:"vi"},{label:"土耳其文",value:"tr"},{label:"印尼文",value:"id"},{label:"荷兰文",value:"nl"},{label:"波兰文",value:"pl"}],M=t("auto"),O=t("zh"),X=()=>{if("auto"===M.value)return;const e=M.value;M.value=O.value,O.value=e;const a=F.value;F.value=G.value,G.value=a},q=a=>e(this,null,function*(){try{yield navigator.clipboard.writeText(a),alert("已复制")}catch(e){alert("复制失败，请手动复制")}}),B=()=>e(this,null,function*(){if(F.value.trim())if("auto"!==O.value){J.value=!0,G.value="";try{const e="​".repeat(1+Math.floor(3*Math.random())),a=(()=>{const e=M.value,a=O.value,l=F.value.trim();return["You are a professional translator.","auto"===e?"Auto-detect the source language.":`The source language is ${S(e)}.`,`Translate the following text into ${S(a)}.`,"Rules: preserve meaning, tone & formatting (line breaks, markdown, code blocks, URLs);","keep numbers/units; do not add explanations, examples, or notes.","Only output the translated text and nothing else.","---TEXT START---",l,"---TEXT END---"].join("\n")})()+e,l=yield f.get(`${P.value}?path=${encodeURIComponent(a)}&target=${V.value}&params=_t=${Date.now()}`,{headers:{Authorization:"Bearer "+I.value}}),t="string"==typeof l.data?l.data:String(l.data);G.value=t}catch(e){alert("翻译失败，请稍后重试")}finally{J.value=!1}}else alert("目标语言不能为自动检测")});return(e,a)=>{const l=u("el-text");return s(),o("div",T,[r(x,{title:k.title},null,8,["title"]),n("div",w,[n("div",j,[n("div",A,[n("div",_,[i(n("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>M.value=e),class:"w-full p-2 border rounded"},[(s(),o(v,null,c(K,e=>n("option",{key:e.value,value:e.value},p(e.label),9,C)),64))],512),[[d,M.value]])]),i(n("textarea",{"onUpdate:modelValue":a[1]||(a[1]=e=>F.value=e),placeholder:"输入要翻译的文本...",class:"w-full p-3 border rounded min-h-[180px]"},null,512),[[b,F.value]]),n("div",D,[n("button",{onClick:B,disabled:J.value,class:h(["px-4 py-2 rounded text-white",J.value?"bg-gray-400":"bg-blue-600 hover:bg-blue-700"])},p(J.value?"翻译中...":"开始翻译"),11,R),n("button",{onClick:X,class:"px-4 py-2 rounded border hover:bg-gray-50"},"交换语言与文本"),n("button",{onClick:a[2]||(a[2]=e=>q(F.value)),class:"px-4 py-2 rounded border hover:bg-gray-50"},"复制原文")])]),n("div",U,[i(n("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>O.value=e),class:"w-full p-2 border rounded"},[(s(!0),o(v,null,c(K.filter(e=>"auto"!==e.value),e=>(s(),o("option",{key:e.value,value:e.value},p(e.label),9,$))),128))],512),[[d,O.value]]),i(n("textarea",{"onUpdate:modelValue":a[4]||(a[4]=e=>G.value=e),readonly:"",class:"w-full p-3 border rounded min-h-[180px] bg-gray-50",placeholder:"翻译结果将显示在这里"},null,512),[[b,G.value]]),n("div",E,[n("button",{onClick:a[5]||(a[5]=e=>q(G.value)),class:"px-4 py-2 rounded border hover:bg-gray-50"},"复制译文")])])])]),r(y,{title:"描述"},{default:g(()=>[r(l,null,{default:g(()=>[m(p(k.desc),1)]),_:1})]),_:1})])}}}),[["__file","D:/dev/nodejs/tool-web1/tools-web/src/components/Tools/AiTranslate/AiTranslate.vue"]]);export{I as default};
