var e=(e,l,a)=>new Promise((t,u)=>{var o=e=>{try{n(a.next(e))}catch(l){u(l)}},s=e=>{try{n(a.throw(e))}catch(l){u(l)}},n=e=>e.done?t(e.value):Promise.resolve(e.value).then(o,s);n((a=a.apply(e,l)).next())});import{d as l,q as a,r as t,al as u,o,c as s,R as n,a as r,K as i,aG as v,Q as d,a4 as c,P as p,aj as b,D as h,J as g,O as m}from"./chunk-bb5ca2a1.js";import{a as f}from"./chunk-04652fe6.js";import{_ as x}from"./chunk-82aab59d.js";import{_ as y}from"./chunk-9c6aa90d.js";import"./chunk-ebe7e565.js";import"../assets/index-b711e110.js";import"./chunk-b2647718.js";const k={class:"flex flex-col mt-3 flex-1"},T={class:"p-4 rounded-2xl bg-white"},j={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},w={class:"space-y-3"},A={class:"grid grid-cols-1 gap-2"},C=["value"],_={class:"flex gap-2"},z=["disabled"],I={class:"space-y-3"},P=["value"],R={class:"flex gap-2"},U=l({__name:"AiTranslate",setup(l){const U=a({title:"AI翻译",desc:"由AI大模型驱动，支持多语言互译，源语言可自动检测。"}),V=t("pk_xQpDqfF17TnTC8zA"),D=t("https://tool.fologde.com/proxy"),E=t("https://gen.pollinations.ai"),$={zh:"Chinese",en:"English",ja:"Japanese",ko:"Korean",fr:"French",de:"German",es:"Spanish",pt:"Portuguese",it:"Italian",ru:"Russian",ar:"Arabic",vi:"Vietnamese",tr:"Turkish",id:"Indonesian",nl:"Dutch",pl:"Polish"},q=e=>$[e]||e,F=t(""),G=t(""),J=t(!1),K=[{label:"自动检测",value:"auto"},{label:"中文",value:"zh"},{label:"英文",value:"en"},{label:"日文",value:"ja"},{label:"韩文",value:"ko"},{label:"法文",value:"fr"},{label:"德文",value:"de"},{label:"西班牙文",value:"es"},{label:"葡萄牙文",value:"pt"},{label:"意大利文",value:"it"},{label:"俄文",value:"ru"},{label:"阿拉伯文",value:"ar"},{label:"越南文",value:"vi"},{label:"土耳其文",value:"tr"},{label:"印尼文",value:"id"},{label:"荷兰文",value:"nl"},{label:"波兰文",value:"pl"}],O=t("auto"),Q=t("zh"),S=()=>{if("auto"===O.value)return;const e=O.value;O.value=Q.value,Q.value=e;const l=F.value;F.value=G.value,G.value=l},X=l=>e(this,null,function*(){try{yield navigator.clipboard.writeText(l),alert("已复制")}catch(e){alert("复制失败，请手动复制")}}),B=()=>e(this,null,function*(){var e,l,a,t;if(F.value.trim())if("auto"!==Q.value){J.value=!0,G.value="";try{const u={model:"nova-fast",messages:[{role:"user",content:(()=>{const e=O.value,l=Q.value,a=F.value.trim();return["You are a professional translator.","auto"===e?"Auto-detect the source language.":`The source language is ${q(e)}.`,`Translate the following text into ${q(l)}.`,"Rules: preserve meaning, tone & formatting (line breaks, markdown, code blocks, URLs);","keep numbers/units; do not add explanations, examples, or notes.","Only output the translated text and nothing else.","---TEXT START---",a,"---TEXT END---"].join("\n")})()}]},o=yield f.post(D.value,u,{params:{target:`${E.value}/v1/chat/completions`},headers:{Authorization:`Bearer ${V.value}`,"Content-Type":"application/json"}});G.value=(null==(t=null==(a=null==(l=null==(e=o.data)?void 0:e.choices)?void 0:l[0])?void 0:a.message)?void 0:t.content)||""}catch(u){alert("翻译失败，请稍后重试")}finally{J.value=!1}}else alert("目标语言不能为自动检测")});return(e,l)=>{const a=u("el-text");return o(),s("div",k,[n(x,{title:U.title},null,8,["title"]),r("div",T,[r("div",j,[r("div",w,[r("div",A,[i(r("select",{"onUpdate:modelValue":l[0]||(l[0]=e=>O.value=e),class:"w-full p-2 border rounded"},[(o(),s(d,null,c(K,e=>r("option",{key:e.value,value:e.value},p(e.label),9,C)),64))],512),[[v,O.value]])]),i(r("textarea",{"onUpdate:modelValue":l[1]||(l[1]=e=>F.value=e),placeholder:"输入要翻译的文本...",class:"w-full p-3 border rounded min-h-[180px]"},null,512),[[b,F.value]]),r("div",_,[r("button",{onClick:B,disabled:J.value,class:h(["px-4 py-2 rounded text-white",J.value?"bg-gray-400":"bg-blue-600 hover:bg-blue-700"])},p(J.value?"翻译中...":"开始翻译"),11,z),r("button",{onClick:S,class:"px-4 py-2 rounded border hover:bg-gray-50"},"交换语言与文本"),r("button",{onClick:l[2]||(l[2]=e=>X(F.value)),class:"px-4 py-2 rounded border hover:bg-gray-50"},"复制原文")])]),r("div",I,[i(r("select",{"onUpdate:modelValue":l[3]||(l[3]=e=>Q.value=e),class:"w-full p-2 border rounded"},[(o(!0),s(d,null,c(K.filter(e=>"auto"!==e.value),e=>(o(),s("option",{key:e.value,value:e.value},p(e.label),9,P))),128))],512),[[v,Q.value]]),i(r("textarea",{"onUpdate:modelValue":l[4]||(l[4]=e=>G.value=e),readonly:"",class:"w-full p-3 border rounded min-h-[180px] bg-gray-50",placeholder:"翻译结果将显示在这里"},null,512),[[b,G.value]]),r("div",R,[r("button",{onClick:l[5]||(l[5]=e=>X(G.value)),class:"px-4 py-2 rounded border hover:bg-gray-50"},"复制译文")])])])]),n(y,{title:"描述"},{default:g(()=>[n(a,null,{default:g(()=>[m(p(U.desc),1)]),_:1})]),_:1})])}}});export{U as default};
