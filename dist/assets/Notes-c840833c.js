var J=Object.defineProperty;var W=(g,t,s)=>t in g?J(g,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):g[t]=s;var $=(g,t,s)=>(W(g,typeof t!="symbol"?t+"":t,s),s);import{ab as G,ac as K,ad as O,s as f,d as Q,v as E,H as b,I as X,o as Y,r as y,ae as Z,b as x,c as w,i as r,f as n,h as u,j as _,k as ee,a2 as te,C as se,F as le,e as oe,J as ae,t as p,W as F,p as ne,E as ie,_ as re}from"./index-35951af1.js";import{_ as ue}from"./DetailHeader.vue_vue_type_script_setup_true_lang-af3ff089.js";import{_ as de}from"./ToolDetail.vue_vue_type_script_setup_true_lang-9f1fa948.js";class ce{constructor(){$(this,"instance");$(this,"proxyUrl");this.proxyUrl="https://tool.fologde.com",this.instance=G.create({baseURL:this.proxyUrl,timeout:1e4}),this.instance.interceptors.request.use(t=>{const s=K();return s&&(t.headers=t.headers||{},t.headers.Authorization=`Bearer ${s}`),t},t=>Promise.reject(t)),this.instance.interceptors.response.use(t=>t,t=>{let s="请求失败";if(t.response){const l=t.response.status;switch(l){case 401:s="登录已过期，请重新登录",O(),setTimeout(()=>{window.location.href="/login"},1e3);break;case 403:s="无权限访问";break;case 404:s="接口不存在";break;case 500:s="服务器内部错误";break;default:s=`请求失败: ${l}`}}else t.request&&(s="网络连接失败");return f.error(s),Promise.reject(t)})}get(t,s){return this.instance.get(t,s)}post(t,s,l){return this.instance.post(t,s,l)}put(t,s,l){return this.instance.put(t,s,l)}delete(t,s){return this.instance.delete(t,s)}getProxyUrl(){return this.proxyUrl}}const C=new ce,me={class:"flex flex-col mt-3 flex-1"},ve={class:"p-4 rounded-2xl bg-white"},pe={class:"flex justify-between items-center mb-4"},fe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6"},_e=["onClick"],ge={class:"flex justify-between items-start mb-2"},be={class:"font-medium text-gray-800 truncate flex-1"},ye={class:"flex space-x-2 ml-2"},xe={class:"text-gray-600 text-sm line-clamp-3 mb-2"},we={class:"text-xs text-gray-400"},ke={class:"dialog-footer"},he={key:0,class:"space-y-4"},Ce={class:"p-3 bg-gray-50 rounded border"},Ne={class:"p-3 bg-gray-50 rounded border whitespace-pre-wrap"},Ve={class:"grid grid-cols-2 gap-4 text-sm text-gray-500"},$e={class:"dialog-footer"},Te=Q({__name:"Notes",setup(g){const t=E({title:"笔记备忘录"}),s=b([]),l=b(null),c=b(!1),v=b(!1),i=E({title:"",content:""}),N=b(!1),d=b(!1),k=async()=>{try{N.value=!0;const o=await C.get("/api/notes");if(o.status===200){const e=o.data;s.value=e.notes||[]}}catch(o){console.error("获取笔记列表失败:",o)}finally{N.value=!1}},L=async()=>{if(!i.title.trim()||!i.content.trim()){f.warning("标题和内容不能为空");return}try{d.value=!0,(await C.post("/api/notes",{title:i.title.trim(),content:i.content.trim()})).status===201?(f.success("创建成功"),v.value=!1,V(),await k()):f.error("创建失败")}catch(o){console.error("创建笔记失败:",o)}finally{d.value=!1}},M=async()=>{if(!l.value||!i.title.trim()||!i.content.trim()){f.warning("标题和内容不能为空");return}try{d.value=!0,(await C.put(`/api/notes/${l.value.id}`,{title:i.title.trim(),content:i.content.trim()})).status===200?(f.success("更新成功"),v.value=!1,c.value=!1,l.value=null,V(),await k()):f.error("更新失败")}catch(o){console.error("更新笔记失败:",o)}finally{d.value=!1}},P=async o=>{var e;await ie.confirm("确定要删除这条笔记吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});try{d.value=!0,(await C.delete(`/api/notes/${o.id}`)).status===200?(f.success("删除成功"),((e=l.value)==null?void 0:e.id)===o.id&&(l.value=null),await k()):f.error("删除失败")}catch(m){console.error("删除笔记失败:",m)}finally{d.value=!1}},T=o=>{l.value=o,i.title=o.title,i.content=o.content,c.value=!0,v.value=!0},R=o=>{c.value||(l.value=o,v.value=!1)},I=()=>{l.value=null,c.value=!1,V(),v.value=!0},V=()=>{i.title="",i.content=""},h=o=>new Date(o).toLocaleString("zh-CN"),U=X(()=>l.value!==null&&!v.value&&!c.value);return Y(()=>{k()}),(o,e)=>{const m=y("el-button"),B=y("el-input"),q=y("el-form-item"),S=y("el-form"),D=y("el-dialog"),A=y("el-text"),H=Z("loading");return x(),w("div",me,[r(ue,{title:t.title},null,8,["title"]),n("div",ve,[n("div",pe,[e[10]||(e[10]=n("h3",{class:"text-lg font-semibold text-gray-800"},"我的笔记",-1)),r(m,{type:"primary",onClick:I,icon:ee(te)},{default:u(()=>e[9]||(e[9]=[_(" 新建笔记 ",-1)])),_:1,__:[9]},8,["icon"])]),se((x(),w("div",fe,[(x(!0),w(le,null,oe(s.value,a=>{var j;return x(),w("div",{key:a.id,class:ae(["border rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer",{"border-blue-500 bg-blue-50":((j=l.value)==null?void 0:j.id)===a.id}]),onClick:z=>R(a)},[n("div",ge,[n("h4",be,p(a.title),1),n("div",ye,[r(m,{size:"small",type:"primary",loading:d.value,disabled:d.value,onClick:F(z=>T(a),["stop"])},{default:u(()=>e[11]||(e[11]=[_(" 编辑 ",-1)])),_:2,__:[11]},1032,["loading","disabled","onClick"]),r(m,{size:"small",type:"danger",loading:d.value,disabled:d.value,onClick:F(z=>P(a),["stop"])},{default:u(()=>e[12]||(e[12]=[_(" 删除 ",-1)])),_:2,__:[12]},1032,["loading","disabled","onClick"])])]),n("p",xe,p(a.content),1),n("div",we,[n("div",null,"创建: "+p(h(a.createTime)),1),n("div",null,"更新: "+p(h(a.updateTime)),1)])],10,_e)}),128))])),[[H,N.value]]),r(D,{modelValue:v.value,"onUpdate:modelValue":e[4]||(e[4]=a=>v.value=a),title:c.value?"编辑笔记":"新建笔记",width:"80%","close-on-click-modal":!1,onClose:e[5]||(e[5]=a=>c.value=!1)},{footer:u(()=>[n("span",ke,[r(m,{disabled:d.value,onClick:e[2]||(e[2]=a=>{v.value=!1,c.value=!1})},{default:u(()=>e[13]||(e[13]=[_(" 取消 ",-1)])),_:1,__:[13]},8,["disabled"]),r(m,{type:"primary",loading:d.value,disabled:d.value,onClick:e[3]||(e[3]=a=>c.value?M():L())},{default:u(()=>[_(p(c.value?"更新":"创建"),1)]),_:1},8,["loading","disabled"])])]),default:u(()=>[r(S,{model:i,"label-width":"80px"},{default:u(()=>[r(q,{label:"标题",required:""},{default:u(()=>[r(B,{modelValue:i.title,"onUpdate:modelValue":e[0]||(e[0]=a=>i.title=a),placeholder:"请输入笔记标题"},null,8,["modelValue"])]),_:1}),r(q,{label:"内容",required:""},{default:u(()=>[r(B,{modelValue:i.content,"onUpdate:modelValue":e[1]||(e[1]=a=>i.content=a),type:"textarea",rows:8,placeholder:"请输入笔记内容"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),r(D,{modelValue:U.value,"onUpdate:modelValue":e[8]||(e[8]=a=>U.value=a),title:"笔记详情",width:"80%","close-on-click-modal":!1},{footer:u(()=>[n("span",$e,[r(m,{onClick:e[6]||(e[6]=a=>l.value=null)},{default:u(()=>e[16]||(e[16]=[_("关闭",-1)])),_:1,__:[16]}),r(m,{type:"primary",onClick:e[7]||(e[7]=a=>T(l.value))},{default:u(()=>e[17]||(e[17]=[_("编辑",-1)])),_:1,__:[17]})])]),default:u(()=>[l.value?(x(),w("div",he,[n("div",null,[e[14]||(e[14]=n("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"标题",-1)),n("div",Ce,p(l.value.title),1)]),n("div",null,[e[15]||(e[15]=n("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"内容",-1)),n("div",Ne,p(l.value.content),1)]),n("div",Ve,[n("div",null,"创建时间: "+p(h(l.value.createTime)),1),n("div",null,"更新时间: "+p(h(l.value.updateTime)),1)])])):ne("",!0)]),_:1},8,["modelValue"])]),r(de,{title:"描述"},{default:u(()=>[r(A,null,{default:u(()=>e[18]||(e[18]=[_(" 在线笔记记录工具，支持创建、编辑、删除笔记，数据安全存储在云端。您可以随时记录想法、待办事项、学习笔记等，支持富文本编辑，数据实时同步。 ",-1)])),_:1,__:[18]})]),_:1})])}}});const je=re(Te,[["__scopeId","data-v-06be536a"]]);export{je as default};
