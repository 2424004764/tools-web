import{d as G,s as z,G as f,H,o as W,r as v,b as y,c as b,i as n,f as o,h as r,j as p,k as A,a2 as J,F as K,e as O,I as P,t as m,W as D,p as Q,ab as w,q as i,E as R,_ as X}from"./index-bd5049d7.js";import{_ as Y}from"./DetailHeader.vue_vue_type_script_setup_true_lang-67620c1f.js";import{_ as Z}from"./ToolDetail.vue_vue_type_script_setup_true_lang-b06c8a4f.js";const ee={class:"flex flex-col mt-3 flex-1"},te={class:"p-4 rounded-2xl bg-white"},le={class:"flex justify-between items-center mb-4"},oe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6"},se=["onClick"],ae={class:"flex justify-between items-start mb-2"},ne={class:"font-medium text-gray-800 truncate flex-1"},re={class:"flex space-x-2 ml-2"},ie={class:"text-gray-600 text-sm line-clamp-3 mb-2"},de={class:"text-xs text-gray-400"},ue={class:"dialog-footer"},ce={key:0,class:"space-y-4"},me={class:"p-3 bg-gray-50 rounded border"},pe={class:"p-3 bg-gray-50 rounded border whitespace-pre-wrap"},ve={class:"grid grid-cols-2 gap-4 text-sm text-gray-500"},fe={class:"dialog-footer"},_e=G({__name:"Notes",setup(ge){const F=z({title:"笔记备忘录"}),C=f([]),s=f(null),u=f(!1),c=f(!1),a=z({title:"",content:""}),_=f("http://127.0.0.1:8788"),g=async()=>{try{const t=await w.get(`${_.value}/api/notes`);if(t.status===200){const e=t.data;C.value=e.notes||[]}}catch(t){console.error("获取笔记失败:",t),i.error("获取笔记失败")}},M=async()=>{if(!a.title.trim()||!a.content.trim()){i.warning("标题和内容不能为空");return}try{(await w.post(`${_.value}/api/notes`,{title:a.title.trim(),content:a.content.trim()})).status===201?(i.success("创建成功"),c.value=!1,k(),await g()):i.error("创建失败")}catch(t){console.error("创建笔记失败:",t),i.error("创建笔记失败")}},h=async()=>{if(!s.value||!a.title.trim()||!a.content.trim()){i.warning("标题和内容不能为空");return}try{(await w.put(`${_.value}/api/notes/${s.value.id}`,{title:a.title.trim(),content:a.content.trim()})).status===200?(i.success("更新成功"),c.value=!1,u.value=!1,s.value=null,k(),await g()):i.error("更新失败")}catch(t){console.error("更新笔记失败:",t),i.error("更新笔记失败")}},j=async t=>{var e;try{await R.confirm("确定要删除这条笔记吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),(await w.delete(`${_.value}/api/notes/${t.id}`)).status===200?(i.success("删除成功"),((e=s.value)==null?void 0:e.id)===t.id&&(s.value=null),await g()):i.error("删除失败")}catch(d){d!=="cancel"&&(console.error("删除笔记失败:",d),i.error("删除笔记失败"))}},N=t=>{s.value=t,a.title=t.title,a.content=t.content,u.value=!0,c.value=!0},q=t=>{s.value=t,c.value=!1},I=()=>{s.value=null,u.value=!1,k(),c.value=!0},k=()=>{a.title="",a.content=""},x=t=>new Date(t).toLocaleString("zh-CN"),V=H(()=>s.value!==null&&!c.value&&!u.value);return W(()=>{g()}),(t,e)=>{const d=v("el-button"),$=v("el-input"),T=v("el-form-item"),L=v("el-form"),B=v("el-dialog"),S=v("el-text");return y(),b("div",ee,[n(Y,{title:F.title},null,8,["title"]),o("div",te,[o("div",le,[e[10]||(e[10]=o("h3",{class:"text-lg font-semibold text-gray-800"},"我的笔记",-1)),n(d,{type:"primary",onClick:I,icon:A(J)},{default:r(()=>e[9]||(e[9]=[p(" 新建笔记 ",-1)])),_:1,__:[9]},8,["icon"])]),o("div",oe,[(y(!0),b(K,null,O(C.value,l=>{var E;return y(),b("div",{key:l.id,class:P(["border rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer",{"border-blue-500 bg-blue-50":((E=s.value)==null?void 0:E.id)===l.id}]),onClick:U=>q(l)},[o("div",ae,[o("h4",ne,m(l.title),1),o("div",re,[n(d,{size:"small",type:"primary",onClick:D(U=>N(l),["stop"])},{default:r(()=>e[11]||(e[11]=[p(" 编辑 ",-1)])),_:2,__:[11]},1032,["onClick"]),n(d,{size:"small",type:"danger",onClick:D(U=>j(l),["stop"])},{default:r(()=>e[12]||(e[12]=[p(" 删除 ",-1)])),_:2,__:[12]},1032,["onClick"])])]),o("p",ie,m(l.content),1),o("div",de,[o("div",null,"创建: "+m(x(l.createTime)),1),o("div",null,"更新: "+m(x(l.updateTime)),1)])],10,se)}),128))]),n(B,{modelValue:c.value,"onUpdate:modelValue":e[4]||(e[4]=l=>c.value=l),title:u.value?"编辑笔记":"新建笔记",width:"80%","close-on-click-modal":!1,onClose:e[5]||(e[5]=l=>u.value=!1)},{footer:r(()=>[o("span",ue,[n(d,{onClick:e[2]||(e[2]=l=>{c.value=!1,u.value=!1})},{default:r(()=>e[13]||(e[13]=[p("取消",-1)])),_:1,__:[13]}),n(d,{type:"primary",onClick:e[3]||(e[3]=l=>u.value?h():M())},{default:r(()=>[p(m(u.value?"更新":"创建"),1)]),_:1})])]),default:r(()=>[n(L,{model:a,"label-width":"80px"},{default:r(()=>[n(T,{label:"标题",required:""},{default:r(()=>[n($,{modelValue:a.title,"onUpdate:modelValue":e[0]||(e[0]=l=>a.title=l),placeholder:"请输入笔记标题"},null,8,["modelValue"])]),_:1}),n(T,{label:"内容",required:""},{default:r(()=>[n($,{modelValue:a.content,"onUpdate:modelValue":e[1]||(e[1]=l=>a.content=l),type:"textarea",rows:8,placeholder:"请输入笔记内容"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),n(B,{modelValue:V.value,"onUpdate:modelValue":e[8]||(e[8]=l=>V.value=l),title:"笔记详情",width:"80%","close-on-click-modal":!1},{footer:r(()=>[o("span",fe,[n(d,{onClick:e[6]||(e[6]=l=>s.value=null)},{default:r(()=>e[16]||(e[16]=[p("关闭",-1)])),_:1,__:[16]}),n(d,{type:"primary",onClick:e[7]||(e[7]=l=>N(s.value))},{default:r(()=>e[17]||(e[17]=[p("编辑",-1)])),_:1,__:[17]})])]),default:r(()=>[s.value?(y(),b("div",ce,[o("div",null,[e[14]||(e[14]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"标题",-1)),o("div",me,m(s.value.title),1)]),o("div",null,[e[15]||(e[15]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"内容",-1)),o("div",pe,m(s.value.content),1)]),o("div",ve,[o("div",null,"创建时间: "+m(x(s.value.createTime)),1),o("div",null,"更新时间: "+m(x(s.value.updateTime)),1)])])):Q("",!0)]),_:1},8,["modelValue"])]),n(Z,{title:"描述"},{default:r(()=>[n(S,null,{default:r(()=>e[18]||(e[18]=[p(" 在线笔记记录工具，支持创建、编辑、删除笔记，数据安全存储在云端。您可以随时记录想法、待办事项、学习笔记等，支持富文本编辑，数据实时同步。 ",-1)])),_:1,__:[18]})]),_:1})])}}});const we=X(_e,[["__scopeId","data-v-a2d73c6b"]]);export{we as default};
