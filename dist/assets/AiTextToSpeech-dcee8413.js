import{d as Y,I as o,k as Z,o as J,x as Q,r as ee,b as n,c as r,h as A,f as e,U as x,V as h,i as b,W as L,X as te,F as $,e as I,t as M,L as le,D as S,w as D,G as se,Z as N,_ as oe}from"./index-6eb44c3c.js";import{D as ae}from"./DetailHeader-3c1a48b3.js";import{T as ne}from"./ToolDetail-cd6667c1.js";const re={class:"flex flex-col mt-3 flex-1"},ie={class:"p-4 rounded-2xl bg-white"},de={class:"ai-text-to-speech"},ce={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},ue={class:"space-y-6"},ve={class:"input-section"},pe={class:"voice-selector"},me={key:0,class:"voice-loading"},xe={key:1,class:"voice-error"},ge=["value"],fe={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},he=["disabled"],be={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},ye={class:"result-section"},we={key:0,class:"loading flex flex-col items-center justify-center h-full"},_e={key:1,class:"result h-full flex flex-col"},ke={class:"flex-1 flex items-center justify-center"},Ce={class:"audio-player"},Te=["src"],Ae={key:2,class:"placeholder flex flex-col items-center justify-center h-full text-center p-8"},Le={key:0,class:"history-section"},Me={class:"history-list"},Se=["src"],Ve={class:"history-actions"},He=["onClick"],ze=["onClick"],Ue=["onClick"],Be=["onClick"],je={class:"modal-content"},$e={class:"modal-body"},Ie=["src"],De=Y({__name:"AiTextToSpeech",setup(Ne){const E=o("NpgaKlHjioTlyo2B"),V=o("https://tool.fologde.com/proxy"),H=o("https://text.pollinations.ai"),p=Z({title:"在线文本转语音",desc:"免费无限次数文本转语音，无需登录注册、直接使用，支持多种语音和语言，如果生成出错请重试，或者重新进一下页面",presetTexts:["欢迎使用文本转语音工具，这是一个强大的AI语音合成服务。","人工智能正在改变我们的生活方式，让科技更加人性化。","今天天气真不错，阳光明媚，适合出去走走。","感谢您使用我们的服务，希望这个工具能够帮助到您。","这是一个示例文本，用于演示文本转语音功能的效果。","语音合成技术让计算机能够像人类一样说话。","科技的发展让我们的生活变得更加便利和高效。","自然语言处理是人工智能的重要分支之一。","机器学习算法能够从数据中学习并做出预测。","深度学习在图像识别和语音识别方面取得了巨大进展。"]}),i=o(p.presetTexts[0]),d=o(""),v=o(!1),m=o([]),c=o(""),y=o(1),w=o(1),_=o(1),u=o([]),R=o(Number({}.VITE_AI_SPEECH_HISTORY_MAX)||10),k=o(!1),g=o(!1),f=o(!1),z=async()=>{g.value=!0,f.value=!1;try{const t=(await N.get(`${V.value}?path=models&target=${H.value}`)).data;m.value=t.map(a=>({value:a,label:a.charAt(0).toUpperCase()+a.slice(1)})),m.value.length>0&&(c.value=m.value[0].value)}catch(l){console.error("获取语音列表失败:",l),f.value=!0,m.value=[],c.value=""}finally{g.value=!1}};J(()=>{z()});const G=()=>{const l=Math.floor(Math.random()*p.presetTexts.length);i.value=p.presetTexts[l]},P=async()=>{if(!(!i.value.trim()||!c.value)){v.value=!0,d.value="";try{const l={voice:c.value,speed:y.value.toString(),pitch:w.value.toString(),volume:_.value.toString()};l._t=String(Date.now());const t=new URLSearchParams(l).toString(),a=await N.get(`${V.value}?path=speech/${encodeURIComponent(i.value)}&target=${H.value}&params=${t}`,{headers:{Authorization:"Bearer "+E.value},responseType:"blob"}),s=new Blob([a.data],{type:"audio/mpeg"});d.value=URL.createObjectURL(s),q(i.value,d.value)}catch(l){console.error("语音生成失败:",l),alert("语音生成失败，请稍后重试")}finally{v.value=!1}}},U=()=>{k.value=!0},C=()=>{k.value=!1},q=(l,t)=>{const a={text:l,audio:t,timestamp:Date.now()};u.value.unshift(a),u.value.length>R.value&&u.value.pop()},F=l=>{const t=window.open();t&&t.document.write(`
      <html>
        <head><title>音频播放</title></head>
        <body style="margin:0;padding:20px;background:#f5f5f5;display:flex;justify-content:center;align-items:center;min-height:100vh;">
          <audio controls autoplay style="max-width:100%;">
            <source src="${l}" type="audio/mpeg">
            您的浏览器不支持音频播放。
          </audio>
        </body>
      </html>
    `)},K=l=>{alert(`文本内容：

`+l)},O=l=>{u.value.splice(l,1)},W=()=>{u.value=[]},B=Q(()=>!v.value&&!g.value&&!f.value&&c.value&&i.value.trim()),X=async l=>{try{await navigator.clipboard.writeText(l),alert("文本已复制到剪贴板")}catch(t){console.error("复制失败:",t);const a=document.createElement("textarea");a.value=l,document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a),alert("文本已复制到剪贴板")}};return(l,t)=>{const a=ee("el-text");return n(),r("div",re,[A(ae,{title:p.title},null,8,["title"]),e("div",ie,[e("div",de,[e("div",ce,[e("div",ue,[e("div",ve,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"文本内容",-1)),x(e("textarea",{"onUpdate:modelValue":t[0]||(t[0]=s=>i.value=s),placeholder:"输入要转换的文本...",class:"w-full p-4 border rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 min-h-[150px]"},null,512),[[h,i.value]]),e("div",{class:"mt-2 flex justify-end"},[e("button",{onClick:G,class:"text-sm text-blue-600 hover:text-blue-800 flex items-center"},t[5]||(t[5]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z","clip-rule":"evenodd"})],-1),b(" 换一个示例文本 ",-1)]))])]),e("div",pe,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"选择语音",-1)),g.value?(n(),r("div",me,t[7]||(t[7]=[L('<div class="flex items-center justify-center p-4 border rounded-lg bg-gray-50" data-v-3878cdca><svg class="animate-spin h-5 w-5 mr-2 text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" data-v-3878cdca><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-3878cdca></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" data-v-3878cdca></path></svg><span class="text-sm text-gray-600" data-v-3878cdca>正在加载语音列表...</span></div>',1)]))):f.value?(n(),r("div",xe,[e("div",{class:"border border-red-200 rounded-lg bg-red-50 p-4"},[t[9]||(t[9]=L('<div class="flex items-center mb-3" data-v-3878cdca><svg class="h-5 w-5 text-red-600 mr-2" fill="currentColor" viewBox="0 0 20 20" data-v-3878cdca><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" data-v-3878cdca></path></svg><span class="text-sm font-medium text-red-800" data-v-3878cdca>语音列表加载失败</span></div><p class="text-sm text-red-700 mb-3" data-v-3878cdca>无法获取可用的语音列表，请检查网络连接后重试。</p>',2)),e("button",{onClick:z,class:"flex items-center px-3 py-2 bg-red-600 text-white text-sm rounded-md hover:bg-red-700 transition-colors"},t[8]||(t[8]=[e("svg",{class:"h-4 w-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z","clip-rule":"evenodd"})],-1),b(" 重新加载语音列表 ",-1)]))])])):x((n(),r("select",{key:2,"onUpdate:modelValue":t[1]||(t[1]=s=>c.value=s),class:"w-full p-3 border rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500"},[t[10]||(t[10]=e("option",{value:"",disabled:""},"请选择语音",-1)),(n(!0),r($,null,I(m.value,s=>(n(),r("option",{key:s.value,value:s.value},M(s.label),9,ge))),128))],512)),[[te,c.value]])]),e("div",fe,[e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"语速",-1)),x(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>y.value=s),type:"number",min:"0.5",max:"2.0",step:"0.1",class:"w-full p-2 border rounded-lg"},null,512),[[h,y.value,void 0,{number:!0}]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"音调",-1)),x(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>w.value=s),type:"number",min:"0.5",max:"2.0",step:"0.1",class:"w-full p-2 border rounded-lg"},null,512),[[h,w.value,void 0,{number:!0}]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"音量",-1)),x(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>_.value=s),type:"number",min:"0.1",max:"2.0",step:"0.1",class:"w-full p-2 border rounded-lg"},null,512),[[h,_.value,void 0,{number:!0}]])])]),e("button",{onClick:P,disabled:!B.value,class:le(["generate-btn py-3 px-6 rounded-lg shadow-md transition w-full flex items-center justify-center",B.value?"bg-blue-600 hover:bg-blue-700 text-white":"bg-gray-400 cursor-not-allowed"])},[v.value?(n(),r("svg",be,t[15]||(t[15]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):S("",!0),b(" "+M(v.value?"生成中...":"生成语音"),1)],10,he)]),e("div",ye,[v.value?(n(),r("div",we,t[16]||(t[16]=[e("div",{class:"spinner"},null,-1),e("p",{class:"mt-4 text-lg"},"生成中...",-1)]))):d.value?(n(),r("div",_e,[t[17]||(t[17]=e("div",{class:"mb-4"},[e("h3",{class:"text-lg font-medium text-gray-700"},"生成结果"),e("p",{class:"text-sm text-gray-500"},"点击播放按钮试听音频")],-1)),e("div",ke,[e("div",Ce,[e("audio",{src:d.value,controls:"",class:"w-full max-w-md",onClick:U},null,8,Te),e("button",{onClick:U,class:"mt-4 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors"}," 在新窗口播放 ")])])])):(n(),r("div",Ae,t[18]||(t[18]=[L('<div class="bg-gray-200 border-2 border-dashed rounded-xl w-16 h-16 mb-4 flex items-center justify-center" data-v-3878cdca><svg class="w-8 h-8 text-gray-400" fill="currentColor" viewBox="0 0 20 20" data-v-3878cdca><path fill-rule="evenodd" d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM12.293 7.293a1 1 0 011.414 0L15 8.586l1.293-1.293a1 1 0 111.414 1.414L16.414 10l1.293 1.293a1 1 0 01-1.414 1.414L15 11.414l-1.293 1.293a1 1 0 01-1.414-1.414L13.586 10l-1.293-1.293a1 1 0 010-1.414z" clip-rule="evenodd" data-v-3878cdca></path></svg></div><h3 class="text-lg font-medium text-gray-700 mb-2" data-v-3878cdca> 等待生成语音 </h3><p class="text-gray-500" data-v-3878cdca>输入文本并点击&quot;生成语音&quot;按钮</p>',3)])))])])])]),u.value.length?(n(),r("div",Le,[e("div",{class:"history-header"},[t[19]||(t[19]=e("h3",null,"历史记录",-1)),e("button",{onClick:W,class:"clear-btn"},"清空全部")]),e("div",Me,[(n(!0),r($,null,I(u.value,(s,j)=>(n(),r("div",{key:j,class:"history-item"},[e("audio",{src:s.audio,controls:"",class:"w-full"},null,8,Se),e("div",Ve,[e("button",{onClick:T=>F(s.audio)},"新窗口播放",8,He),e("button",{onClick:T=>K(s.text)},"查看文本",8,ze),e("button",{onClick:T=>X(s.text)},"复制文本",8,Ue),e("button",{onClick:T=>O(j),class:"delete-btn"}," 删除 ",8,Be)])]))),128))])])):S("",!0),A(ne,{title:"描述"},{default:D(()=>[A(a,null,{default:D(()=>[b(M(p.desc),1)]),_:1})]),_:1}),k.value&&d.value?(n(),r("div",{key:1,class:"generated-audio-modal",onClick:se(C,["self"])},[e("div",je,[e("div",{class:"modal-header"},[t[21]||(t[21]=e("h3",{class:"text-lg font-semibold text-gray-800"},"生成结果",-1)),e("button",{onClick:C,class:"close-btn",title:"关闭"},t[20]||(t[20]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",$e,[e("audio",{src:d.value,controls:"",autoplay:"",class:"w-full"},null,8,Ie)]),e("div",{class:"modal-footer"},[e("button",{onClick:C,class:"btn-secondary"}," 关闭 ")])])])):S("",!0)])}}});const Pe=oe(De,[["__scopeId","data-v-3878cdca"],["__file","D:/dev/nodejs/tools-web/src/components/Tools/AiTextToSpeech/AiTextToSpeech.vue"]]);export{Pe as default};
