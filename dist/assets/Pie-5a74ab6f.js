import{b as G,t as H,i as oe,S as q,c as se,r as ne,u as ue}from"./xlsx-109b9e14.js";import{_ as ie}from"./DetailHeader.vue_vue_type_script_setup_true_lang-e0b25254.js";import{_ as de}from"./ToolDetail.vue_vue_type_script_setup_true_lang-05672161.js";import{d as re,k as me,s as n,o as ve,r,b as fe,c as pe,h as t,f as s,w as a,i as o,S as _e,_ as xe}from"./index-ce539fc8.js";const we={class:"flex flex-col mt-3 flex-1"},ge={class:"p-4 rounded-2xl flex"},ce={class:"w-4/6"},be={class:"flex flex-row-reverse mb-4"},Ve={class:"w-2/6 bg-white ml-3 rounded-lg p-3"},Ce={class:"mb-3"},ye={class:"flex items-center ml-1"},ke={class:"flex w-full"},he={class:"flex"},Ue={class:"flex mt-3"},Se={class:"flex"},De={class:"flex"},$e={class:"flex"},Ee={class:"flex"},ze={class:"flex"},Be={class:"flex"},Te={class:"flex"},Oe=re({__name:"Pie",setup(Ae){const J=me({title:"饼图"}),B=n(),v=n(),U=n(),N=n(1),T=n(100),S=n(720),D=n(400),O=n("1"),L=n("#5470c6"),$=n("center"),E=n("Tools-Web"),z=n("在线图表制作工具"),A=n(!0),P=n(!0),F=n(!1),R=n("Tools-Web"),X=()=>{let i=document.createElement("canvas"),e=i.getContext("2d");return i.width=i.height=100,e.textAlign="center",e.textBaseline="middle",e.globalAlpha=.08,e.font="20px Microsoft Yahei",e.translate(50,50),e.rotate(-Math.PI/4),e.fillText(R.value,0,0),i},d=i=>{var m,u,f,p,_;let e=B.value;switch(i){case"scale":let c=T.value/100;e.style.transform=`scale(${c})`;break;case"size":e.style.width=S.value+"px",e.style.height=D.value+"px",M();break;case"title":let g="",x="";A.value===!0&&(g=E.value),P.value===!0&&(x=z.value),(m=v.value)==null||m.setOption({title:{text:g,subtext:x,left:$.value}});break;case"color":(u=v.value)==null||u.setOption({series:[{itemStyle:{color:L.value}}]});break;case"watermark":F.value===!0?(f=v.value)==null||f.setOption({backgroundColor:{image:X()}}):(p=v.value)==null||p.setOption({backgroundColor:"#fff"});break;case"data":(_=v.value)==null||_.setOption({series:[{data:k.value}]});break}},Y=()=>{},C=n(["Search Engine","Direct","Email","Union Ads","Video Ads"]),y=n([1048,735,580,484,300]),k=n([]),K={backgroundColor:"#fff",title:{text:E.value,subtext:z.value,left:$.value},series:[{type:"pie",radius:"50%",data:k.value,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}],tooltip:{}},M=()=>{v.value=oe(B.value),v.value.clear(),v.value.resize({width:S.value,height:D.value}),v.value.setOption(K),d("data")},Q=()=>{var u;let i=O.value=="1"?"png":"jpeg",e=(u=v.value)==null?void 0:u.getDataURL({type:i,pixelRatio:2});if(e!=null){var m=document.createElement("a");m.href=e,m.download="echart."+i,m.click()}},h=n(!1),j=n({}),Z=()=>{h.value==!0?h.value=!1:(h.value=!0,q.locale("zh-cn",window.x_spreadsheet.$messages["zh-cn"]),new q("#x-spreadsheet",{showToolbar:!1,showBottomBar:!1,view:{height:()=>document.documentElement.clientHeight/2,width:()=>document.documentElement.clientWidth}}).loadData({styles:[{bgcolor:"#f4f5f8",textwrap:!0,color:"#900b09",border:{top:["thin","#0366d6"],bottom:["thin","#0366d6"],right:["thin","#0366d6"],left:["thin","#0366d6"]}}],rows:j.value}).change(i=>{k.value=se(i),d("data")}))},W=n(),ee=async i=>{const e=i.file,m=new FileReader;m.onload=u=>{try{if(!u.target)return;const f=u.target.result,p=ne(f,{type:"binary"});let _=0,c=[],g=[];for(let x in p.Sheets){if(_>0)continue;const w=ue.sheet_to_json(p.Sheets[x],{header:["0","1"]});if(w.length!=0){for(let b in w)if(w[b]!=null){let V=w;c.push(V[b][0]),g.push(V[b][1])}_++}}C.value=c,y.value=g,k.value=G([C.value,y.value]),d("data"),j.value=H([C,y])}catch(f){console.log("error"),console.log(f)}},m.readAsArrayBuffer(e)},te=i=>{U.value.clearFiles();const e=i[0];e.uid=_e(),U.value.handleStart(e),U.value.submit()};return ve(()=>{k.value=G([C.value,y.value]),B.value=document.getElementById("main"),d("size"),M(),j.value=H([C,y])}),(i,e)=>{const m=r("el-input-number"),u=r("el-text"),f=r("el-button"),p=r("el-radio"),_=r("el-radio-group"),c=r("el-upload"),g=r("el-tooltip"),x=r("el-collapse-item"),w=r("el-radio-button"),b=r("el-divider"),V=r("el-switch"),I=r("el-input"),le=r("el-collapse"),ae=r("el-drawer");return fe(),pe("div",we,[t(ie,{title:J.title},null,8,["title"]),s("div",ge,[s("div",ce,[s("div",be,[t(m,{modelValue:T.value,"onUpdate:modelValue":e[0]||(e[0]=l=>T.value=l),min:1,max:100,step:5,onChange:e[1]||(e[1]=l=>d("scale")),"step-strictly":""},null,8,["modelValue"]),t(u,null,{default:a(()=>e[24]||(e[24]=[o("缩放：",-1)])),_:1,__:[24]})]),e[25]||(e[25]=s("div",{class:"flex justify-center items-center max-h-[500px] max-w-[1000px] overflow-auto"},[s("div",{id:"main",class:"bg-white"})],-1))]),s("div",Ve,[s("div",Ce,[t(f,{class:"w-full mb-3",type:"primary",size:"large",onClick:Q},{default:a(()=>e[26]||(e[26]=[o("下载图表",-1)])),_:1,__:[26]}),s("div",ye,[t(u,null,{default:a(()=>e[27]||(e[27]=[o("文件类型",-1)])),_:1,__:[27]}),t(_,{modelValue:O.value,"onUpdate:modelValue":e[2]||(e[2]=l=>O.value=l),class:"ml-4"},{default:a(()=>[t(p,{size:"large",label:"1"},{default:a(()=>e[28]||(e[28]=[o("PNG",-1)])),_:1,__:[28]}),t(p,{size:"large",label:"2"},{default:a(()=>e[29]||(e[29]=[o("JPEG",-1)])),_:1,__:[29]})]),_:1},8,["modelValue"])]),s("div",ke,[t(g,{class:"box-item",effect:"dark",content:"支持上传：xls, xlsx, csv文件",placement:"top-start"},{default:a(()=>[t(f,{class:"w-1/2"},{default:a(()=>[t(c,{"file-list":W.value,"onUpdate:fileList":e[3]||(e[3]=l=>W.value=l),class:"dataFileRef flex",ref_key:"dataFileRef",ref:U,accept:".xls,.xlsx,.csv","http-request":ee,"on-exceed":te,limit:1},{default:a(()=>e[30]||(e[30]=[o(" 上传数据 ",-1)])),_:1,__:[30]},8,["file-list"])]),_:1})]),_:1}),t(f,{class:"w-1/2",onClick:Z},{default:a(()=>e[31]||(e[31]=[o("编辑数据",-1)])),_:1,__:[31]})])]),t(le,{modelValue:N.value,"onUpdate:modelValue":e[22]||(e[22]=l=>N.value=l),onChange:Y,accordion:""},{default:a(()=>[t(x,{title:"画布设置",name:"1"},{default:a(()=>[s("div",he,[t(u,{class:"w-16 text-right"},{default:a(()=>e[32]||(e[32]=[o("宽度",-1)])),_:1,__:[32]}),t(m,{modelValue:S.value,"onUpdate:modelValue":e[4]||(e[4]=l=>S.value=l),min:1,max:4e3,step:10,"controls-position":"right",class:"h-8 w-60 max-w-[60%] ml-3",onChange:e[5]||(e[5]=l=>d("size"))},null,8,["modelValue"])]),s("div",Ue,[t(u,{class:"w-16 text-right"},{default:a(()=>e[33]||(e[33]=[o("高度",-1)])),_:1,__:[33]}),t(m,{modelValue:D.value,"onUpdate:modelValue":e[6]||(e[6]=l=>D.value=l),min:1,max:4e3,step:10,"controls-position":"right",class:"h-8 w-60 max-w-[60%] ml-3",onChange:e[7]||(e[7]=l=>d("size"))},null,8,["modelValue"])])]),_:1}),t(x,{title:"标题设置",name:"2"},{default:a(()=>[s("div",Se,[t(u,{class:"w-16 text-right"},{default:a(()=>e[34]||(e[34]=[o("位置",-1)])),_:1,__:[34]}),t(_,{modelValue:$.value,"onUpdate:modelValue":e[8]||(e[8]=l=>$.value=l),class:"ml-3",onChange:e[9]||(e[9]=l=>d("title"))},{default:a(()=>[t(w,{label:"left",value:"left"},{default:a(()=>e[35]||(e[35]=[o("左",-1)])),_:1,__:[35]}),t(w,{label:"center",value:"center"},{default:a(()=>e[36]||(e[36]=[o("中",-1)])),_:1,__:[36]}),t(w,{label:"right",value:"right"},{default:a(()=>e[37]||(e[37]=[o("右",-1)])),_:1,__:[37]})]),_:1},8,["modelValue"])]),t(b,{"content-position":"left",class:"pl-10"},{default:a(()=>e[38]||(e[38]=[o("标题",-1)])),_:1,__:[38]}),s("div",De,[t(u,{class:"w-16 text-right"},{default:a(()=>e[39]||(e[39]=[o("显示",-1)])),_:1,__:[39]}),t(V,{modelValue:A.value,"onUpdate:modelValue":e[10]||(e[10]=l=>A.value=l),class:"ml-3",onChange:e[11]||(e[11]=l=>d("title"))},null,8,["modelValue"])]),s("div",$e,[t(u,{class:"w-16 text-right"},{default:a(()=>e[40]||(e[40]=[o("标题",-1)])),_:1,__:[40]}),t(I,{class:"h-8 w-60 max-w-[60%] ml-3",modelValue:E.value,"onUpdate:modelValue":e[12]||(e[12]=l=>E.value=l),onBlur:e[13]||(e[13]=l=>d("title"))},null,8,["modelValue"])]),t(b,{"content-position":"left"},{default:a(()=>e[41]||(e[41]=[o("副标题",-1)])),_:1,__:[41]}),s("div",Ee,[t(u,{class:"w-16 text-right"},{default:a(()=>e[42]||(e[42]=[o("显示",-1)])),_:1,__:[42]}),t(V,{modelValue:P.value,"onUpdate:modelValue":e[14]||(e[14]=l=>P.value=l),class:"ml-3",onChange:e[15]||(e[15]=l=>d("title"))},null,8,["modelValue"])]),s("div",ze,[t(u,{class:"w-16 text-right"},{default:a(()=>e[43]||(e[43]=[o("副标题",-1)])),_:1,__:[43]}),t(I,{class:"h-8 w-60 max-w-[60%] ml-3",modelValue:z.value,"onUpdate:modelValue":e[16]||(e[16]=l=>z.value=l),onBlur:e[17]||(e[17]=l=>d("title"))},null,8,["modelValue"])])]),_:1}),t(x,{title:"水印设置",name:"4"},{default:a(()=>[s("div",Be,[t(u,{class:"w-16 text-right"},{default:a(()=>e[44]||(e[44]=[o("显示",-1)])),_:1,__:[44]}),t(V,{modelValue:F.value,"onUpdate:modelValue":e[18]||(e[18]=l=>F.value=l),class:"ml-3",onChange:e[19]||(e[19]=l=>d("watermark"))},null,8,["modelValue"])]),s("div",Te,[t(u,{class:"w-16 text-right"},{default:a(()=>e[45]||(e[45]=[o("水印内容",-1)])),_:1,__:[45]}),t(I,{class:"h-8 w-60 max-w-[60%] ml-3",modelValue:R.value,"onUpdate:modelValue":e[20]||(e[20]=l=>R.value=l),onChange:e[21]||(e[21]=l=>d("watermark"))},null,8,["modelValue"])])]),_:1})]),_:1},8,["modelValue"])])]),t(ae,{id:"x-spreadsheet",modelValue:h.value,"onUpdate:modelValue":e[23]||(e[23]=l=>h.value=l),direction:"btt","custom-class":"sheet",style:{}},null,8,["modelValue"]),t(de,{title:"描述"},{default:a(()=>[t(u,null,{default:a(()=>e[46]||(e[46]=[o(" 饼图是通过一个圆来展示数据，用圆内各扇形的角度来表示数据之间的占比关系。",-1),s("br",null,null,-1),o(" 能够很好地展示不同分类的变量之间或单个分类变量与整体之间的占比情况，常用来强调某个突出的分类变量或表示表示占比关系。",-1),s("br",null,null,-1),o(" 在线图表制作工具，在线制作饼图",-1),s("br",null,null,-1),o(" 支持导入表格并在线编辑表格生成饼图，支持png和jpeg格式导出",-1),s("br",null,null,-1),o(" 支持超全的自定义配置，轻松实现你的个性化图表需求",-1),s("br",null,null,-1)])),_:1,__:[46]})]),_:1})])}}});const Ie=xe(Oe,[["__scopeId","data-v-24df83e1"]]);export{Ie as default};
