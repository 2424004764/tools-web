import{_ as N}from"./DetailHeader.vue_vue_type_script_setup_true_lang-b888076e.js";import{_ as T}from"./ToolDetail.vue_vue_type_script_setup_true_lang-fd988973.js";import{d as h,v as b,w as U,r as d,b as c,c as g,i as o,f as a,h as n,p as H,j as r,t as f,g as E,B as C,s as j,_ as W}from"./index-a1588afe.js";const q={class:"flex flex-col mt-3 flex-1"},D={class:"p-4 rounded-2xl bg-white"},G={class:"flex flex-wrap gap-3 items-center"},I={key:0,class:"flex-1 min-w-[240px]"},J={class:"mt-4"},L={class:"mb-2 text-sm text-gray-600"},O={class:"mt-2 flex flex-wrap gap-2 button-container"},P={class:"mt-3"},Q={class:"mt-6"},X={key:0,class:"mt-2 text-xs text-gray-500"},Y={class:"mt-2 flex flex-wrap gap-2 button-container"},Z={class:"mt-3"},$=h({__name:"Hash",setup(ee){const S=b({title:"哈希校验/HMAC"}),e=b({algo:"SHA-256",text:"",hmacKey:"",textResult:"",fileResult:"",fileName:"",fileSize:0,loadingText:!1,loadingFile:!1,file:null}),m=l=>new TextEncoder().encode(l),x=l=>{const t=new Uint8Array(l);return Array.from(t).map(s=>s.toString(16).padStart(2,"0")).join("")},_=()=>{if(!window.crypto||!window.crypto.subtle)throw j.error("当前环境不支持 Web Crypto"),new Error("WebCrypto not available")},A=async(l,t)=>{_();const s=await crypto.subtle.digest({name:l},t);return x(s)},v=async()=>{try{if(e.loadingText=!0,e.algo==="HMAC-SHA256"){_();const l=await crypto.subtle.importKey("raw",m(e.hmacKey||""),{name:"HMAC",hash:"SHA-256"},!1,["sign"]),t=await crypto.subtle.sign("HMAC",l,m(e.text||""));e.textResult=x(t)}else{const l=await A(e.algo,m(e.text||"").buffer);e.textResult=l}}catch{}finally{e.loadingText=!1}},w=async l=>{try{if(e.loadingFile=!0,e.algo==="HMAC-SHA256"){_();const t=await crypto.subtle.importKey("raw",m(e.hmacKey||""),{name:"HMAC",hash:"SHA-256"},!1,["sign"]),s=await l.arrayBuffer(),y=await crypto.subtle.sign("HMAC",t,s);e.fileResult=x(y)}else{const t=await l.arrayBuffer(),s=await A(e.algo,t);e.fileResult=s}}catch{}finally{e.loadingFile=!1}},V=async l=>{const t=l.target,s=t.files&&t.files[0];s&&(e.fileName=s.name,e.fileSize=s.size,e.file=s,await w(s))},k=()=>{e.text="",e.textResult=""},M=l=>{e.fileName="",e.fileSize=0,e.fileResult="",e.file=null,e.loadingFile=!1,l&&(l.value="")},R=()=>C(e.textResult),F=()=>C(e.fileResult),B=()=>{e.text="The quick brown fox jumps over the lazy dog"};return U(()=>[e.text,e.algo,e.hmacKey],()=>{v(),e.file&&w(e.file)}),(l,t)=>{const s=d("el-option"),y=d("el-select"),p=d("el-input"),z=d("el-link"),u=d("el-button"),K=d("el-text");return c(),g("div",q,[o(N,{title:S.title},null,8,["title"]),a("div",D,[a("div",G,[a("div",null,[o(y,{modelValue:e.algo,"onUpdate:modelValue":t[0]||(t[0]=i=>e.algo=i),placeholder:"选择算法",style:{width:"180px"}},{default:n(()=>[o(s,{label:"SHA-1",value:"SHA-1"}),o(s,{label:"SHA-256",value:"SHA-256"}),o(s,{label:"SHA-512",value:"SHA-512"}),o(s,{label:"HMAC-SHA256",value:"HMAC-SHA256"})]),_:1},8,["modelValue"])]),e.algo==="HMAC-SHA256"?(c(),g("div",I,[o(p,{modelValue:e.hmacKey,"onUpdate:modelValue":t[1]||(t[1]=i=>e.hmacKey=i),placeholder:"HMAC 密钥（文本）"},null,8,["modelValue"])])):H("",!0)]),a("div",J,[a("div",L,[t[7]||(t[7]=r(" 文本摘要/HMAC ",-1)),o(z,{class:"ml-2",type:"primary",onClick:B},{default:n(()=>t[6]||(t[6]=[r("填充示例",-1)])),_:1,__:[6]})]),o(p,{modelValue:e.text,"onUpdate:modelValue":t[2]||(t[2]=i=>e.text=i),type:"textarea",rows:6,placeholder:"在此输入文本"},null,8,["modelValue"]),a("div",O,[o(u,{onClick:R},{default:n(()=>t[8]||(t[8]=[r("复制结果",-1)])),_:1,__:[8]}),o(u,{type:"danger",onClick:k},{default:n(()=>t[9]||(t[9]=[r("清空",-1)])),_:1,__:[9]})]),a("div",P,[t[10]||(t[10]=a("div",{class:"text-sm text-gray-600 mb-1"},"结果：",-1)),o(p,{modelValue:e.textResult,"onUpdate:modelValue":t[3]||(t[3]=i=>e.textResult=i),readonly:""},null,8,["modelValue"])])]),a("div",Q,[t[15]||(t[15]=a("div",{class:"mb-2 text-sm text-gray-600"},"文件摘要/HMAC",-1)),a("input",{type:"file",onChange:V},null,32),e.fileName?(c(),g("div",X," 文件："+f(e.fileName)+"（"+f(e.fileSize)+" 字节 ≈ "+f((e.fileSize/1024).toFixed(2))+" KB / "+f((e.fileSize/1024/1024).toFixed(2))+" MB / "+f((e.fileSize/1024/1024/1024).toFixed(2))+" GB） ",1)):H("",!0),a("div",Y,[o(u,{onClick:F},{default:n(()=>t[11]||(t[11]=[r("复制结果",-1)])),_:1,__:[11]}),o(u,{type:"danger",onClick:t[4]||(t[4]=i=>M(i==null?void 0:i.target))},{default:n(()=>t[12]||(t[12]=[r("清空",-1)])),_:1,__:[12]}),e.loadingFile?(c(),E(u,{key:0,loading:!0,disabled:""},{default:n(()=>t[13]||(t[13]=[r("计算中",-1)])),_:1,__:[13]})):H("",!0)]),a("div",Z,[t[14]||(t[14]=a("div",{class:"text-sm text-gray-600 mb-1"},"结果：",-1)),o(p,{modelValue:e.fileResult,"onUpdate:modelValue":t[5]||(t[5]=i=>e.fileResult=i),readonly:""},null,8,["modelValue"])])])]),o(T,{title:"描述"},{default:n(()=>[o(K,null,{default:n(()=>t[16]||(t[16]=[r(" 支持 SHA-1、SHA-256、SHA-512 与 HMAC-SHA256；文本/文件摘要；结果十六进制显示，可复制。 ",-1)])),_:1,__:[16]})]),_:1})])}}});const oe=W($,[["__scopeId","data-v-14f6807c"]]);export{oe as default};
