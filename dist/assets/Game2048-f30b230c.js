import{_ as re}from"./DetailHeader.vue_vue_type_script_setup_true_lang-ef7f246f.js";import{_ as oe}from"./ToolDetail.vue_vue_type_script_setup_true_lang-3f06b788.js";import{d as se,z as k,r as le,o as ie,e as ne,f as W,g as d,h as c,m as M,j as i,t as u,k as ae,l as E,p as g,v as h,U as $,F as D,i as H,K as de,x as ce,_ as ue}from"./index-3b1783ed.js";const ge={class:"flex flex-col mt-3 ml-4 flex-1 mr-3"},fe={class:"p-6 rounded-2xl bg-white shadow-sm border border-gray-200"},me={class:"max-w-2xl mx-auto"},ve={class:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"},he={class:"text-center bg-blue-50 p-3 rounded-lg border border-blue-200"},be={class:"text-xl font-bold text-blue-600"},pe={class:"text-center bg-green-50 p-3 rounded-lg border border-green-200"},Se={class:"text-xl font-bold text-green-600"},xe={class:"text-center bg-purple-50 p-3 rounded-lg border border-purple-200"},we={class:"text-xl font-bold text-purple-600"},_e={class:"text-center bg-indigo-50 p-3 rounded-lg border border-indigo-200"},ye={class:"text-xl font-bold text-indigo-600"},ze={class:"flex justify-center mb-6"},ke={class:"flex justify-center mb-6"},Me={key:0,class:"text-center mb-6"},Ee={key:1,class:"text-center mb-6"},De={class:"bg-red-50 border-2 border-red-300 rounded-lg p-4 shadow-md"},Le={class:"text-red-600"},Te={class:"text-red-600"},je={key:0,class:"text-yellow-600 font-medium mt-2"},Ce=se({__name:"Game2048",setup(Ae){const J=k({title:"2048"}),s=k({isPlaying:!1,score:0,highScore:0,gameOver:!1,won:!1,bestTile:0}),l=k({gridSize:(window.innerWidth<768,4),cellSize:window.innerWidth<768?60:80,cellGap:8}),n=le([]),q=()=>{n.value=Array(l.gridSize).fill(null).map(()=>Array(l.gridSize).fill(0))},f=()=>{const t=[];for(let e=0;e<l.gridSize;e++)for(let o=0;o<l.gridSize;o++)n.value[e][o]===0&&t.push({row:e,col:o});if(t.length>0){const e=t[Math.floor(Math.random()*t.length)];n.value[e.row][e.col]=Math.random()<.9?2:4}},b=()=>{for(let t=0;t<l.gridSize;t++)for(let e=0;e<l.gridSize;e++)if(n.value[t][e]===0)return!1;for(let t=0;t<l.gridSize;t++)for(let e=0;e<l.gridSize;e++){const o=n.value[t][e];if(e<l.gridSize-1&&n.value[t][e+1]===o||t<l.gridSize-1&&n.value[t+1][e]===o)return!1}return!0},p=()=>{for(let t=0;t<l.gridSize;t++)for(let e=0;e<l.gridSize;e++)if(n.value[t][e]>=2048)return!0;return!1},S=()=>{let t=0;for(let e=0;e<l.gridSize;e++)for(let o=0;o<l.gridSize;o++)n.value[e][o]>t&&(t=n.value[e][o]);s.bestTile=Math.max(s.bestTile,t),s.score>s.highScore&&(s.highScore=s.score,localStorage.setItem("game2048HighScore",s.highScore.toString()))},x=()=>{let t=!1;for(let e=0;e<l.gridSize;e++){const o=n.value[e].filter(r=>r!==0);for(let r=0;r<o.length-1;r++)o[r]===o[r+1]&&(o[r]*=2,s.score+=o[r],o.splice(r+1,1));const a=o.concat(Array(l.gridSize-o.length).fill(0));JSON.stringify(n.value[e])!==JSON.stringify(a)&&(t=!0),n.value[e]=a}return t},w=()=>{let t=!1;for(let e=0;e<l.gridSize;e++){const o=n.value[e].filter(r=>r!==0);for(let r=o.length-1;r>0;r--)o[r]===o[r-1]&&(o[r]*=2,s.score+=o[r],o.splice(r-1,1),r--);const a=Array(l.gridSize-o.length).fill(0).concat(o);JSON.stringify(n.value[e])!==JSON.stringify(a)&&(t=!0),n.value[e]=a}return t},_=()=>{let t=!1;for(let e=0;e<l.gridSize;e++){const o=[];for(let r=0;r<l.gridSize;r++)n.value[r][e]!==0&&o.push(n.value[r][e]);for(let r=0;r<o.length-1;r++)o[r]===o[r+1]&&(o[r]*=2,s.score+=o[r],o.splice(r+1,1));const a=o.concat(Array(l.gridSize-o.length).fill(0));for(let r=0;r<l.gridSize;r++)n.value[r][e]!==a[r]&&(t=!0),n.value[r][e]=a[r]}return t},y=()=>{let t=!1;for(let e=0;e<l.gridSize;e++){const o=[];for(let r=0;r<l.gridSize;r++)n.value[r][e]!==0&&o.push(n.value[r][e]);for(let r=o.length-1;r>0;r--)o[r]===o[r-1]&&(o[r]*=2,s.score+=o[r],o.splice(r-1,1),r--);const a=Array(l.gridSize-o.length).fill(0).concat(o);for(let r=0;r<l.gridSize;r++)n.value[r][e]!==a[r]&&(t=!0),n.value[r][e]=a[r]}return t},L=t=>{if(!s.isPlaying)return;let e=!1;switch(t.key){case"ArrowLeft":case"a":case"A":t.preventDefault(),e=x();break;case"ArrowRight":case"d":case"D":t.preventDefault(),e=w();break;case"ArrowUp":case"w":case"W":t.preventDefault(),e=_();break;case"ArrowDown":case"s":case"S":t.preventDefault(),e=y();break}e&&(f(),S(),p()&&!s.won&&(s.won=!0),b()&&z())},T=()=>{s.isPlaying=!0,s.gameOver=!1,s.won=!1,s.score=0,q(),f(),f()},z=()=>{s.isPlaying=!1,s.gameOver=!0,localStorage.setItem("game2048HighScore",s.highScore.toString())},F=()=>{T()},K=t=>({0:"bg-gray-200",2:"bg-tile-2",4:"bg-tile-4",8:"bg-tile-8",16:"bg-tile-16",32:"bg-tile-32",64:"bg-tile-64",128:"bg-tile-128",256:"bg-tile-256",512:"bg-tile-512",1024:"bg-tile-1024",2048:"bg-tile-2048"})[t]||"bg-tile-dark",Q=t=>t<=4?"text-tile-text-dark":"text-tile-text-light";let j=0,C=0,A=0,O=0;const P=t=>{if(!s.isPlaying)return;const e=t.touches[0];j=e.clientX,C=e.clientY,t.preventDefault()},X=t=>{s.isPlaying&&t.preventDefault()},Y=t=>{if(!s.isPlaying)return;const e=t.changedTouches[0];A=e.clientX,O=e.clientY,t.preventDefault(),Z()},Z=()=>{const t=A-j,e=O-C,o=30;let a=!1;Math.abs(t)>Math.abs(e)?Math.abs(t)>o&&(t>0?a=w():a=x()):Math.abs(e)>o&&(e>0?a=y():a=_()),a&&(f(),S(),p()&&!s.won&&(s.won=!0),b()&&z())};let N=0,G=0,B=0,I=0,v=!1;const R=t=>{s.isPlaying&&(v=!0,N=t.clientX,G=t.clientY)},U=t=>{!s.isPlaying||!v||t.preventDefault()},V=t=>{!s.isPlaying||!v||(v=!1,B=t.clientX,I=t.clientY,ee())},ee=()=>{const t=B-N,e=I-G,o=30;let a=!1;Math.abs(t)>Math.abs(e)?Math.abs(t)>o&&(t>0?a=w():a=x()):Math.abs(e)>o&&(e>0?a=y():a=_()),a&&(f(),S(),p()&&!s.won&&(s.won=!0),b()&&z())};return ie(()=>{const t=localStorage.getItem("game2048HighScore");t&&(s.highScore=parseInt(t)),window.addEventListener("keydown",L);const e=document.querySelector(".game-board");e&&(e.addEventListener("touchstart",P,{passive:!1}),e.addEventListener("touchmove",X,{passive:!1}),e.addEventListener("touchend",Y,{passive:!1}),e.addEventListener("mousedown",R),e.addEventListener("mousemove",U),e.addEventListener("mouseup",V)),T()}),ne(()=>{window.removeEventListener("keydown",L);const t=document.querySelector(".game-board");t&&(t.removeEventListener("touchstart",P),t.removeEventListener("touchmove",X),t.removeEventListener("touchend",Y),t.removeEventListener("mousedown",R),t.removeEventListener("mousemove",U),t.removeEventListener("mouseup",V))}),(t,e)=>{const o=W("el-button"),a=W("el-text");return d(),c("div",ge,[M(re,{title:J.title},null,8,["title"]),i("div",fe,[i("div",me,[i("div",ve,[i("div",he,[e[0]||(e[0]=i("h3",{class:"text-sm font-medium text-blue-900"},"得分",-1)),i("p",be,u(s.score),1)]),i("div",pe,[e[1]||(e[1]=i("h3",{class:"text-sm font-medium text-green-900"},"最高分",-1)),i("p",Se,u(s.highScore),1)]),i("div",xe,[e[2]||(e[2]=i("h3",{class:"text-sm font-medium text-purple-900"},"最佳方块",-1)),i("p",we,u(s.bestTile),1)]),i("div",_e,[e[3]||(e[3]=i("h3",{class:"text-sm font-medium text-indigo-900"},"游戏板",-1)),i("p",ye,u(l.gridSize)+"×"+u(l.gridSize),1)])]),i("div",ze,[s.gameOver?(d(),ae(o,{key:0,onClick:F,type:"success",class:"bg-green-500 hover:bg-green-600 border-green-600"},{default:E(()=>e[4]||(e[4]=[g(" 重新开始 ",-1)])),_:1,__:[4]})):h("",!0)]),i("div",ke,[i("div",{class:"game-board bg-gray-300 p-4 rounded-lg shadow-lg",style:$({display:"grid",gridTemplateColumns:`repeat(${l.gridSize}, ${l.cellSize}px)`,gap:l.cellGap+"px"})},[(d(!0),c(D,null,H(n.value,(r,te)=>(d(),c(D,{key:`row-${te}`},[(d(!0),c(D,null,H(r,m=>(d(),c("div",{key:Math.random(),class:de(["bg-gray-200 rounded-lg flex items-center justify-center font-bold transition-all duration-200",[K(m),Q(m)]]),style:$({width:l.cellSize+"px",height:l.cellSize+"px",fontSize:m>=1e3?"1.5rem":m>=100?"1.75rem":"2rem"})},u(m||""),7))),128))],64))),128))],4)]),s.won&&!s.gameOver?(d(),c("div",Me,e[5]||(e[5]=[i("div",{class:"bg-yellow-50 border-2 border-yellow-300 rounded-lg p-4 shadow-md"},[i("h3",{class:"text-lg font-medium text-yellow-900 mb-2"},"恭喜获胜！"),i("p",{class:"text-yellow-600"},"你已经达到了2048！可以继续游戏挑战更高分数")],-1)]))):h("",!0),s.gameOver?(d(),c("div",Ee,[i("div",De,[e[6]||(e[6]=i("h3",{class:"text-lg font-medium text-red-900 mb-2"},"游戏结束！",-1)),i("p",Le,"最终得分: "+u(s.score),1),i("p",Te,"最佳方块: "+u(s.bestTile),1),s.score>s.highScore?(d(),c("p",je," 新纪录！恭喜你创造了新的最高分！ ")):h("",!0)])])):h("",!0),e[7]||(e[7]=ce('<div class="bg-gray-50 rounded-lg p-4 border-2 border-gray-200 shadow-sm" data-v-703401d1><h3 class="text-lg font-medium text-gray-900 mb-3" data-v-703401d1>游戏说明</h3><div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600" data-v-703401d1><div class="bg-white p-3 rounded border border-gray-200" data-v-703401d1><p data-v-703401d1><strong class="text-blue-600" data-v-703401d1>游戏目标：</strong>通过滑动合并相同数字，达到2048</p><p data-v-703401d1><strong class="text-blue-600" data-v-703401d1>操作方式：</strong>键盘方向键/WASD，鼠标拖拽，触摸滑动</p></div><div class="bg-white p-3 rounded border border-gray-200" data-v-703401d1><p data-v-703401d1><strong class="text-green-600" data-v-703401d1>合并规则：</strong>相同数字的方块相撞时会合并</p><p data-v-703401d1><strong class="text-red-600" data-v-703401d1>挑战：</strong>每次移动后会随机出现新的数字</p></div></div></div>',1))])]),M(oe,{title:"描述"},{default:E(()=>[M(a,null,{default:E(()=>e[8]||(e[8]=[g(" 经典2048益智游戏，考验你的策略思维和数字逻辑：",-1),i("br",null,null,-1),i("br",null,null,-1),g(" 游戏特色：经典2048玩法，数字合并机制，实时得分统计",-1),i("br",null,null,-1),g(" 操作方式：使用方向键控制方块移动，相同数字自动合并",-1),i("br",null,null,-1),g(" 游戏目标：通过策略性移动，将数字合并到2048或更高",-1),i("br",null,null,-1),g(" 训练效果：锻炼逻辑思维、策略规划和空间布局能力",-1),i("br",null,null,-1),i("br",null,null,-1),g(" 适合所有年龄段，是经典的益智游戏。 ",-1)])),_:1,__:[8]})]),_:1})])}}});const Ye=ue(Ce,[["__scopeId","data-v-703401d1"]]);export{Ye as default};
