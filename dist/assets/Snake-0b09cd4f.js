import{_ as se}from"./DetailHeader.vue_vue_type_script_setup_true_lang-a2c7af82.js";import{_ as oe}from"./ToolDetail.vue_vue_type_script_setup_true_lang-ae128169.js";import{d as ae,z as N,r as O,o as re,e as ne,f as D,g as i,h as u,m,j as s,t as z,l as g,p as c,F as P,i as C,U as p,k as V,v as w,x as de,_ as ie}from"./index-18fe0c39.js";const ce={class:"flex flex-col mt-3 ml-4 flex-1 mr-3"},ue={class:"p-6 rounded-2xl bg-white shadow-sm border border-gray-200"},ge={class:"max-w-2xl mx-auto"},be={class:"flex justify-between items-center mb-6"},me={class:"text-center bg-blue-50 p-4 rounded-lg border border-blue-200 flex-1 mx-2"},ve={class:"text-2xl font-bold text-blue-600"},fe={class:"text-center bg-green-50 p-4 rounded-lg border border-green-200 flex-1 mx-2 relative"},xe={class:"flex items-center justify-center space-x-2"},ye={class:"text-2xl font-bold text-green-600"},he={class:"text-center bg-purple-50 p-4 rounded-lg border border-purple-200 flex-1 mx-2"},pe={class:"text-2xl font-bold text-purple-600"},_e={class:"flex justify-between items-center mb-6"},Se={class:"flex items-center space-x-6"},we={class:"flex items-center space-x-3"},ke={class:"flex items-center space-x-3"},ze={class:"flex justify-center mb-6"},Pe={class:"flex justify-center space-x-4 mb-6"},Ce={class:"lg:hidden flex justify-center mb-6"},Ie={class:"bg-gray-100 rounded-lg p-4 border border-gray-300"},Me={class:"grid grid-cols-3 gap-2"},Oe={class:"col-start-2"},De={class:"col-start-1 row-start-2"},Ve={class:"col-start-2 row-start-2"},Te={class:"col-start-3 row-start-2"},$e={key:0,class:"text-center mb-6"},He={class:"bg-red-50 border-2 border-red-300 rounded-lg p-4 shadow-md"},je={class:"text-red-600"},Ae={class:"text-purple-600"},Fe={key:0,class:"text-green-600 font-medium"},Ne=ae({__name:"Snake",setup(Le){const X=N({title:"贪吃蛇"}),t=N({isPlaying:!1,score:0,highScore:0,gameOver:!1,gameTime:0,hasStarted:!1}),o=N({gridSize:window.innerWidth<1024?10:20,cellSize:window.innerWidth<1024?25:20,speed:150,scorePerFood:1}),Y=[{label:"慢速",value:200},{label:"正常",value:150},{label:"快速",value:100},{label:"极速",value:50}],q=()=>{const l=o.gridSize,e=4,r=Math.floor(Math.random()*(l-2*e))+e,v=Math.floor(Math.random()*(l-2*e))+e,h=[{x:1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:-1}],S=h[Math.floor(Math.random()*h.length)],a={x:r-S.x,y:v-S.y},x={x:r-S.x*2,y:v-S.y*2};return[{x:r,y:v},a,x]},J=l=>{if(l.length<2)return{x:1,y:0};const e=l[0],r=l[1],v=e.x-r.x,h=e.y-r.y;return{x:v,y:h}},L=()=>{const l=o.gridSize,e=Math.floor(Math.random()*l),r=Math.floor(Math.random()*l);return{x:e,y:r}};let k=[],_={x:0,y:0},T={x:1,y:0};const f=O([]),y=O({x:0,y:0}),n=O({x:1,y:0}),W=()=>{for(k=q(),_=L(),T=J(k);k.some(l=>l.x===_.x&&l.y===_.y);)_=L();f.value=[...k],y.value={..._},n.value={...T}};W();let d=null,b=null;const U=()=>{const l=Math.floor(Math.random()*o.gridSize),e=Math.floor(Math.random()*o.gridSize);f.value.some(v=>v.x===l&&v.y===e)?U():y.value={x:l,y:e}},Q=l=>l.x<0||l.x>=o.gridSize||l.y<0||l.y>=o.gridSize?!0:f.value.some(e=>e.x===l.x&&e.y===l.y),$=()=>{if(!t.isPlaying)return;const l={...f.value[0]};if(l.x+=n.value.x,l.y+=n.value.y,Q(l)){Z();return}f.value.unshift(l),l.x===y.value.x&&l.y===y.value.y?(t.score+=o.scorePerFood,t.score>t.highScore&&(t.highScore=t.score,j()),U()):f.value.pop()},Z=()=>{t.isPlaying=!1,t.gameOver=!0,t.score>t.highScore&&(t.highScore=t.score,j()),d&&(clearInterval(d),d=null),b&&(clearInterval(b),b=null)},B=l=>{const e=Math.floor(l/60),r=l%60;return`${e.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`},G=()=>{const l=t.hasStarted&&!t.gameOver;t.isPlaying=!0,t.gameOver=!1,l||(t.score=0,t.gameTime=0,f.value=[...k],y.value={..._},n.value={...T}),d&&clearInterval(d),b&&clearInterval(b),d=setInterval($,o.speed),b=setInterval(()=>{t.isPlaying&&t.gameTime++},1e3),t.hasStarted=!0},H=()=>{t.isPlaying?(t.isPlaying=!1,d&&(clearInterval(d),d=null),b&&(clearInterval(b),b=null)):(t.isPlaying=!0,d=setInterval($,o.speed),b=setInterval(()=>{t.isPlaying&&t.gameTime++},1e3))},E=()=>{d&&clearInterval(d),W(),t.hasStarted=!1,G()},ee=()=>{d&&t.isPlaying&&(clearInterval(d),d=setInterval($,o.speed))},I=l=>{if(t.isPlaying)switch(console.log("_direction",l),l){case"up":n.value.y===0&&(n.value={x:0,y:-1});break;case"down":n.value.y===0&&(n.value={x:0,y:1});break;case"left":n.value.x===0&&(n.value={x:-1,y:0});break;case"right":n.value.x===0&&(n.value={x:1,y:0});break}},R=l=>{if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"," ","w","a","s","d","W","A","S","D"].includes(l.key)&&l.preventDefault(),!(!t.isPlaying&&l.key!==" "))switch(l.key.toLowerCase()){case"arrowup":case"w":n.value.y===0&&(n.value={x:0,y:-1});break;case"arrowdown":case"s":n.value.y===0&&(n.value={x:0,y:1});break;case"arrowleft":case"a":n.value.x===0&&(n.value={x:-1,y:0});break;case"arrowright":case"d":n.value.x===0&&(n.value={x:1,y:0});break;case" ":t.gameOver?E():H();break}};re(()=>{document.addEventListener("keydown",R),te()}),ne(()=>{document.removeEventListener("keydown",R),d&&clearInterval(d),b&&clearInterval(b),j()});const te=()=>{try{const l=localStorage.getItem("snakeHighScore");if(l){const e=parseInt(l);!isNaN(e)&&e>=0&&(t.highScore=e)}}catch(l){console.error("加载最高分失败:",l)}},j=()=>{try{localStorage.setItem("snakeHighScore",t.highScore.toString())}catch(l){console.error("保存最高分失败:",l)}},le=()=>{t.highScore=0;try{localStorage.removeItem("snakeHighScore")}catch(l){console.error("清空最高分失败:",l)}},M=o.gridSize*o.cellSize,K=[{name:"经典绿色",head:"#15803d",body:"#22c55e",food:"#ef4444"},{name:"蓝色主题",head:"#1d4ed8",body:"#3b82f6",food:"#f59e0b"},{name:"紫色主题",head:"#7c3aed",body:"#a855f7",food:"#10b981"},{name:"橙色主题",head:"#c2410c",body:"#f97316",food:"#8b5cf6"},{name:"粉色主题",head:"#be185d",body:"#ec4899",food:"#06b6d4"},{name:"红色主题",head:"#b91c1c",body:"#ef4444",food:"#10b981"},{name:"青色主题",head:"#0f766e",body:"#14b8a6",food:"#f97316"},{name:"黄色主题",head:"#a16207",body:"#eab308",food:"#8b5cf6"},{name:"灰色主题",head:"#374151",body:"#6b7280",food:"#ef4444"},{name:"靛蓝主题",head:"#3730a3",body:"#6366f1",food:"#f59e0b"},{name:"青绿主题",head:"#047857",body:"#10b981",food:"#f97316"},{name:"玫瑰主题",head:"#be123c",body:"#f43f5e",food:"#06b6d4"}],A=O(0),F=()=>K[A.value];return(l,e)=>{const r=D("el-button"),v=D("el-option"),h=D("el-select"),S=D("el-text");return i(),u("div",ce,[m(se,{title:X.title},null,8,["title"]),s("div",ue,[s("div",ge,[s("div",be,[s("div",me,[e[6]||(e[6]=s("h3",{class:"text-lg font-medium text-blue-900"},"得分",-1)),s("p",ve,z(t.score),1)]),s("div",fe,[e[8]||(e[8]=s("h3",{class:"text-lg font-medium text-green-900"},"最高分",-1)),s("div",xe,[s("p",ye,z(t.highScore),1),m(r,{onClick:le,type:"danger",size:"small",disabled:t.isPlaying||!t.gameOver&&t.gameTime>0,class:"bg-red-500 hover:bg-red-600 border-red-600 text-xs h-6 px-2"},{default:g(()=>e[7]||(e[7]=[c(" 清空 ",-1)])),_:1,__:[7]},8,["disabled"])])]),s("div",he,[e[9]||(e[9]=s("h3",{class:"text-lg font-medium text-purple-900"},"游戏时间",-1)),s("p",pe,z(B(t.gameTime)),1)])]),s("div",_e,[s("div",Se,[s("div",we,[e[10]||(e[10]=s("label",{class:"text-sm font-medium text-gray-700 whitespace-nowrap"},"游戏速度：",-1)),m(h,{modelValue:o.speed,"onUpdate:modelValue":e[0]||(e[0]=a=>o.speed=a),onChange:ee,disabled:t.isPlaying,style:{width:"100px"}},{default:g(()=>[(i(),u(P,null,C(Y,a=>m(v,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","disabled"])]),s("div",ke,[e[11]||(e[11]=s("label",{class:"text-sm font-medium text-gray-700 whitespace-nowrap"},"颜色主题：",-1)),m(h,{modelValue:A.value,"onUpdate:modelValue":e[1]||(e[1]=a=>A.value=a),disabled:t.isPlaying,style:{width:"120px"}},{default:g(()=>[(i(),u(P,null,C(K,(a,x)=>m(v,{key:x,label:a.name,value:x},null,8,["label","value"])),64))]),_:1},8,["modelValue","disabled"])])])]),s("div",ze,[s("div",{class:"bg-gray-100 relative shadow-lg",style:p({width:M+"px",height:M+"px",maxWidth:"100%",maxHeight:"60vh"})},[(i(!0),u(P,null,C(o.gridSize-1,a=>(i(),u("div",{key:`h-${a}`,class:"absolute bg-gray-300",style:p({width:"1px",height:M+"px",left:a*o.cellSize+"px",top:"0px"})},null,4))),128)),(i(!0),u(P,null,C(o.gridSize-1,a=>(i(),u("div",{key:`v-${a}`,class:"absolute bg-gray-300",style:p({height:"1px",width:M+"px",left:"0px",top:a*o.cellSize+"px"})},null,4))),128)),(i(!0),u(P,null,C(f.value,(a,x)=>(i(),u("div",{key:x,class:"absolute shadow-sm",style:p({width:o.cellSize-1+"px",height:o.cellSize-1+"px",left:a.x*o.cellSize+"px",top:a.y*o.cellSize+"px",zIndex:x===0?2:1})},[x===0?(i(),u("div",{key:0,class:"w-full h-full rounded-sm",style:p({backgroundColor:F().head})},null,4)):(i(),u("div",{key:1,class:"w-full h-full rounded-sm",style:p({backgroundColor:F().body})},null,4))],4))),128)),s("div",{class:"absolute rounded-full shadow-md animate-pulse",style:p({width:o.cellSize-2+"px",height:o.cellSize-2+"px",left:y.value.x*o.cellSize+1+"px",top:y.value.y*o.cellSize+1+"px",zIndex:3,backgroundColor:F().food})},null,4)],4)]),s("div",Pe,[!t.isPlaying&&!t.gameOver&&!t.hasStarted?(i(),V(r,{key:0,onClick:G,type:"primary",class:"bg-blue-500 hover:bg-blue-600 border-blue-600"},{default:g(()=>e[12]||(e[12]=[c(" 开始游戏 ",-1)])),_:1,__:[12]})):w("",!0),t.isPlaying?(i(),V(r,{key:1,onClick:H,type:"warning",class:"bg-orange-500 hover:bg-orange-600 border-orange-600"},{default:g(()=>e[13]||(e[13]=[c(" 暂停 ",-1)])),_:1,__:[13]})):w("",!0),!t.isPlaying&&!t.gameOver&&t.hasStarted?(i(),V(r,{key:2,onClick:H,type:"success",class:"bg-green-500 hover:bg-green-600 border-green-600"},{default:g(()=>e[14]||(e[14]=[c(" 继续游戏 ",-1)])),_:1,__:[14]})):w("",!0),t.gameOver?(i(),V(r,{key:3,onClick:E,type:"success",class:"bg-green-500 hover:bg-green-600 border-green-600"},{default:g(()=>e[15]||(e[15]=[c(" 重新开始 ",-1)])),_:1,__:[15]})):w("",!0)]),s("div",Ce,[s("div",Ie,[e[20]||(e[20]=s("h3",{class:"text-center text-sm font-medium text-gray-700 mb-3"}," 方向控制 ",-1)),s("div",Me,[s("div",Oe,[m(r,{onClick:e[2]||(e[2]=a=>I("up")),disabled:!t.isPlaying,class:"w-12 h-12 bg-blue-500 hover:bg-blue-600 text-white"},{default:g(()=>e[16]||(e[16]=[c(" ↑ ",-1)])),_:1,__:[16]},8,["disabled"])]),s("div",De,[m(r,{onClick:e[3]||(e[3]=a=>I("left")),disabled:!t.isPlaying,class:"w-12 h-12 bg-blue-500 hover:bg-blue-600 text-white"},{default:g(()=>e[17]||(e[17]=[c(" ← ",-1)])),_:1,__:[17]},8,["disabled"])]),s("div",Ve,[m(r,{onClick:e[4]||(e[4]=a=>I("down")),disabled:!t.isPlaying,class:"w-12 h-12 bg-blue-500 hover:bg-blue-600 text-white"},{default:g(()=>e[18]||(e[18]=[c(" ↓ ",-1)])),_:1,__:[18]},8,["disabled"])]),s("div",Te,[m(r,{onClick:e[5]||(e[5]=a=>I("right")),disabled:!t.isPlaying,class:"w-12 h-12 bg-blue-500 hover:bg-blue-600 text-white"},{default:g(()=>e[19]||(e[19]=[c(" → ",-1)])),_:1,__:[19]},8,["disabled"])])])])]),t.gameOver?(i(),u("div",$e,[s("div",He,[e[21]||(e[21]=s("h3",{class:"text-lg font-medium text-red-900 mb-2"},"游戏结束",-1)),s("p",je,"最终得分: "+z(t.score),1),s("p",Ae," 游戏时间: "+z(B(t.gameTime)),1),t.score>t.highScore?(i(),u("p",Fe," 新纪录！恭喜你创造了新的最高分！ ")):w("",!0)])])):w("",!0),e[22]||(e[22]=de('<div class="bg-gray-50 rounded-lg p-4 border-2 border-gray-200 shadow-sm" data-v-06edb117><h3 class="text-lg font-medium text-gray-900 mb-3" data-v-06edb117>操作说明</h3><div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600" data-v-06edb117><div class="bg-white p-3 rounded border border-gray-200" data-v-06edb117><p data-v-06edb117><strong class="text-blue-600" data-v-06edb117>方向键/WASD：</strong>控制蛇的移动方向 </p><p data-v-06edb117><strong class="text-blue-600" data-v-06edb117>空格键：</strong>暂停/继续游戏 </p></div><div class="bg-white p-3 rounded border border-gray-200" data-v-06edb117><p data-v-06edb117><strong class="text-green-600" data-v-06edb117>目标：</strong>吃到红色食物，让蛇变长 </p><p data-v-06edb117><strong class="text-red-600" data-v-06edb117>注意：</strong>不要撞墙或撞到自己 </p></div></div><div class="lg:hidden mt-4 bg-blue-50 p-3 rounded border border-blue-200" data-v-06edb117><p class="text-sm text-blue-700" data-v-06edb117><strong data-v-06edb117>移动端：</strong>使用下方虚拟方向键控制蛇的移动 </p></div></div>',1))])]),m(oe,{title:"描述"},{default:g(()=>[m(S,null,{default:g(()=>e[23]||(e[23]=[c(" 经典贪吃蛇游戏，支持键盘控制：",-1),s("br",null,null,-1),s("br",null,null,-1),c(" 游戏特色：流畅的操作体验，实时得分显示，最高分记录",-1),s("br",null,null,-1),c(" 操作方式：使用方向键或WASD控制蛇的移动，空格键暂停游戏",-1),s("br",null,null,-1),c(" 游戏目标：控制蛇吃到食物，让蛇变得越来越长",-1),s("br",null,null,-1),c(" 挑战模式：避免撞墙和撞到自己，挑战你的反应速度",-1),s("br",null,null,-1),s("br",null,null,-1),c(" 适合休闲娱乐，锻炼反应能力和手眼协调。 ",-1)])),_:1,__:[23]})]),_:1})])}}});const Ge=ie(Ne,[["__scopeId","data-v-06edb117"]]);export{Ge as default};
