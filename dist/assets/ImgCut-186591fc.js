import{_ as I}from"./DetailHeader.vue_vue_type_script_setup_true_lang-504c8539.js";import{_ as L}from"./ToolDetail.vue_vue_type_script_setup_true_lang-066fbc9d.js";import{d as R,k as N,A as p,H as $,P as E,o as M,r as v,b as c,c as m,h as l,f as i,w as u,i as _,M as U,F as B,e as D,x as S,C as z}from"./index-bd778040.js";const A={class:"flex flex-col mt-3 flex-1"},H={class:"p-4 rounded-2xl bg-white"},T={class:"flex mt-3"},q={class:"flex"},P={key:0,class:"mt-3 min-h-md bg-gray-100 p-3 mb-3 flex flex-col"},W={class:"mb-3"},j=["src"],G=["src"],J={key:1},Y=R({__name:"ImgCut",setup(K){const F=N({title:"图片切割"}),h=p(),o=p(3),d=p({}),y=p([]),g=p(),k=async t=>{let e=new FileReader;e.readAsDataURL(t.file),e.addEventListener("load",async()=>{const a=new Image;a.onload=()=>{d.value=a,w()},a.src=e.result},!1)},C=t=>{g.value.clearFiles();const e=t[0];e.uid=z(),g.value.handleStart(e),g.value.submit()},w=()=>{const t=document.createElement("canvas"),e=t.getContext("2d"),a=d.value,r=Math.floor(a.naturalWidth/o.value),s=Math.floor(a.naturalHeight/o.value),x=[];t.width=r,t.height=s;for(let f=0;f<o.value;f++)for(let n=0;n<o.value;n++)e==null||e.drawImage(a,n*r,f*s,r,s,0,0,r,s),x.push(t.toDataURL());y.value=x},b=$(()=>{const t=`width: ${d.value.width||800}px;`,e=`grid: repeat(${o.value}, 1fr) / repeat(${o.value}, 1fr);`;return t+e});return E(b,()=>{h.value&&w()}),M(()=>{}),(t,e)=>{const a=v("el-button"),r=v("el-upload"),s=v("el-text"),x=v("el-input-number"),f=v("el-empty");return c(),m("div",A,[l(I,{title:F.title},null,8,["title"]),i("div",H,[l(r,{"file-list":h.value,"onUpdate:fileList":e[0]||(e[0]=n=>h.value=n),class:"dataFileRef flex",ref_key:"dataFileRef",ref:g,accept:"image/*","http-request":k,"on-exceed":C,limit:1},{default:u(()=>[l(a,{type:"primary"},{default:u(()=>e[2]||(e[2]=[_("请上传需要切割的图片",-1)])),_:1,__:[2]})]),_:1},8,["file-list"]),i("div",T,[i("div",q,[l(s,null,{default:u(()=>e[3]||(e[3]=[_("行数和列数",-1)])),_:1,__:[3]}),l(x,{modelValue:o.value,"onUpdate:modelValue":e[1]||(e[1]=n=>o.value=n),min:1,max:10,class:"ml-3"},null,8,["modelValue"])])]),d.value.src?(c(),m("div",P,[i("div",W,[l(s,null,{default:u(()=>e[4]||(e[4]=[_("预览: ",-1)])),_:1,__:[4]}),i("div",{style:U(b.value),class:"grid gap-1 max-w-full"},[(c(!0),m(B,null,D(y.value,(n,V)=>(c(),m("img",{key:V,src:n,alt:"结果"},null,8,j))),128))],4)]),i("div",null,[l(s,null,{default:u(()=>e[5]||(e[5]=[_("原图: ",-1)])),_:1,__:[5]}),i("div",null,[d.value.src?(c(),m("img",{key:0,src:d.value.src,alt:"原图"},null,8,G)):S("",!0)])])])):(c(),m("div",J,[l(f,{"image-size":200,description:"无预览"})]))]),l(L,{title:"描述"},{default:u(()=>[l(s,null,{default:u(()=>e[6]||(e[6]=[_(" 将图片分割成四宫格、九宫格、十六宫格，支持自定义行与列；",-1),i("br",null,null,-1),_(" 比如：九宫格切图广泛应用于微信朋友圈，微博等社交媒体。 ",-1)])),_:1,__:[6]})]),_:1})])}}});export{Y as default};
