import{d as q,l as M,A as J,o as K,m as Q,r as I,b as u,c,i as S,f as a,t as v,g as Z,h as C,j as h,C as _,P as R,F as T,e as z,D as L,T as ee,I as te,_ as se}from"./index-62daae2f.js";import{_ as ae}from"./DetailHeader.vue_vue_type_script_setup_true_lang-3afe3b1b.js";import{_ as ie}from"./ToolDetail.vue_vue_type_script_setup_true_lang-3d718f57.js";const le={class:"flex flex-col mt-3 ml-4 flex-1 mr-3"},re={class:"p-6 rounded-2xl bg-white shadow-sm border border-gray-200"},ne={class:"max-w-4xl mx-auto"},oe={class:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6"},de={class:"text-center bg-blue-50 p-3 rounded-lg border border-blue-200"},ge={class:"text-xl font-bold text-blue-600"},ue={class:"text-center bg-green-50 p-3 rounded-lg border border-green-200"},ce={class:"text-xl font-bold text-green-600"},ve={class:"text-center bg-red-50 p-3 rounded-lg border border-red-200"},me={class:"text-xl font-bold text-red-600"},be={class:"text-center bg-purple-50 p-3 rounded-lg border border-purple-200"},he={class:"text-xl font-bold text-purple-600"},fe={class:"text-center bg-orange-50 p-3 rounded-lg border border-orange-200"},pe={class:"text-xl font-bold text-orange-600"},xe={class:"flex justify-center mb-6"},_e={class:"flex justify-center mb-6"},we=["onClick","onContextmenu","onTouchstart","onTouchend"],ye=["innerHTML"],Me={key:0,class:"text-center mb-6"},Se={class:"bg-green-50 border-2 border-green-300 rounded-lg p-4 shadow-md"},Ce={class:"text-green-600"},Te={key:0,class:"text-yellow-600 font-medium mt-2"},$e={key:1,class:"text-center mb-6"},ke={class:"bg-red-50 border-2 border-red-300 rounded-lg p-4 shadow-md"},Pe={class:"text-red-600"},Fe=q({__name:"Minesweeper",setup(Ie){const N=M({title:"扫雷"}),s=M({isPlaying:!1,gameOver:!1,won:!1,time:0,highScore:0,minesLeft:0,revealedCount:0}),i=M({width:window.innerWidth<768?7:16,height:window.innerWidth<768?7:16,mines:window.innerWidth<768?10:40,cellSize:window.innerWidth<768?35:30}),l=J([]);let g=null;const O=()=>{l.value=Array(i.height).fill(null).map(()=>Array(i.width).fill(null).map(()=>({isMine:!1,isRevealed:!1,isFlagged:!1,neighborMines:0})))},B=(t,e)=>{let o=0;for(;o<i.mines;){const r=Math.floor(Math.random()*i.width),n=Math.floor(Math.random()*i.height);!l.value[n][r].isMine&&(Math.abs(r-t)>1||Math.abs(n-e)>1)&&(l.value[n][r].isMine=!0,o++)}for(let r=0;r<i.height;r++)for(let n=0;n<i.width;n++)l.value[r][n].isMine||(l.value[r][n].neighborMines=D(n,r))},D=(t,e)=>{let o=0;for(let r=-1;r<=1;r++)for(let n=-1;n<=1;n++){const d=e+r,b=t+n;d>=0&&d<i.height&&b>=0&&b<i.width&&l.value[d][b].isMine&&o++}return o},w=(t,e)=>{if(!(l.value[e][t].isRevealed||l.value[e][t].isFlagged)){if(s.revealedCount===0&&(B(t,e),s.isPlaying=!0,H()),l.value[e][t].isRevealed=!0,s.revealedCount++,l.value[e][t].isMine){V();return}if(l.value[e][t].neighborMines===0)for(let o=-1;o<=1;o++)for(let r=-1;r<=1;r++){const n=e+o,d=t+r;n>=0&&n<i.height&&d>=0&&d<i.width&&!l.value[n][d].isRevealed&&!l.value[n][d].isFlagged&&w(d,n)}s.revealedCount===i.width*i.height-i.mines&&j()}},$=(t,e)=>{l.value[e][t].isRevealed||l.value[e][t].isFlagged||(l.value[e][t].isFlagged=!0,s.minesLeft--)},H=()=>{g=setInterval(()=>{s.isPlaying&&s.time++},1e3)},V=()=>{s.isPlaying=!1,s.gameOver=!0;for(let t=0;t<i.height;t++)for(let e=0;e<i.width;e++)l.value[t][e].isMine&&(l.value[t][e].isRevealed=!0);g&&(clearInterval(g),g=null)},j=()=>{s.isPlaying=!1,s.won=!0;for(let t=0;t<i.height;t++)for(let e=0;e<i.width;e++)l.value[t][e].isMine&&(l.value[t][e].isFlagged=!0);g&&(clearInterval(g),g=null),(s.time<s.highScore||s.highScore===0)&&(s.highScore=s.time,localStorage.setItem("minesweeperHighScore",s.highScore.toString()))},k=()=>{s.isPlaying=!1,s.gameOver=!1,s.won=!1,s.time=0,s.revealedCount=0,s.minesLeft=i.mines,O()},W=()=>{g&&(clearInterval(g),g=null),k()},x=t=>`${Math.floor(t/60)}:${(t%60).toString().padStart(2,"0")}`,A=t=>{const e="border border-gray-400 flex items-center justify-center font-bold transition-all duration-200";return t.isRevealed?t.isMine?`${e} bg-gray-200 text-gray-800`:`${e} bg-gray-200 text-gray-800`:t.isFlagged?`${e} bg-yellow-400 text-yellow-800`:`${e} bg-gray-100 hover:bg-gray-200 text-gray-600`},E=t=>t.isFlagged?"🚩":t.isRevealed?t.isMine?'<img src="/images/logo/mines.png" alt="地雷" class="w-4 h-4" />':t.neighborMines===0?"":t.neighborMines.toString():"",G=t=>!t.isRevealed||t.isMine?"":{1:"text-blue-600",2:"text-green-600",3:"text-red-600",4:"text-purple-600",5:"text-yellow-600",6:"text-cyan-600",7:"text-pink-600",8:"text-gray-600"}[t.neighborMines]||"";let P=0,m=null,F=500,y=!1;const X=(t,e,o)=>{!s.isPlaying||l.value[o][e].isRevealed||(P=Date.now(),y=!1,m=setTimeout(()=>{l.value[o][e].isFlagged||$(e,o),y=!0},F))},Y=(t,e,o)=>{if(!s.isPlaying)return;const r=Date.now()-P;m&&(clearTimeout(m),m=null),r<F&&!y&&w(e,o)},U=t=>{m&&(clearTimeout(m),m=null)};return K(()=>{const t=localStorage.getItem("minesweeperHighScore");t&&(s.highScore=parseInt(t)),k()}),Q(()=>{g&&clearInterval(g)}),(t,e)=>{const o=I("el-button"),r=I("el-text");return u(),c("div",le,[S(ae,{title:N.title},null,8,["title"]),a("div",re,[a("div",ne,[a("div",oe,[a("div",de,[e[1]||(e[1]=a("h3",{class:"text-sm font-medium text-blue-900"},"时间",-1)),a("p",ge,v(x(s.time)),1)]),a("div",ue,[e[2]||(e[2]=a("h3",{class:"text-sm font-medium text-green-900"},"最高分",-1)),a("p",ce,v(x(s.highScore)),1)]),a("div",ve,[e[3]||(e[3]=a("h3",{class:"text-sm font-medium text-red-900"},"剩余地雷",-1)),a("p",me,v(s.minesLeft),1)]),a("div",be,[e[4]||(e[4]=a("h3",{class:"text-sm font-medium text-purple-900"},"游戏板",-1)),a("p",he,v(i.width)+"×"+v(i.height),1)]),a("div",fe,[e[5]||(e[5]=a("h3",{class:"text-sm font-medium text-orange-900"},"地雷数",-1)),a("p",pe,v(i.mines),1)])]),a("div",xe,[s.gameOver||s.won?(u(),Z(o,{key:0,onClick:W,type:"success",class:"bg-green-500 hover:bg-green-600 border-green-600"},{default:C(()=>e[6]||(e[6]=[h(" 重新开始 ",-1)])),_:1,__:[6]})):_("",!0)]),a("div",_e,[a("div",{class:"bg-gray-300 p-4 rounded-lg shadow-lg",style:R({display:"grid",gridTemplateColumns:`repeat(${i.width}, ${i.cellSize}px)`,gap:"1px"})},[(u(!0),c(T,null,z(l.value,(n,d)=>(u(),c(T,{key:`row-${d}`},[(u(!0),c(T,null,z(n,(b,p)=>(u(),c("div",{key:`${p}-${d}`,class:L(["cursor-pointer select-none",A(b)]),style:R({width:i.cellSize+"px",height:i.cellSize+"px",fontSize:i.cellSize*.4+"px"}),onClick:f=>w(p,d),onContextmenu:ee(f=>$(p,d),["prevent"]),onTouchstart:f=>X(f,p,d),onTouchend:f=>Y(f,p,d),onTouchmove:e[0]||(e[0]=f=>U())},[a("span",{class:L(G(b)),innerHTML:E(b)},null,10,ye)],46,we))),128))],64))),128))],4)]),s.won?(u(),c("div",Me,[a("div",Se,[e[7]||(e[7]=a("h3",{class:"text-lg font-medium text-green-900 mb-2"},"恭喜获胜！",-1)),a("p",Ce,"用时: "+v(x(s.time)),1),s.time<s.highScore||s.highScore===0?(u(),c("p",Te," 新纪录！恭喜你创造了新的最快时间！ ")):_("",!0)])])):_("",!0),s.gameOver?(u(),c("div",$e,[a("div",ke,[e[8]||(e[8]=a("h3",{class:"text-lg font-medium text-red-900 mb-2"},"游戏结束！",-1)),a("p",Pe,"用时: "+v(x(s.time)),1),e[9]||(e[9]=a("p",{class:"text-red-600"},"踩到地雷了，再接再厉！",-1))])])):_("",!0),e[10]||(e[10]=te('<div class="bg-gray-50 rounded-lg p-4 border-2 border-gray-200 shadow-sm" data-v-eab564ee><h3 class="text-lg font-medium text-gray-900 mb-3" data-v-eab564ee>游戏说明</h3><div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600" data-v-eab564ee><div class="bg-white p-3 rounded border border-gray-200" data-v-eab564ee><p data-v-eab564ee><strong class="text-blue-600" data-v-eab564ee>游戏目标：</strong>找出所有地雷，避免踩到地雷</p><p data-v-eab564ee><strong class="text-blue-600" data-v-eab564ee>操作方式：</strong></p><ul class="list-disc list-inside ml-2 mt-1 space-y-1" data-v-eab564ee><li data-v-eab564ee>PC端：左键点击揭示，右键标记地雷</li><li data-v-eab564ee>移动端：短按揭示，长按500毫秒标记地雷</li></ul></div><div class="bg-white p-3 rounded border border-gray-200" data-v-eab564ee><p data-v-eab564ee><strong class="text-green-600" data-v-eab564ee>数字含义：</strong>数字表示周围8个格子中地雷的数量</p><p data-v-eab564ee><strong class="text-red-600" data-v-eab564ee>挑战：</strong>用最短时间找出所有地雷</p></div></div><div class="mt-4 bg-white p-4 rounded border border-gray-200" data-v-eab564ee><h4 class="text-md font-medium text-gray-800 mb-2" data-v-eab564ee>详细玩法：</h4><div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600" data-v-eab564ee><div data-v-eab564ee><p class="font-medium text-gray-700 mb-2" data-v-eab564ee>🎯 游戏规则：</p><ul class="list-disc list-inside space-y-1" data-v-eab564ee><li data-v-eab564ee>游戏开始时，地雷随机分布在格子中</li><li data-v-eab564ee>第一次点击永远不会踩到地雷</li><li data-v-eab564ee>数字表示周围8个格子中地雷的数量</li><li data-v-eab564ee>空白格子会自动揭示周围的格子</li><li data-v-eab564ee>标记所有地雷或揭示所有安全格子获胜</li></ul></div><div data-v-eab564ee><p class="font-medium text-gray-700 mb-2" data-v-eab564ee>🎮 操作技巧：</p><ul class="list-disc list-inside space-y-1" data-v-eab564ee><li data-v-eab564ee>从角落开始，更容易找到突破口</li><li data-v-eab564ee>利用数字信息推理地雷位置</li><li data-v-eab564ee>标记确定的地雷，避免重复点击</li><li data-v-eab564ee>注意剩余地雷数量，帮助判断</li><li data-v-eab564ee>遇到困难时，可以重新开始游戏</li></ul></div></div><div class="mt-3 p-3 bg-yellow-50 rounded border border-yellow-200" data-v-eab564ee><p class="text-sm text-yellow-800" data-v-eab564ee><strong data-v-eab564ee>💡 提示：</strong>游戏会自动记录你的最快完成时间，挑战自己的记录吧！ </p></div></div></div>',1))])]),S(ie,{title:"描述"},{default:C(()=>[S(r,null,{default:C(()=>e[11]||(e[11]=[h(" 经典扫雷游戏，考验你的逻辑推理能力：",-1),a("br",null,null,-1),a("br",null,null,-1),h(" 游戏特色：经典扫雷玩法，数字提示系统，实时计时统计",-1),a("br",null,null,-1),h(" 操作方式：左键点击揭示格子，右键标记地雷，数字表示周围地雷数",-1),a("br",null,null,-1),h(" 游戏目标：找出所有地雷，避免踩到地雷，挑战最快时间",-1),a("br",null,null,-1),h(" 训练效果：锻炼逻辑思维、推理能力和空间判断能力",-1),a("br",null,null,-1),a("br",null,null,-1),h(" 适合所有年龄段，是经典的益智游戏。 ",-1)])),_:1,__:[11]})]),_:1})])}}});const Ne=se(Fe,[["__scopeId","data-v-eab564ee"]]);export{Ne as default};
