import{d as V,I as o,k as S,o as B,r as D,b as u,c as m,h,f as e,U as c,V as x,W as L,F as N,e as H,t as w,X as R,w as _,i as z,Y as k,_ as F}from"./index-0cfc8cac.js";import{D as K}from"./DetailHeader-67e3a366.js";import{T as O}from"./ToolDetail-67009af9.js";const E={class:"flex flex-col mt-3 flex-1"},P={class:"p-4 rounded-2xl bg-white"},W={class:"ai-text-to-image"},X={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},Y={class:"space-y-6"},$={class:"input-section"},q={class:"model-selector"},G=["value"],J={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Q={class:"flex"},Z={class:"flex justify-between mt-1"},ee={class:"flex items-center justify-start md:justify-end"},te={class:"flex items-center"},le={class:"result-section"},oe={key:0,class:"loading flex flex-col items-center justify-center h-full"},se={key:1,class:"result h-full flex flex-col"},ae={class:"flex-1 flex items-center justify-center"},ne=["src"],re={key:2,class:"placeholder flex flex-col items-center justify-center h-full text-center p-8"},ie=V({__name:"AiTextToImage",setup(de){const T=o("NpgaKlHjioTlyo2B"),s=S({title:"在线文生图",desc:"免费无限次数生成图片，无需登录注册、直接使用",maxSeed:1e8,apiUrl:"https://proxy-pollinations.2424004764.workers.dev",pollinationsApi:"https://image.pollinations.ai"}),p=o("一个神秘瑰丽的微观世界：花粉颗粒的精细结构、覆盖露珠的微小植物、发光孢子、漂浮的细菌和微粒，呈现出超现实的生物荧光效果。采用微距摄影风格，焦点清晰，背景虚化，整体色彩鲜艳，画面极具科幻与自然美感。"),v=o(""),g=o(!1),r=o([]),i=o(""),b=o(1024),f=o(1024),y=o(!0),d=o(-1),U=async()=>{try{const t=(await k.get(s.apiUrl+"/models?target="+s.pollinationsApi)).data;r.value=t.map(a=>({value:a,label:a.charAt(0).toUpperCase()+a.slice(1)})),r.value.length>0&&(i.value=r.value[0].value)}catch(n){console.error("获取模型失败:",n),r.value=[{value:"flux",label:"Flux"},{value:"kontext",label:"Kontext"},{value:"turbo",label:"Turbo"}],i.value=r.value[0].value}};B(()=>{U()});const A=()=>{d.value=Math.floor(Math.random()*s.maxSeed)},j=async()=>{if(!(!p.value.trim()||!i.value)){g.value=!0,v.value="";try{const n=d.value===-1?Math.floor(Math.random()*s.maxSeed):d.value,t={model:i.value,width:b.value,height:f.value,nologo:y.value?"true":void 0,seed:n.toString()},a=Object.fromEntries(Object.entries(t).filter(([ue,M])=>M!==void 0));a._t=Date.now();const l=await k.get(s.apiUrl+"/prompt/"+encodeURIComponent(p.value)+"?target="+s.pollinationsApi,{params:a,headers:{Authorization:"Bearer "+T.value},responseType:"blob"}),I=new Blob([l.data],{type:"image/png"});v.value=URL.createObjectURL(I)}catch(n){console.error("生成失败:",n),alert("图像生成失败，请重试")}finally{g.value=!1}}},C=()=>{window.open(v.value,"_blank")};return(n,t)=>{const a=D("el-text");return u(),m("div",E,[h(K,{title:s.title},null,8,["title"]),e("div",P,[e("div",W,[e("div",X,[e("div",Y,[e("div",$,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"提示词",-1)),c(e("textarea",{"onUpdate:modelValue":t[0]||(t[0]=l=>p.value=l),placeholder:"输入描述文字...",class:"w-full p-4 border rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 min-h-[150px]"},null,512),[[x,p.value]])]),e("div",q,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"选择模型",-1)),c(e("select",{"onUpdate:modelValue":t[1]||(t[1]=l=>i.value=l),class:"w-full p-3 border rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500"},[(u(!0),m(N,null,H(r.value,l=>(u(),m("option",{key:l.value,value:l.value},w(l.label),9,G))),128))],512),[[L,i.value]])]),e("div",J,[e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"宽度 (px)",-1)),c(e("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>b.value=l),type:"number",min:"64",max:"4096",class:"w-full p-2 border rounded-lg"},null,512),[[x,b.value,void 0,{number:!0}]])]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"高度 (px)",-1)),c(e("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>f.value=l),type:"number",min:"64",max:"4096",class:"w-full p-2 border rounded-lg"},null,512),[[x,f.value,void 0,{number:!0}]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"随机种子",-1)),e("div",Q,[c(e("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>d.value=l),type:"number",min:"-1",class:"flex-1 p-2 border rounded-l-lg",placeholder:"-1 表示随机"},null,512),[[x,d.value,void 0,{number:!0}]]),e("button",{onClick:A,class:"bg-gray-200 hover:bg-gray-300 px-3 rounded-r-lg border-t border-r border-b",title:"生成随机种子"},t[11]||(t[11]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z","clip-rule":"evenodd"})],-1)]))]),e("div",Z,[t[12]||(t[12]=e("p",{class:"text-xs text-gray-500"},"-1 = 随机",-1)),e("button",{onClick:t[5]||(t[5]=l=>d.value=-1),class:"text-xs text-blue-600 hover:text-blue-800"}," 设为随机 ")])]),e("div",ee,[e("div",te,[c(e("input",{"onUpdate:modelValue":t[6]||(t[6]=l=>y.value=l),type:"checkbox",id:"noLogo",class:"mr-2"},null,512),[[R,y.value]]),t[14]||(t[14]=e("label",{for:"noLogo",class:"text-sm font-medium text-gray-700"},"不显示水印",-1))])])]),e("button",{onClick:j,class:"generate-btn bg-blue-600 hover:bg-blue-700 text-white py-3 px-6 rounded-lg shadow-md transition w-full"}," 生成图像 ")]),e("div",le,[g.value?(u(),m("div",oe,t[15]||(t[15]=[e("div",{class:"spinner"},null,-1),e("p",{class:"mt-4 text-lg"},"生成中...",-1)]))):v.value?(u(),m("div",se,[t[16]||(t[16]=e("div",{class:"mb-4"},[e("h3",{class:"text-lg font-medium text-gray-700"},"生成结果"),e("p",{class:"text-sm text-gray-500"},"点击图像可查看大图")],-1)),e("div",ae,[e("img",{src:v.value,alt:"生成的图像",class:"rounded-lg shadow-lg max-w-full max-h-[70vh] object-contain cursor-pointer",onClick:C},null,8,ne)])])):(u(),m("div",re,t[17]||(t[17]=[e("div",{class:"bg-gray-200 border-2 border-dashed rounded-xl w-16 h-16 mb-4"},null,-1),e("h3",{class:"text-lg font-medium text-gray-700 mb-2"},"等待生成图像",-1),e("p",{class:"text-gray-500"},'输入提示词并点击"生成图像"按钮',-1)])))])])])]),h(O,{title:"描述"},{default:_(()=>[h(a,null,{default:_(()=>[z(w(s.desc),1)]),_:1})]),_:1})])}}});const pe=F(ie,[["__scopeId","data-v-2c8bf4a0"],["__file","D:/dev/nodejs/tools-web/src/components/Tools/AiTextToImage/AiTextToImage.vue"]]);export{pe as default};
