import{_ as re}from"./DetailHeader.vue_vue_type_script_setup_true_lang-11ff39b7.js";import{_ as oe}from"./ToolDetail.vue_vue_type_script_setup_true_lang-c5bac112.js";import{d as se,k as E,G as le,o as ie,l as ne,r as V,b as d,c,h as D,f as i,t as u,g as ae,w as C,i as g,H as b,N as W,F as M,e as $,M as de,I as ce,_ as ue}from"./index-ebdd1efc.js";const ge={class:"flex flex-col mt-3 ml-4 flex-1 mr-3"},fe={class:"p-6 rounded-2xl bg-white shadow-sm border border-gray-200"},me={class:"max-w-2xl mx-auto"},ve={class:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"},be={class:"text-center bg-blue-50 p-3 rounded-lg border border-blue-200"},he={class:"text-xl font-bold text-blue-600"},pe={class:"text-center bg-green-50 p-3 rounded-lg border border-green-200"},Se={class:"text-xl font-bold text-green-600"},xe={class:"text-center bg-purple-50 p-3 rounded-lg border border-purple-200"},we={class:"text-xl font-bold text-purple-600"},_e={class:"text-center bg-indigo-50 p-3 rounded-lg border border-indigo-200"},ye={class:"text-xl font-bold text-indigo-600"},ze={class:"flex justify-center mb-6"},Ee={class:"flex justify-center mb-6"},De={key:0,class:"text-center mb-6"},Ce={key:1,class:"text-center mb-6"},Me={class:"bg-red-50 border-2 border-red-300 rounded-lg p-4 shadow-md"},ke={class:"text-red-600"},Le={class:"text-red-600"},Te={key:0,class:"text-yellow-600 font-medium mt-2"},Ae=se({__name:"Game2048",setup(je){const J=E({title:"2048"}),s=E({isPlaying:!1,score:0,highScore:0,gameOver:!1,won:!1,bestTile:0}),l=E({gridSize:(window.innerWidth<768,4),cellSize:window.innerWidth<768?60:80,cellGap:8}),n=le([]),U=()=>{n.value=Array(l.gridSize).fill(null).map(()=>Array(l.gridSize).fill(0))},f=()=>{const t=[];for(let e=0;e<l.gridSize;e++)for(let o=0;o<l.gridSize;o++)n.value[e][o]===0&&t.push({row:e,col:o});if(t.length>0){const e=t[Math.floor(Math.random()*t.length)];n.value[e.row][e.col]=Math.random()<.9?2:4}},h=()=>{for(let t=0;t<l.gridSize;t++)for(let e=0;e<l.gridSize;e++)if(n.value[t][e]===0)return!1;for(let t=0;t<l.gridSize;t++)for(let e=0;e<l.gridSize;e++){const o=n.value[t][e];if(e<l.gridSize-1&&n.value[t][e+1]===o||t<l.gridSize-1&&n.value[t+1][e]===o)return!1}return!0},p=()=>{for(let t=0;t<l.gridSize;t++)for(let e=0;e<l.gridSize;e++)if(n.value[t][e]>=2048)return!0;return!1},S=()=>{let t=0;for(let e=0;e<l.gridSize;e++)for(let o=0;o<l.gridSize;o++)n.value[e][o]>t&&(t=n.value[e][o]);s.bestTile=Math.max(s.bestTile,t),s.score>s.highScore&&(s.highScore=s.score,localStorage.setItem("game2048HighScore",s.highScore.toString()))},x=()=>{let t=!1;for(let e=0;e<l.gridSize;e++){const o=n.value[e].filter(r=>r!==0);for(let r=0;r<o.length-1;r++)o[r]===o[r+1]&&(o[r]*=2,s.score+=o[r],o.splice(r+1,1));const a=o.concat(Array(l.gridSize-o.length).fill(0));JSON.stringify(n.value[e])!==JSON.stringify(a)&&(t=!0),n.value[e]=a}return t},w=()=>{let t=!1;for(let e=0;e<l.gridSize;e++){const o=n.value[e].filter(r=>r!==0);for(let r=o.length-1;r>0;r--)o[r]===o[r-1]&&(o[r]*=2,s.score+=o[r],o.splice(r-1,1),r--);const a=Array(l.gridSize-o.length).fill(0).concat(o);JSON.stringify(n.value[e])!==JSON.stringify(a)&&(t=!0),n.value[e]=a}return t},_=()=>{let t=!1;for(let e=0;e<l.gridSize;e++){const o=[];for(let r=0;r<l.gridSize;r++)n.value[r][e]!==0&&o.push(n.value[r][e]);for(let r=0;r<o.length-1;r++)o[r]===o[r+1]&&(o[r]*=2,s.score+=o[r],o.splice(r+1,1));const a=o.concat(Array(l.gridSize-o.length).fill(0));for(let r=0;r<l.gridSize;r++)n.value[r][e]!==a[r]&&(t=!0),n.value[r][e]=a[r]}return t},y=()=>{let t=!1;for(let e=0;e<l.gridSize;e++){const o=[];for(let r=0;r<l.gridSize;r++)n.value[r][e]!==0&&o.push(n.value[r][e]);for(let r=o.length-1;r>0;r--)o[r]===o[r-1]&&(o[r]*=2,s.score+=o[r],o.splice(r-1,1),r--);const a=Array(l.gridSize-o.length).fill(0).concat(o);for(let r=0;r<l.gridSize;r++)n.value[r][e]!==a[r]&&(t=!0),n.value[r][e]=a[r]}return t},k=t=>{if(!s.isPlaying)return;let e=!1;switch(t.key){case"ArrowLeft":case"a":case"A":t.preventDefault(),e=x();break;case"ArrowRight":case"d":case"D":t.preventDefault(),e=w();break;case"ArrowUp":case"w":case"W":t.preventDefault(),e=_();break;case"ArrowDown":case"s":case"S":t.preventDefault(),e=y();break}e&&(f(),S(),p()&&!s.won&&(s.won=!0),h()&&z())},L=()=>{s.isPlaying=!0,s.gameOver=!1,s.won=!1,s.score=0,U(),f(),f()},z=()=>{s.isPlaying=!1,s.gameOver=!0,localStorage.setItem("game2048HighScore",s.highScore.toString())},q=()=>{L()},K=t=>({0:"bg-gray-200",2:"bg-[#EEE4DA]",4:"bg-[#EDE0C8]",8:"bg-[#F2B179]",16:"bg-[#F59563]",32:"bg-[#F67C5F]",64:"bg-[#F65E3B]",128:"bg-[#EDCF72]",256:"bg-[#EDCC61]",512:"bg-[#EDC850]",1024:"bg-[#EDC53F]",2048:"bg-[#EDC22E]"})[t]||"bg-[#3C3A32]",Q=t=>t<=4?"text-[#776E65]":"text-[#F9F6F2]";let T=0,A=0,j=0,F=0;const O=t=>{if(!s.isPlaying)return;const e=t.touches[0];T=e.clientX,A=e.clientY,t.preventDefault()},N=t=>{s.isPlaying&&t.preventDefault()},P=t=>{if(!s.isPlaying)return;const e=t.changedTouches[0];j=e.clientX,F=e.clientY,t.preventDefault(),Z()},Z=()=>{const t=j-T,e=F-A,o=30;let a=!1;Math.abs(t)>Math.abs(e)?Math.abs(t)>o&&(t>0?a=w():a=x()):Math.abs(e)>o&&(e>0?a=y():a=_()),a&&(f(),S(),p()&&!s.won&&(s.won=!0),h()&&z())};let X=0,Y=0,B=0,G=0,v=!1;const I=t=>{s.isPlaying&&(v=!0,X=t.clientX,Y=t.clientY)},H=t=>{!s.isPlaying||!v||t.preventDefault()},R=t=>{!s.isPlaying||!v||(v=!1,B=t.clientX,G=t.clientY,ee())},ee=()=>{const t=B-X,e=G-Y,o=30;let a=!1;Math.abs(t)>Math.abs(e)?Math.abs(t)>o&&(t>0?a=w():a=x()):Math.abs(e)>o&&(e>0?a=y():a=_()),a&&(f(),S(),p()&&!s.won&&(s.won=!0),h()&&z())};return ie(()=>{const t=localStorage.getItem("game2048HighScore");t&&(s.highScore=parseInt(t)),window.addEventListener("keydown",k);const e=document.querySelector(".game-board");e&&(e.addEventListener("touchstart",O,{passive:!1}),e.addEventListener("touchmove",N,{passive:!1}),e.addEventListener("touchend",P,{passive:!1}),e.addEventListener("mousedown",I),e.addEventListener("mousemove",H),e.addEventListener("mouseup",R)),L()}),ne(()=>{window.removeEventListener("keydown",k);const t=document.querySelector(".game-board");t&&(t.removeEventListener("touchstart",O),t.removeEventListener("touchmove",N),t.removeEventListener("touchend",P),t.removeEventListener("mousedown",I),t.removeEventListener("mousemove",H),t.removeEventListener("mouseup",R))}),(t,e)=>{const o=V("el-button"),a=V("el-text");return d(),c("div",ge,[D(re,{title:J.title},null,8,["title"]),i("div",fe,[i("div",me,[i("div",ve,[i("div",be,[e[0]||(e[0]=i("h3",{class:"text-sm font-medium text-blue-900"},"得分",-1)),i("p",he,u(s.score),1)]),i("div",pe,[e[1]||(e[1]=i("h3",{class:"text-sm font-medium text-green-900"},"最高分",-1)),i("p",Se,u(s.highScore),1)]),i("div",xe,[e[2]||(e[2]=i("h3",{class:"text-sm font-medium text-purple-900"},"最佳方块",-1)),i("p",we,u(s.bestTile),1)]),i("div",_e,[e[3]||(e[3]=i("h3",{class:"text-sm font-medium text-indigo-900"},"游戏板",-1)),i("p",ye,u(l.gridSize)+"×"+u(l.gridSize),1)])]),i("div",ze,[s.gameOver?(d(),ae(o,{key:0,onClick:q,type:"success",class:"bg-green-500 hover:bg-green-600 border-green-600"},{default:C(()=>e[4]||(e[4]=[g(" 重新开始 ",-1)])),_:1,__:[4]})):b("",!0)]),i("div",Ee,[i("div",{class:"game-board bg-gray-300 p-4 rounded-lg shadow-lg",style:W({display:"grid",gridTemplateColumns:`repeat(${l.gridSize}, ${l.cellSize}px)`,gap:l.cellGap+"px"})},[(d(!0),c(M,null,$(n.value,(r,te)=>(d(),c(M,{key:`row-${te}`},[(d(!0),c(M,null,$(r,m=>(d(),c("div",{key:Math.random(),class:de(["bg-gray-200 rounded-lg flex items-center justify-center font-bold transition-all duration-200",[K(m),Q(m)]]),style:W({width:l.cellSize+"px",height:l.cellSize+"px",fontSize:m>=1e3?"1.5rem":m>=100?"1.75rem":"2rem"})},u(m||""),7))),128))],64))),128))],4)]),s.won&&!s.gameOver?(d(),c("div",De,e[5]||(e[5]=[i("div",{class:"bg-yellow-50 border-2 border-yellow-300 rounded-lg p-4 shadow-md"},[i("h3",{class:"text-lg font-medium text-yellow-900 mb-2"},"恭喜获胜！"),i("p",{class:"text-yellow-600"},"你已经达到了2048！可以继续游戏挑战更高分数")],-1)]))):b("",!0),s.gameOver?(d(),c("div",Ce,[i("div",Me,[e[6]||(e[6]=i("h3",{class:"text-lg font-medium text-red-900 mb-2"},"游戏结束！",-1)),i("p",ke,"最终得分: "+u(s.score),1),i("p",Le,"最佳方块: "+u(s.bestTile),1),s.score>s.highScore?(d(),c("p",Te," 新纪录！恭喜你创造了新的最高分！ ")):b("",!0)])])):b("",!0),e[7]||(e[7]=ce('<div class="bg-gray-50 rounded-lg p-4 border-2 border-gray-200 shadow-sm" data-v-b591c06f><h3 class="text-lg font-medium text-gray-900 mb-3" data-v-b591c06f>游戏说明</h3><div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600" data-v-b591c06f><div class="bg-white p-3 rounded border border-gray-200" data-v-b591c06f><p data-v-b591c06f><strong class="text-blue-600" data-v-b591c06f>游戏目标：</strong>通过滑动合并相同数字，达到2048</p><p data-v-b591c06f><strong class="text-blue-600" data-v-b591c06f>操作方式：</strong>键盘方向键/WASD，鼠标拖拽，触摸滑动</p></div><div class="bg-white p-3 rounded border border-gray-200" data-v-b591c06f><p data-v-b591c06f><strong class="text-green-600" data-v-b591c06f>合并规则：</strong>相同数字的方块相撞时会合并</p><p data-v-b591c06f><strong class="text-red-600" data-v-b591c06f>挑战：</strong>每次移动后会随机出现新的数字</p></div></div></div>',1))])]),D(oe,{title:"描述"},{default:C(()=>[D(a,null,{default:C(()=>e[8]||(e[8]=[g(" 经典2048益智游戏，考验你的策略思维和数字逻辑：",-1),i("br",null,null,-1),i("br",null,null,-1),g(" 游戏特色：经典2048玩法，数字合并机制，实时得分统计",-1),i("br",null,null,-1),g(" 操作方式：使用方向键控制方块移动，相同数字自动合并",-1),i("br",null,null,-1),g(" 游戏目标：通过策略性移动，将数字合并到2048或更高",-1),i("br",null,null,-1),g(" 训练效果：锻炼逻辑思维、策略规划和空间布局能力",-1),i("br",null,null,-1),i("br",null,null,-1),g(" 适合所有年龄段，是经典的益智游戏。 ",-1)])),_:1,__:[8]})]),_:1})])}}});const Pe=ue(Ae,[["__scopeId","data-v-b591c06f"]]);export{Pe as default};
