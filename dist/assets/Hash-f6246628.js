import{_ as N,c as b}from"./DetailHeader.vue_vue_type_script_setup_true_lang-44e7d135.js";import{_ as T}from"./ToolDetail.vue_vue_type_script_setup_true_lang-eb983930.js";import{d as h,k as C,I as E,r as d,b as p,c as g,h as s,f as a,w as n,y as H,i as r,t as f,g as U,E as j,_ as I}from"./index-1aab6d89.js";const W={class:"flex flex-col mt-3 flex-1"},q={class:"p-4 rounded-2xl bg-white"},D={class:"flex flex-wrap gap-3 items-center"},G={key:0,class:"flex-1 min-w-[240px]"},J={class:"mt-4"},L={class:"mb-2 text-sm text-gray-600"},O={class:"mt-2 flex flex-wrap gap-2 button-container"},P={class:"mt-3"},Q={class:"mt-6"},X={key:0,class:"mt-2 text-xs text-gray-500"},Y={class:"mt-2 flex flex-wrap gap-2 button-container"},Z={class:"mt-3"},$=h({__name:"Hash",setup(ee){const S=C({title:"哈希校验/HMAC"}),e=C({algo:"SHA-256",text:"",hmacKey:"",textResult:"",fileResult:"",fileName:"",fileSize:0,loadingText:!1,loadingFile:!1,file:null}),m=l=>new TextEncoder().encode(l),x=l=>{const t=new Uint8Array(l);return Array.from(t).map(o=>o.toString(16).padStart(2,"0")).join("")},y=()=>{if(!window.crypto||!window.crypto.subtle)throw j.error("当前环境不支持 Web Crypto"),new Error("WebCrypto not available")},A=async(l,t)=>{y();const o=await crypto.subtle.digest({name:l},t);return x(o)},v=async()=>{try{if(e.loadingText=!0,e.algo==="HMAC-SHA256"){y();const l=await crypto.subtle.importKey("raw",m(e.hmacKey||""),{name:"HMAC",hash:"SHA-256"},!1,["sign"]),t=await crypto.subtle.sign("HMAC",l,m(e.text||""));e.textResult=x(t)}else{const l=await A(e.algo,m(e.text||"").buffer);e.textResult=l}}catch{}finally{e.loadingText=!1}},w=async l=>{try{if(e.loadingFile=!0,e.algo==="HMAC-SHA256"){y();const t=await crypto.subtle.importKey("raw",m(e.hmacKey||""),{name:"HMAC",hash:"SHA-256"},!1,["sign"]),o=await l.arrayBuffer(),_=await crypto.subtle.sign("HMAC",t,o);e.fileResult=x(_)}else{const t=await l.arrayBuffer(),o=await A(e.algo,t);e.fileResult=o}}catch{}finally{e.loadingFile=!1}},V=async l=>{const t=l.target,o=t.files&&t.files[0];o&&(e.fileName=o.name,e.fileSize=o.size,e.file=o,await w(o))},k=()=>{e.text="",e.textResult=""},M=l=>{e.fileName="",e.fileSize=0,e.fileResult="",e.file=null,e.loadingFile=!1,l&&(l.value="")},R=()=>b(e.textResult),F=()=>b(e.fileResult),B=()=>{e.text="The quick brown fox jumps over the lazy dog"};return E(()=>[e.text,e.algo,e.hmacKey],()=>{v(),e.file&&w(e.file)}),(l,t)=>{const o=d("el-option"),_=d("el-select"),c=d("el-input"),z=d("el-link"),u=d("el-button"),K=d("el-text");return p(),g("div",W,[s(N,{title:S.title},null,8,["title"]),a("div",q,[a("div",D,[a("div",null,[s(_,{modelValue:e.algo,"onUpdate:modelValue":t[0]||(t[0]=i=>e.algo=i),placeholder:"选择算法",style:{width:"180px"}},{default:n(()=>[s(o,{label:"SHA-1",value:"SHA-1"}),s(o,{label:"SHA-256",value:"SHA-256"}),s(o,{label:"SHA-512",value:"SHA-512"}),s(o,{label:"HMAC-SHA256",value:"HMAC-SHA256"})]),_:1},8,["modelValue"])]),e.algo==="HMAC-SHA256"?(p(),g("div",G,[s(c,{modelValue:e.hmacKey,"onUpdate:modelValue":t[1]||(t[1]=i=>e.hmacKey=i),placeholder:"HMAC 密钥（文本）"},null,8,["modelValue"])])):H("",!0)]),a("div",J,[a("div",L,[t[7]||(t[7]=r(" 文本摘要/HMAC ",-1)),s(z,{class:"ml-2",type:"primary",onClick:B},{default:n(()=>t[6]||(t[6]=[r("填充示例",-1)])),_:1,__:[6]})]),s(c,{modelValue:e.text,"onUpdate:modelValue":t[2]||(t[2]=i=>e.text=i),type:"textarea",rows:6,placeholder:"在此输入文本"},null,8,["modelValue"]),a("div",O,[s(u,{onClick:R},{default:n(()=>t[8]||(t[8]=[r("复制结果",-1)])),_:1,__:[8]}),s(u,{type:"danger",onClick:k},{default:n(()=>t[9]||(t[9]=[r("清空",-1)])),_:1,__:[9]})]),a("div",P,[t[10]||(t[10]=a("div",{class:"text-sm text-gray-600 mb-1"},"结果：",-1)),s(c,{modelValue:e.textResult,"onUpdate:modelValue":t[3]||(t[3]=i=>e.textResult=i),readonly:""},null,8,["modelValue"])])]),a("div",Q,[t[15]||(t[15]=a("div",{class:"mb-2 text-sm text-gray-600"},"文件摘要/HMAC",-1)),a("input",{type:"file",onChange:V},null,32),e.fileName?(p(),g("div",X," 文件："+f(e.fileName)+"（"+f(e.fileSize)+" 字节 ≈ "+f((e.fileSize/1024).toFixed(2))+" KB / "+f((e.fileSize/1024/1024).toFixed(2))+" MB / "+f((e.fileSize/1024/1024/1024).toFixed(2))+" GB） ",1)):H("",!0),a("div",Y,[s(u,{onClick:F},{default:n(()=>t[11]||(t[11]=[r("复制结果",-1)])),_:1,__:[11]}),s(u,{type:"danger",onClick:t[4]||(t[4]=i=>M(i==null?void 0:i.target))},{default:n(()=>t[12]||(t[12]=[r("清空",-1)])),_:1,__:[12]}),e.loadingFile?(p(),U(u,{key:0,loading:!0,disabled:""},{default:n(()=>t[13]||(t[13]=[r("计算中",-1)])),_:1,__:[13]})):H("",!0)]),a("div",Z,[t[14]||(t[14]=a("div",{class:"text-sm text-gray-600 mb-1"},"结果：",-1)),s(c,{modelValue:e.fileResult,"onUpdate:modelValue":t[5]||(t[5]=i=>e.fileResult=i),readonly:""},null,8,["modelValue"])])])]),s(T,{title:"描述"},{default:n(()=>[s(K,null,{default:n(()=>t[16]||(t[16]=[r(" 支持 SHA-1、SHA-256、SHA-512 与 HMAC-SHA256；文本/文件摘要；结果十六进制显示，可复制。 ",-1)])),_:1,__:[16]})]),_:1})])}}});const se=I($,[["__scopeId","data-v-14f6807c"]]);export{se as default};
