import{d as le,s as c,k as se,x as ne,r as oe,b as f,c as x,h as I,f as t,p as b,a3 as S,a4 as U,C as ae,F as W,e as F,t as _,z as ie,y as G,w as K,i as re,E as O,a6 as R}from"./index-cdfc58ff.js";import{_ as ue,c as q}from"./DetailHeader.vue_vue_type_script_setup_true_lang-6c96031e.js";import{_ as de}from"./ToolDetail.vue_vue_type_script_setup_true_lang-074d5565.js";const ce={class:"flex flex-col mt-3 flex-1"},pe={class:"p-4 rounded-2xl bg-white"},ve={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},me={class:"space-y-4"},ge={class:"grid grid-cols-2 gap-3"},fe={class:"grid grid-cols-2 gap-3"},xe={class:"grid grid-cols-3 gap-3"},be={class:"flex items-center justify-between mb-2"},he={class:"flex flex-wrap gap-2 text-xs"},ye=["onClick"],we=["disabled"],ke={class:"space-y-3"},$e={class:"flex items-center justify-between"},_e=["disabled"],Ce={class:"min-h-[220px] border rounded-lg p-3 bg-gray-50"},Me={key:0,class:"text-gray-500"},Se={key:1,class:"space-y-2"},Ue={class:"pr-3"},Ve={class:"font-medium"},Te={key:0,class:"text-gray-600 text-sm mt-1"},je=["onClick"],ze={key:0,class:"text-gray-400 text-sm"},Ee=le({__name:"AiName",setup(Be){const V=c("NpgaKlHjioTlyo2B"),T=c("https://tool.fologde.com/proxy"),j=c("https://text.pollinations.ai"),P=se({title:"AI起名",desc:"输入父母姓氏，选择名的长度与性别，一键生成多个中文姓名，并给出命名理由"}),m=c(""),g=c(""),h=c("父姓"),z=c("男"),$=c("1-2"),C=c("不限"),v=c(10),B=c(!0),M=c(""),H=["聪慧睿智","健康平安","自信阳光","知书达理","博学多才","坚毅勇敢","温婉大方","心怀远志","独立自强","善良纯真"],J=o=>{M.value=o},y=c(!1),w=c([]),N=ne(()=>(h.value==="母姓"?!!g.value.trim():!!m.value.trim())&&!y.value&&v.value>0&&v.value<=50),A=[{f:"张",m:"李"},{f:"王",m:"赵"},{f:"陈",m:"刘"}],Q=()=>{const o=Math.floor(Math.random()*A.length);m.value=A[o].f,g.value=A[o].m},L=(o,e)=>{const d=m.value.trim(),l=g.value.trim(),n=h.value,u=C.value==="不限"?"不限定风格":`${C.value}风格`,r=z.value,s=o||$.value,k=e??v.value,a=s==="1"?"名必须为 1 个汉字，禁止 2 字名":s==="2"?"名必须为 2 个汉字，禁止 1 字名":"名只能为 1 或 2 个汉字，且 2 字名数量不得少于 1 字名；输出顺序从 2 字名开始，然后与 1 字名交替排列（2、1、2、1...）",i=[`你是一位中文姓名学助理，请基于以下约束生成 ${k} 个中文全名，并给出简洁的命名理由：`,`- 输入姓氏：父姓「${d||"无"}」、母姓「${l||"无"}」`,`- 姓氏使用：${n}`,`- 名字长度：仅名部分为 ${s==="1-2"?"1 或 2":s} 个汉字（不含姓氏）；${a}`,`- 性别：${r}（注意名字读感与性别气质匹配）`,`- 风格：${u}（语义积极、读起来顺口，避免生僻与负面含义）`],p=M.value.replace(/\r?\n/g,"；").trim();return p&&i.push(`- 寓意：${p}（名字需体现或贴近该寓意）`),i.push("- 规则：所有姓名必须以所选姓氏开头；避免多音不雅，尽量避开同音低俗；可参考寓意、音律、字形搭配、文化典故等","- 自检：逐条校验“名”的汉字个数是否满足本次设定；当设为“1-2”时，保证 2 字名数量不小于 1 字名，且尽量交替；不满足请在内部修正后再输出","- 输出：姓名和理由每行一个，破折号分割姓名和理由，不要添加序号或额外说明"),i.join(`
`)},X=o=>{const e=o.replace(/\r\n/g,`
`).split(`
`),d=[];for(const l of e){const n=l.trim();if(!n)continue;let u="",r="";if(n.includes("	")){const[s,...k]=n.split("	");u=(s||"").trim(),r=k.join("	").trim()}else if(n.includes("—")||n.includes("-")||n.includes("：")||n.includes(":")){const s=n.split(/\s*[—\-：:]\s*/);u=(s[0]||"").trim(),r=(s.slice(1).join("：")||"").trim()}else u=n,r="";u&&d.push({name:u,reason:r})}return d};function E(o){if(!o)return 0;const e=o.match(/[\u4e00-\u9fa5]/g);return e?e.length:0}function Y(o){const e=(h.value==="父姓"?m.value.trim():g.value.trim())||m.value.trim()||g.value.trim(),d=$.value,l=o.filter(a=>{const i=(a.name||"").trim();if(!i)return!1;let p=i;e&&i.startsWith(e)&&(p=i.slice(e.length));const D=E(p);return d==="1-2"?D===1||D===2:D===Number(d)});if(d!=="1-2")return l;const n=l.filter(a=>{const i=a.name.trim(),p=e&&i.startsWith(e)?i.slice(e.length):i;return E(p)===1}),u=l.filter(a=>{const i=a.name.trim(),p=e&&i.startsWith(e)?i.slice(e.length):i;return E(p)===2}),r=Math.ceil(v.value/2),s=[];for(let a=0;a<r&&a<n.length;a++)s.push(n[a]);for(let a=0;a<r&&a<u.length;a++)s.push(u[a]);const k=[...n.slice(r),...u.slice(r)];for(const a of k){if(s.length>=v.value)break;s.find(i=>i.name===a.name)||s.push(a)}return s}const Z=async()=>{if(N.value){y.value=!0,w.value=[];try{if(h.value==="母姓"&&!g.value.trim()){O.warning("已选择“母姓”，请先填写母姓再生成"),y.value=!1;return}if(h.value==="父姓"&&!m.value.trim()){O.warning("已选择“父姓”，请先填写父姓再生成"),y.value=!1;return}const o=new Set,e=[],d=n=>{const u=X(n);for(const r of u){const s=r.name;if(!(!s||o.has(s))&&(o.add(s),e.push(r),e.length>=v.value*3))break}};if($.value==="1-2"){const n=Math.ceil(v.value/2),u=v.value-n,r=L("2",n),s=L("1",u),k="​".repeat(1+Math.floor(Math.random()*3)),a="​".repeat(1+Math.floor(Math.random()*3)),[i,p]=await Promise.all([R.get(`${T.value}?path=${encodeURIComponent(B.value?r+k:r)}&target=${j.value}&params=_t=${Date.now()}`,{headers:{Authorization:"Bearer "+V.value}}),R.get(`${T.value}?path=${encodeURIComponent(B.value?s+a:s)}&target=${j.value}&params=_t=${Date.now()+1}`,{headers:{Authorization:"Bearer "+V.value}})]);d(typeof i.data=="string"?i.data:String(i.data)),d(typeof p.data=="string"?p.data:String(p.data))}else{const n=L($.value),u="​".repeat(1+Math.floor(Math.random()*3)),r=B.value?n+u:n,s=await R.get(`${T.value}?path=${encodeURIComponent(r)}&target=${j.value}&params=_t=${Date.now()}`,{headers:{Authorization:"Bearer "+V.value}});d(typeof s.data=="string"?s.data:String(s.data))}const l=Y(e);w.value=l.slice(0,v.value)}catch(o){console.error("生成失败:",o),alert("生成失败，请稍后重试")}finally{y.value=!1}}},ee=o=>q(o),te=()=>w.value.length&&q(w.value.map(o=>`${o.name}	${o.reason}`).join(`
`));return(o,e)=>{const d=oe("el-text");return f(),x("div",ce,[I(ue,{title:P.title},null,8,["title"]),t("div",pe,[t("div",ve,[t("div",me,[t("div",{class:"flex items-center justify-between"},[e[8]||(e[8]=t("label",{class:"block text-sm text-gray-700"},"父姓 / 母姓",-1)),t("button",{class:"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded",onClick:Q},"示例")]),t("div",ge,[b(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>m.value=l),maxlength:"2",placeholder:"父姓，如 张",class:"w-full p-2 border rounded-lg"},null,512),[[S,m.value]]),b(t("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>g.value=l),maxlength:"2",placeholder:"母姓，如 李（可选）",class:"w-full p-2 border rounded-lg"},null,512),[[S,g.value]])]),t("div",fe,[t("div",null,[e[10]||(e[10]=t("label",{class:"block text-sm text-gray-700 mb-1"},"姓氏使用",-1)),b(t("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>h.value=l),class:"w-full p-2 border rounded-lg"},e[9]||(e[9]=[t("option",{value:"父姓"},"父姓",-1),t("option",{value:"母姓"},"母姓",-1)]),512),[[U,h.value]])]),t("div",null,[e[12]||(e[12]=t("label",{class:"block text-sm text-gray-700 mb-1"},"性别",-1)),b(t("select",{"onUpdate:modelValue":e[3]||(e[3]=l=>z.value=l),class:"w-full p-2 border rounded-lg"},e[11]||(e[11]=[t("option",{value:"男"},"男",-1),t("option",{value:"女"},"女",-1)]),512),[[U,z.value]])])]),t("div",xe,[t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm text-gray-700 mb-1"},"名的长度",-1)),b(t("select",{"onUpdate:modelValue":e[4]||(e[4]=l=>$.value=l),class:"w-full p-2 border rounded-lg"},e[13]||(e[13]=[t("option",{value:"1"},"1",-1),t("option",{value:"1-2"},"1-2（默认）",-1),t("option",{value:"2"},"2",-1)]),512),[[U,$.value]])]),t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm text-gray-700 mb-1"},"风格",-1)),b(t("select",{"onUpdate:modelValue":e[5]||(e[5]=l=>C.value=l),class:"w-full p-2 border rounded-lg"},e[15]||(e[15]=[ae('<option value="不限">不限</option><option value="古典">古典</option><option value="现代">现代</option><option value="文雅">文雅</option><option value="阳光">阳光</option><option value="中性">中性</option><option value="诗意">诗意</option>',7)]),512),[[U,C.value]])]),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm text-gray-700 mb-1"},"数量",-1)),b(t("input",{"onUpdate:modelValue":e[6]||(e[6]=l=>v.value=l),type:"number",min:"1",max:"50",class:"w-full p-2 border rounded-lg"},null,512),[[S,v.value,void 0,{number:!0}]])])]),t("div",null,[t("div",be,[e[18]||(e[18]=t("label",{class:"block text-sm w-40 text-gray-700"},"寓意（可选）",-1)),t("div",he,[(f(),x(W,null,F(H,l=>t("button",{key:l,class:"px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded",onClick:n=>J(l)},_(l),9,ye)),64))])]),b(t("textarea",{"onUpdate:modelValue":e[7]||(e[7]=l=>M.value=l),rows:"3",maxlength:"200",placeholder:"例如：聪慧睿智 / 健康平安 / 自信阳光\\n可分行填写多个侧重点",class:"w-full p-2 border rounded-lg min-h-[80px]"},null,512),[[S,M.value]])]),t("button",{onClick:Z,disabled:!N.value,class:ie(["py-3 px-6 rounded-lg w-full transition",N.value?"bg-blue-600 hover:bg-blue-700 text-white":"bg-gray-400 cursor-not-allowed"])},_(y.value?"生成中...":"生成姓名"),11,we)]),t("div",ke,[t("div",$e,[e[19]||(e[19]=t("div",{class:"text-sm text-gray-600"},"生成结果",-1)),t("button",{class:"px-3 py-1 text-sm bg-emerald-500 text-white rounded",disabled:!w.value.length,onClick:te},"复制全部",8,_e)]),t("div",Ce,[y.value?(f(),x("div",Me,"生成中...")):(f(),x("ul",Se,[(f(!0),x(W,null,F(w.value,(l,n)=>(f(),x("li",{key:n,class:"flex items-start justify-between bg-white p-3 rounded border"},[t("div",Ue,[t("div",Ve,_(l.name),1),l.reason?(f(),x("div",Te,_(l.reason),1)):G("",!0)]),t("button",{class:"px-2 py-1 text-xs bg-blue-500 text-white rounded h-fit",onClick:u=>ee(l.name)},"复制",8,je)]))),128)),w.value.length?G("",!0):(f(),x("div",ze,"暂无结果"))]))])])])]),I(de,{title:"描述"},{default:K(()=>[I(d,null,{default:K(()=>[re(_(P.desc),1)]),_:1})]),_:1})])}}});export{Ee as default};
