var G=Object.defineProperty;var K=(g,t,s)=>t in g?G(g,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):g[t]=s;var T=(g,t,s)=>(K(g,typeof t!="symbol"?t+"":t,s),s);import{ab as O,ac as Q,s as m,ad as X,d as Y,v as F,H as y,I as Z,o as ee,r as x,ae as te,b as k,c as C,i,f as a,h as u,j as f,k as L,af as le,a2 as se,C as oe,F as ae,e as ne,J as ie,t as _,W as M,p as re,E as ue,_ as de}from"./index-86f78bf5.js";import{_ as ce}from"./DetailHeader.vue_vue_type_script_setup_true_lang-496f0367.js";import{_ as ve}from"./ToolDetail.vue_vue_type_script_setup_true_lang-c9ea9fe2.js";class me{constructor(){T(this,"instance");T(this,"proxyUrl");this.proxyUrl="https://tool.fologde.com",this.instance=O.create({baseURL:this.proxyUrl,timeout:3e4}),this.instance.interceptors.request.use(t=>{const s=Q();return s&&(t.headers=t.headers||{},t.headers.Authorization=`Bearer ${s}`),t},t=>Promise.reject(t)),this.instance.interceptors.response.use(t=>t,t=>{if(t.response){const s=t.response.status;s===401?(m.error("登录已过期，即将跳转到登录页"),setTimeout(()=>{window.location.href="/login"},1e3)):X(s)}else t.request&&m.error("网络连接失败");return Promise.reject(t)})}get(t,s){return this.instance.get(t,s)}post(t,s,n){return this.instance.post(t,s,n)}put(t,s,n){return this.instance.put(t,s,n)}delete(t,s){return this.instance.delete(t,s)}getProxyUrl(){return this.proxyUrl}}const V=new me,pe={class:"flex flex-col mt-3 flex-1"},fe={class:"p-4 rounded-2xl bg-white"},_e={class:"flex justify-between items-center mb-4"},ge={class:"flex space-x-2"},ye={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6"},xe=["onClick"],be={class:"flex justify-between items-start mb-2"},we={class:"font-medium text-gray-800 truncate flex-1"},ke={class:"flex space-x-2 ml-2"},Ce={class:"text-gray-600 text-sm line-clamp-3 mb-2"},he={class:"text-xs text-gray-400"},Ne={class:"dialog-footer"},Ve={key:0,class:"space-y-4"},$e={class:"p-3 bg-gray-50 rounded border"},Te={class:"p-3 bg-gray-50 rounded border whitespace-pre-wrap"},Ue={class:"grid grid-cols-2 gap-4 text-sm text-gray-500"},Be={class:"dialog-footer"},qe=Y({__name:"Notes",setup(g){const t=F({title:"笔记备忘录"}),s=y([]),n=y(null),v=y(!1),p=y(!1),h=y(null),r=F({title:"",content:""}),b=y(!1),d=y(!1),w=async()=>{try{b.value=!0;const o=await V.get("/api/notes");if(o.status===200){const e=o.data;s.value=e.notes||[]}}catch(o){console.error("获取笔记列表失败:",o)}finally{b.value=!1}},I=async()=>{if(!r.title.trim()||!r.content.trim()){m.warning("标题和内容不能为空");return}try{d.value=!0,(await V.post("/api/notes",{title:r.title.trim(),content:r.content.trim()})).status===201?(m.success("创建成功"),p.value=!1,$(),await w()):m.error("创建失败")}catch(o){console.error("创建笔记失败:",o)}finally{d.value=!1}},P=async()=>{if(!h.value||!r.title.trim()||!r.content.trim()){m.warning("标题和内容不能为空");return}try{d.value=!0,(await V.put(`/api/notes/${h.value}`,{title:r.title.trim(),content:r.content.trim()})).status===200?(m.success("更新成功"),p.value=!1,v.value=!1,h.value=null,$(),await w()):m.error("更新失败")}catch(o){console.error("更新笔记失败:",o)}finally{d.value=!1}},R=async o=>{var e;await ue.confirm("确定要删除这条笔记吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});try{d.value=!0,(await V.delete(`/api/notes/${o.id}`)).status===200?(m.success("删除成功"),((e=n.value)==null?void 0:e.id)===o.id&&(n.value=null),await w()):m.error("删除失败")}catch(c){console.error("删除笔记失败:",c)}finally{d.value=!1}},U=o=>{v.value=!0,h.value=o.id,r.title=o.title,r.content=o.content,p.value=!0},H=o=>{v.value||(n.value=o,p.value=!1)},S=()=>{n.value=null,v.value=!1,$(),p.value=!0},$=()=>{r.title="",r.content=""},N=o=>new Date(o).toLocaleString("zh-CN"),B=Z(()=>n.value!==null&&!p.value&&!v.value);return ee(()=>{w()}),(o,e)=>{const c=x("el-button"),q=x("el-input"),D=x("el-form-item"),A=x("el-form"),E=x("el-dialog"),J=x("el-text"),W=te("loading");return k(),C("div",pe,[i(ce,{title:t.title},null,8,["title"]),a("div",fe,[a("div",_e,[e[12]||(e[12]=a("h3",{class:"text-lg font-semibold text-gray-800"},"我的笔记",-1)),a("div",ge,[i(c,{type:"default",onClick:w,icon:L(le),loading:b.value,disabled:b.value},{default:u(()=>e[10]||(e[10]=[f(" 刷新 ",-1)])),_:1,__:[10]},8,["icon","loading","disabled"]),i(c,{type:"primary",onClick:S,icon:L(se)},{default:u(()=>e[11]||(e[11]=[f(" 新建笔记 ",-1)])),_:1,__:[11]},8,["icon"])])]),oe((k(),C("div",ye,[(k(!0),C(ae,null,ne(s.value,l=>{var j;return k(),C("div",{key:l.id,class:ie(["border rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer",{"border-blue-500 bg-blue-50":((j=n.value)==null?void 0:j.id)===l.id}]),onClick:z=>H(l)},[a("div",be,[a("h4",we,_(l.title),1),a("div",ke,[i(c,{size:"small",type:"primary",loading:d.value,disabled:d.value,onClick:M(z=>U(l),["stop"])},{default:u(()=>e[13]||(e[13]=[f(" 编辑 ",-1)])),_:2,__:[13]},1032,["loading","disabled","onClick"]),i(c,{size:"small",type:"danger",loading:d.value,disabled:d.value,onClick:M(z=>R(l),["stop"])},{default:u(()=>e[14]||(e[14]=[f(" 删除 ",-1)])),_:2,__:[14]},1032,["loading","disabled","onClick"])])]),a("p",Ce,_(l.content),1),a("div",he,[a("div",null,"创建: "+_(N(l.createTime)),1),a("div",null,"更新: "+_(N(l.updateTime)),1)])],10,xe)}),128))])),[[W,b.value]]),i(E,{modelValue:p.value,"onUpdate:modelValue":e[4]||(e[4]=l=>p.value=l),title:v.value?"编辑笔记":"新建笔记",width:"80%",onClose:e[5]||(e[5]=l=>v.value=!1)},{footer:u(()=>[a("span",Ne,[i(c,{disabled:d.value,onClick:e[2]||(e[2]=l=>{p.value=!1,v.value=!1})},{default:u(()=>e[15]||(e[15]=[f(" 取消 ",-1)])),_:1,__:[15]},8,["disabled"]),i(c,{type:"primary",loading:d.value,disabled:d.value,onClick:e[3]||(e[3]=l=>v.value?P():I())},{default:u(()=>[f(_(v.value?"更新":"创建"),1)]),_:1},8,["loading","disabled"])])]),default:u(()=>[i(A,{model:r,"label-width":"80px"},{default:u(()=>[i(D,{label:"标题",required:""},{default:u(()=>[i(q,{modelValue:r.title,"onUpdate:modelValue":e[0]||(e[0]=l=>r.title=l),placeholder:"请输入笔记标题"},null,8,["modelValue"])]),_:1}),i(D,{label:"内容",required:""},{default:u(()=>[i(q,{modelValue:r.content,"onUpdate:modelValue":e[1]||(e[1]=l=>r.content=l),type:"textarea",rows:8,placeholder:"请输入笔记内容"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),i(E,{modelValue:B.value,"onUpdate:modelValue":e[8]||(e[8]=l=>B.value=l),title:"笔记详情",width:"80%",onClose:e[9]||(e[9]=l=>n.value=null)},{footer:u(()=>[a("span",Be,[i(c,{onClick:e[6]||(e[6]=l=>n.value=null)},{default:u(()=>e[18]||(e[18]=[f("关闭",-1)])),_:1,__:[18]}),i(c,{type:"primary",onClick:e[7]||(e[7]=l=>n.value&&U(n.value))},{default:u(()=>e[19]||(e[19]=[f("编辑",-1)])),_:1,__:[19]})])]),default:u(()=>[n.value?(k(),C("div",Ve,[a("div",null,[e[16]||(e[16]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"标题",-1)),a("div",$e,_(n.value.title),1)]),a("div",null,[e[17]||(e[17]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"内容",-1)),a("div",Te,_(n.value.content),1)]),a("div",Ue,[a("div",null,"创建时间: "+_(N(n.value.createTime)),1),a("div",null,"更新时间: "+_(N(n.value.updateTime)),1)])])):re("",!0)]),_:1},8,["modelValue"])]),i(ve,{title:"描述"},{default:u(()=>[i(J,null,{default:u(()=>e[20]||(e[20]=[f(" 在线笔记记录工具，支持创建、编辑、删除笔记，数据安全存储在云端。您可以随时记录想法、待办事项、学习笔记等，支持富文本编辑，数据实时同步。 ",-1)])),_:1,__:[20]})]),_:1})])}}});const Fe=de(qe,[["__scopeId","data-v-c6ec7e43"]]);export{Fe as default};
