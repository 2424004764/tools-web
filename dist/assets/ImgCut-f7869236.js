import{D}from"./DetailHeader-30579ead.js";import{T as V}from"./ToolDetail-62a53281.js";import{d as L,k as R,I as p,x as N,y as T,o as E,r as v,b as c,c as m,h as l,f as i,w as u,i as _,P as U,F as B,e as M,D as S,K as $,_ as z}from"./index-748c5ee5.js";const H={class:"flex flex-col mt-3 flex-1"},j={class:"p-4 rounded-2xl bg-white"},q={class:"flex mt-3"},A={class:"flex"},K={key:0,class:"mt-3 min-h-md bg-gray-100 p-3 mb-3 flex flex-col"},P={class:"mb-3"},W=["src"],G=["src"],J={key:1},O=L({__name:"ImgCut",setup(Q){const I=R({title:"图片切割"}),h=p(),n=p(3),d=p({}),y=p([]),g=p(),C=async t=>{let e=new FileReader;e.readAsDataURL(t.file),e.addEventListener("load",async()=>{const a=new Image;a.onload=()=>{d.value=a,w()},a.src=e.result},!1)},F=t=>{g.value.clearFiles();const e=t[0];e.uid=$(),g.value.handleStart(e),g.value.submit()},w=()=>{const t=document.createElement("canvas"),e=t.getContext("2d"),a=d.value,r=Math.floor(a.naturalWidth/n.value),s=Math.floor(a.naturalHeight/n.value),x=[];t.width=r,t.height=s;for(let f=0;f<n.value;f++)for(let o=0;o<n.value;o++)e==null||e.drawImage(a,o*r,f*s,r,s,0,0,r,s),x.push(t.toDataURL());y.value=x},b=N(()=>{const t=`width: ${d.value.width||800}px;`,e=`grid: repeat(${n.value}, 1fr) / repeat(${n.value}, 1fr);`;return t+e});return T(b,()=>{h.value&&w()}),E(()=>{}),(t,e)=>{const a=v("el-button"),r=v("el-upload"),s=v("el-text"),x=v("el-input-number"),f=v("el-empty");return c(),m("div",H,[l(D,{title:I.title},null,8,["title"]),i("div",j,[l(r,{"file-list":h.value,"onUpdate:fileList":e[0]||(e[0]=o=>h.value=o),class:"dataFileRef flex",ref_key:"dataFileRef",ref:g,accept:"image/*","http-request":C,"on-exceed":F,limit:1},{default:u(()=>[l(a,{type:"primary"},{default:u(()=>e[2]||(e[2]=[_("请上传需要切割的图片",-1)])),_:1,__:[2]})]),_:1},8,["file-list"]),i("div",q,[i("div",A,[l(s,null,{default:u(()=>e[3]||(e[3]=[_("行数和列数",-1)])),_:1,__:[3]}),l(x,{modelValue:n.value,"onUpdate:modelValue":e[1]||(e[1]=o=>n.value=o),min:1,max:10,class:"ml-3"},null,8,["modelValue"])])]),d.value.src?(c(),m("div",K,[i("div",P,[l(s,null,{default:u(()=>e[4]||(e[4]=[_("预览: ",-1)])),_:1,__:[4]}),i("div",{style:U(b.value),class:"grid gap-1 max-w-full"},[(c(!0),m(B,null,M(y.value,(o,k)=>(c(),m("img",{key:k,src:o,alt:"结果"},null,8,W))),128))],4)]),i("div",null,[l(s,null,{default:u(()=>e[5]||(e[5]=[_("原图: ",-1)])),_:1,__:[5]}),i("div",null,[d.value.src?(c(),m("img",{key:0,src:d.value.src,alt:"原图"},null,8,G)):S("",!0)])])])):(c(),m("div",J,[l(f,{"image-size":200,description:"无预览"})]))]),l(V,{title:"描述"},{default:u(()=>[l(s,null,{default:u(()=>e[6]||(e[6]=[_(" 将图片分割成四宫格、九宫格、十六宫格，支持自定义行与列；",-1),i("br",null,null,-1),_(" 比如：九宫格切图广泛应用于微信朋友圈，微博等社交媒体。 ",-1)])),_:1,__:[6]})]),_:1})])}}}),ee=z(O,[["__file","D:/dev/nodejs/tools-web/src/components/Tools/ImgCut/ImgCut.vue"]]);export{ee as default};
