import{_ as V}from"./DetailHeader.vue_vue_type_script_setup_true_lang-72404a5c.js";import{_ as L}from"./ToolDetail.vue_vue_type_script_setup_true_lang-54ef318e.js";import{d as R,k as N,y as p,z as U,K as E,o as $,r as v,b as c,c as r,h as t,f as u,w as i,i as _,O as z,F as B,e as D,A as M,U as S,_ as A}from"./index-9caed04d.js";const T={class:"flex flex-col mt-3 flex-1"},q={class:"p-4 rounded-2xl bg-white"},H={class:"flex mt-3"},K={class:"flex"},O={key:0,class:"mt-3 min-h-md bg-gray-100 p-3 mb-3 flex flex-col md:flex-row gap-4 items-start"},W={class:"w-full md:w-1/2"},j=["src"],G={class:"w-full md:w-1/2"},J={class:"w-full"},P=["src"],Q={key:1},X=R({__name:"ImgCut",setup(Y){const k=N({title:"图片切割"}),w=p(),n=p(3),m=p({}),y=p([]),g=p(),F=async l=>{let e=new FileReader;e.readAsDataURL(l.file),e.addEventListener("load",async()=>{const s=new Image;s.onload=()=>{m.value=s,h()},s.src=e.result},!1)},I=l=>{g.value.clearFiles();const e=l[0];e.uid=S(),g.value.handleStart(e),g.value.submit()},h=()=>{const l=document.createElement("canvas"),e=l.getContext("2d"),s=m.value,d=Math.floor(s.naturalWidth/n.value),a=Math.floor(s.naturalHeight/n.value),x=[];l.width=d,l.height=a;for(let f=0;f<n.value;f++)for(let o=0;o<n.value;o++)e==null||e.drawImage(s,o*d,f*a,d,a,0,0,d,a),x.push(l.toDataURL());y.value=x},b=U(()=>`grid: repeat(${n.value}, 1fr) / repeat(${n.value}, 1fr);`);return E(b,()=>{w.value&&h()}),$(()=>{}),(l,e)=>{const s=v("el-button"),d=v("el-upload"),a=v("el-text"),x=v("el-input-number"),f=v("el-empty");return c(),r("div",T,[t(V,{title:k.title},null,8,["title"]),u("div",q,[t(d,{"file-list":w.value,"onUpdate:fileList":e[0]||(e[0]=o=>w.value=o),class:"dataFileRef flex flex-col md:flex-row gap-2 md:gap-3 w-full",ref_key:"dataFileRef",ref:g,accept:"image/*","http-request":F,"on-exceed":I,limit:1},{default:i(()=>[t(s,{type:"primary"},{default:i(()=>e[2]||(e[2]=[_("请上传需要切割的图片",-1)])),_:1,__:[2]})]),_:1},8,["file-list"]),u("div",H,[u("div",K,[t(a,null,{default:i(()=>e[3]||(e[3]=[_("行数和列数",-1)])),_:1,__:[3]}),t(x,{modelValue:n.value,"onUpdate:modelValue":e[1]||(e[1]=o=>n.value=o),min:1,max:10,class:"ml-3"},null,8,["modelValue"])])]),m.value.src?(c(),r("div",O,[u("div",W,[t(a,null,{default:i(()=>e[4]||(e[4]=[_("预览: ",-1)])),_:1,__:[4]}),u("div",{style:z(b.value),class:"grid gap-2 w-full"},[(c(!0),r(B,null,D(y.value,(o,C)=>(c(),r("img",{key:C,src:o,alt:"结果",class:"w-full h-auto block"},null,8,j))),128))],4)]),u("div",G,[t(a,null,{default:i(()=>e[5]||(e[5]=[_("原图: ",-1)])),_:1,__:[5]}),u("div",J,[m.value.src?(c(),r("img",{key:0,src:m.value.src,alt:"原图",class:"max-w-full h-auto block"},null,8,P)):M("",!0)])])])):(c(),r("div",Q,[t(f,{"image-size":200,description:"无预览"})]))]),t(L,{title:"描述"},{default:i(()=>[t(a,null,{default:i(()=>e[6]||(e[6]=[_(" 将图片分割成四宫格、九宫格、十六宫格，支持自定义行与列；",-1),u("br",null,null,-1),_(" 比如：九宫格切图广泛应用于微信朋友圈，微博等社交媒体。 ",-1)])),_:1,__:[6]})]),_:1})])}}});const le=A(X,[["__scopeId","data-v-050c051f"]]);export{le as default};
