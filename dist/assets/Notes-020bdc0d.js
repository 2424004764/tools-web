var W=Object.defineProperty;var G=(g,t,s)=>t in g?W(g,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):g[t]=s;var $=(g,t,s)=>(G(g,typeof t!="symbol"?t+"":t,s),s);import{ab as K,ac as O,ad as Q,s as _,d as X,v as j,H as b,I as Y,o as Z,r as y,ae as ee,b as k,c as C,i,f as n,h as u,j as f,k as z,af as te,a2 as le,C as se,F as oe,e as ae,J as ne,t as v,W as F,p as ie,E as re,_ as ue}from"./index-b25e871b.js";import{_ as de}from"./DetailHeader.vue_vue_type_script_setup_true_lang-0d0e5151.js";import{_ as ce}from"./ToolDetail.vue_vue_type_script_setup_true_lang-d2963b03.js";class pe{constructor(){$(this,"instance");$(this,"proxyUrl");this.proxyUrl="https://tool.fologde.com",this.instance=K.create({baseURL:this.proxyUrl,timeout:3e4}),this.instance.interceptors.request.use(t=>{const s=O();return s&&(t.headers=t.headers||{},t.headers.Authorization=`Bearer ${s}`),t},t=>Promise.reject(t)),this.instance.interceptors.response.use(t=>t,t=>{var s,l;if(t.response){const c=t.response.status,p=(l=(s=t.config)==null?void 0:s.url)==null?void 0:l.includes("/api/notes");Q(c,{isSpecialApi:p,autoRedirectLogin:!p})}else t.request&&_.error("网络连接失败");return Promise.reject(t)})}get(t,s){return this.instance.get(t,s)}post(t,s,l){return this.instance.post(t,s,l)}put(t,s,l){return this.instance.put(t,s,l)}delete(t,s){return this.instance.delete(t,s)}getProxyUrl(){return this.proxyUrl}}const N=new pe,me={class:"flex flex-col mt-3 flex-1"},fe={class:"p-4 rounded-2xl bg-white"},ve={class:"flex justify-between items-center mb-4"},_e={class:"flex space-x-2"},ge={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6"},be=["onClick"],ye={class:"flex justify-between items-start mb-2"},xe={class:"font-medium text-gray-800 truncate flex-1"},we={class:"flex space-x-2 ml-2"},ke={class:"text-gray-600 text-sm line-clamp-3 mb-2"},Ce={class:"text-xs text-gray-400"},he={class:"dialog-footer"},Ne={key:0,class:"space-y-4"},Ve={class:"p-3 bg-gray-50 rounded border"},$e={class:"p-3 bg-gray-50 rounded border whitespace-pre-wrap"},Ue={class:"grid grid-cols-2 gap-4 text-sm text-gray-500"},Te={class:"dialog-footer"},Be=X({__name:"Notes",setup(g){const t=j({title:"笔记备忘录"}),s=b([]),l=b(null),c=b(!1),p=b(!1),r=j({title:"",content:""}),x=b(!1),d=b(!1),w=async()=>{try{x.value=!0;const o=await N.get("/api/notes");if(o.status===200){const e=o.data;s.value=e.notes||[]}}catch(o){console.error("获取笔记列表失败:",o)}finally{x.value=!1}},M=async()=>{if(!r.title.trim()||!r.content.trim()){_.warning("标题和内容不能为空");return}try{d.value=!0,(await N.post("/api/notes",{title:r.title.trim(),content:r.content.trim()})).status===201?(_.success("创建成功"),p.value=!1,V(),await w()):_.error("创建失败")}catch(o){console.error("创建笔记失败:",o)}finally{d.value=!1}},R=async()=>{if(!l.value||!r.title.trim()||!r.content.trim()){_.warning("标题和内容不能为空");return}try{d.value=!0,(await N.put(`/api/notes/${l.value.id}`,{title:r.title.trim(),content:r.content.trim()})).status===200?(_.success("更新成功"),p.value=!1,c.value=!1,l.value=null,V(),await w()):_.error("更新失败")}catch(o){console.error("更新笔记失败:",o)}finally{d.value=!1}},A=async o=>{var e;await re.confirm("确定要删除这条笔记吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});try{d.value=!0,(await N.delete(`/api/notes/${o.id}`)).status===200?(_.success("删除成功"),((e=l.value)==null?void 0:e.id)===o.id&&(l.value=null),await w()):_.error("删除失败")}catch(m){console.error("删除笔记失败:",m)}finally{d.value=!1}},U=o=>{l.value=o,r.title=o.title,r.content=o.content,c.value=!0,p.value=!0},P=o=>{c.value||(l.value=o,p.value=!1)},S=()=>{l.value=null,c.value=!1,V(),p.value=!0},V=()=>{r.title="",r.content=""},h=o=>new Date(o).toLocaleString("zh-CN"),T=Y(()=>l.value!==null&&!p.value&&!c.value);return Z(()=>{w()}),(o,e)=>{const m=y("el-button"),B=y("el-input"),q=y("el-form-item"),H=y("el-form"),D=y("el-dialog"),I=y("el-text"),J=ee("loading");return k(),C("div",me,[i(de,{title:t.title},null,8,["title"]),n("div",fe,[n("div",ve,[e[11]||(e[11]=n("h3",{class:"text-lg font-semibold text-gray-800"},"我的笔记",-1)),n("div",_e,[i(m,{type:"default",onClick:w,icon:z(te),loading:x.value,disabled:x.value},{default:u(()=>e[9]||(e[9]=[f(" 刷新 ",-1)])),_:1,__:[9]},8,["icon","loading","disabled"]),i(m,{type:"primary",onClick:S,icon:z(le)},{default:u(()=>e[10]||(e[10]=[f(" 新建笔记 ",-1)])),_:1,__:[10]},8,["icon"])])]),se((k(),C("div",ge,[(k(!0),C(oe,null,ae(s.value,a=>{var E;return k(),C("div",{key:a.id,class:ne(["border rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer",{"border-blue-500 bg-blue-50":((E=l.value)==null?void 0:E.id)===a.id}]),onClick:L=>P(a)},[n("div",ye,[n("h4",xe,v(a.title),1),n("div",we,[i(m,{size:"small",type:"primary",loading:d.value,disabled:d.value,onClick:F(L=>U(a),["stop"])},{default:u(()=>e[12]||(e[12]=[f(" 编辑 ",-1)])),_:2,__:[12]},1032,["loading","disabled","onClick"]),i(m,{size:"small",type:"danger",loading:d.value,disabled:d.value,onClick:F(L=>A(a),["stop"])},{default:u(()=>e[13]||(e[13]=[f(" 删除 ",-1)])),_:2,__:[13]},1032,["loading","disabled","onClick"])])]),n("p",ke,v(a.content),1),n("div",Ce,[n("div",null,"创建: "+v(h(a.createTime)),1),n("div",null,"更新: "+v(h(a.updateTime)),1)])],10,be)}),128))])),[[J,x.value]]),i(D,{modelValue:p.value,"onUpdate:modelValue":e[4]||(e[4]=a=>p.value=a),title:c.value?"编辑笔记":"新建笔记",width:"80%","close-on-click-modal":!1,onClose:e[5]||(e[5]=a=>c.value=!1)},{footer:u(()=>[n("span",he,[i(m,{disabled:d.value,onClick:e[2]||(e[2]=a=>{p.value=!1,c.value=!1})},{default:u(()=>e[14]||(e[14]=[f(" 取消 ",-1)])),_:1,__:[14]},8,["disabled"]),i(m,{type:"primary",loading:d.value,disabled:d.value,onClick:e[3]||(e[3]=a=>c.value?R():M())},{default:u(()=>[f(v(c.value?"更新":"创建"),1)]),_:1},8,["loading","disabled"])])]),default:u(()=>[i(H,{model:r,"label-width":"80px"},{default:u(()=>[i(q,{label:"标题",required:""},{default:u(()=>[i(B,{modelValue:r.title,"onUpdate:modelValue":e[0]||(e[0]=a=>r.title=a),placeholder:"请输入笔记标题"},null,8,["modelValue"])]),_:1}),i(q,{label:"内容",required:""},{default:u(()=>[i(B,{modelValue:r.content,"onUpdate:modelValue":e[1]||(e[1]=a=>r.content=a),type:"textarea",rows:8,placeholder:"请输入笔记内容"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),i(D,{modelValue:T.value,"onUpdate:modelValue":e[8]||(e[8]=a=>T.value=a),title:"笔记详情",width:"80%","close-on-click-modal":!1},{footer:u(()=>[n("span",Te,[i(m,{onClick:e[6]||(e[6]=a=>l.value=null)},{default:u(()=>e[17]||(e[17]=[f("关闭",-1)])),_:1,__:[17]}),i(m,{type:"primary",onClick:e[7]||(e[7]=a=>U(l.value))},{default:u(()=>e[18]||(e[18]=[f("编辑",-1)])),_:1,__:[18]})])]),default:u(()=>[l.value?(k(),C("div",Ne,[n("div",null,[e[15]||(e[15]=n("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"标题",-1)),n("div",Ve,v(l.value.title),1)]),n("div",null,[e[16]||(e[16]=n("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"内容",-1)),n("div",$e,v(l.value.content),1)]),n("div",Ue,[n("div",null,"创建时间: "+v(h(l.value.createTime)),1),n("div",null,"更新时间: "+v(h(l.value.updateTime)),1)])])):ie("",!0)]),_:1},8,["modelValue"])]),i(ce,{title:"描述"},{default:u(()=>[i(I,null,{default:u(()=>e[19]||(e[19]=[f(" 在线笔记记录工具，支持创建、编辑、删除笔记，数据安全存储在云端。您可以随时记录想法、待办事项、学习笔记等，支持富文本编辑，数据实时同步。 ",-1)])),_:1,__:[19]})]),_:1})])}}});const je=ue(Be,[["__scopeId","data-v-5f3fbcbb"]]);export{je as default};
