import{d as A,I as s,k as S,o as B,r as D,b as d,c as u,h,f as e,U as m,V as x,W as L,F as N,e as H,t as _,X as R,w,i as z,Y as k,_ as F}from"./index-b213e695.js";import{D as K}from"./DetailHeader-6594db68.js";import{T as O}from"./ToolDetail-cd374e24.js";const E={class:"flex flex-col mt-3 flex-1"},$={class:"p-4 rounded-2xl bg-white"},P={class:"ai-text-to-image"},W={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},X={class:"space-y-6"},Y={class:"input-section"},q={class:"model-selector"},G=["value"],J={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Q={class:"flex"},Z={class:"flex justify-between mt-1"},ee={class:"flex items-center justify-start md:justify-end"},te={class:"flex items-center"},le={class:"result-section"},se={key:0,class:"loading flex flex-col items-center justify-center h-full"},oe={key:1,class:"result h-full flex flex-col"},ae={class:"flex-1 flex items-center justify-center"},ne=["src"],re={key:2,class:"placeholder flex flex-col items-center justify-center h-full text-center p-8"},ie=A({__name:"AiTextToImage",setup(de){const T=s("NpgaKlHjioTlyo2B"),v=S({title:"在线文生图",desc:"免费无限次数生成图片，无需登录注册、直接使用",maxSeed:1e8}),p=s("汽车"),c=s(""),g=s(!1),n=s([]),r=s(""),b=s(1024),f=s(1024),y=s(!1),i=s(-1),j=async()=>{try{const t=(await k.get("https://image.pollinations.ai/models")).data;n.value=t.map(o=>({value:o,label:o.charAt(0).toUpperCase()+o.slice(1)})),n.value.length>0&&(r.value=n.value[0].value)}catch(a){console.error("获取模型失败:",a),n.value=[{value:"flux",label:"Flux"},{value:"kontext",label:"Kontext"},{value:"turbo",label:"Turbo"}],r.value=n.value[0].value}};B(()=>{j()});const U=()=>{i.value=Math.floor(Math.random()*v.maxSeed)},C=async()=>{if(!(!p.value.trim()||!r.value)){g.value=!0,c.value="";try{const a=i.value===-1?Math.floor(Math.random()*v.maxSeed):i.value,t={model:r.value,width:b.value,height:f.value,nologo:y.value?"true":void 0,seed:a.toString()},o=Object.fromEntries(Object.entries(t).filter(([ue,V])=>V!==void 0));o._t=Date.now();const l=await k.get(`https://image.pollinations.ai/prompt/${encodeURIComponent(p.value)}`,{params:o,headers:{Authorization:"Bearer "+T.value},responseType:"blob"}),M=new Blob([l.data],{type:"image/png"});c.value=URL.createObjectURL(M)}catch(a){console.error("生成失败:",a),alert("图像生成失败，请重试")}finally{g.value=!1}}},I=()=>{window.open(c.value,"_blank")};return(a,t)=>{const o=D("el-text");return d(),u("div",E,[h(K,{title:v.title},null,8,["title"]),e("div",$,[e("div",P,[e("div",W,[e("div",X,[e("div",Y,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"提示词",-1)),m(e("textarea",{"onUpdate:modelValue":t[0]||(t[0]=l=>p.value=l),placeholder:"输入描述文字...",class:"w-full p-4 border rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 min-h-[150px]"},null,512),[[x,p.value]])]),e("div",q,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"选择模型",-1)),m(e("select",{"onUpdate:modelValue":t[1]||(t[1]=l=>r.value=l),class:"w-full p-3 border rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500"},[(d(!0),u(N,null,H(n.value,l=>(d(),u("option",{key:l.value,value:l.value},_(l.label),9,G))),128))],512),[[L,r.value]])]),e("div",J,[e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"宽度 (px)",-1)),m(e("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>b.value=l),type:"number",min:"64",max:"4096",class:"w-full p-2 border rounded-lg"},null,512),[[x,b.value,void 0,{number:!0}]])]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"高度 (px)",-1)),m(e("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>f.value=l),type:"number",min:"64",max:"4096",class:"w-full p-2 border rounded-lg"},null,512),[[x,f.value,void 0,{number:!0}]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"随机种子",-1)),e("div",Q,[m(e("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>i.value=l),type:"number",min:"-1",class:"flex-1 p-2 border rounded-l-lg",placeholder:"-1 表示随机"},null,512),[[x,i.value,void 0,{number:!0}]]),e("button",{onClick:U,class:"bg-gray-200 hover:bg-gray-300 px-3 rounded-r-lg border-t border-r border-b",title:"生成随机种子"},t[11]||(t[11]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z","clip-rule":"evenodd"})],-1)]))]),e("div",Z,[t[12]||(t[12]=e("p",{class:"text-xs text-gray-500"},"-1 = 随机",-1)),e("button",{onClick:t[5]||(t[5]=l=>i.value=-1),class:"text-xs text-blue-600 hover:text-blue-800"}," 设为随机 ")])]),e("div",ee,[e("div",te,[m(e("input",{"onUpdate:modelValue":t[6]||(t[6]=l=>y.value=l),type:"checkbox",id:"noLogo",class:"mr-2"},null,512),[[R,y.value]]),t[14]||(t[14]=e("label",{for:"noLogo",class:"text-sm font-medium text-gray-700"},"不显示水印",-1))])])]),e("button",{onClick:C,class:"generate-btn bg-blue-600 hover:bg-blue-700 text-white py-3 px-6 rounded-lg shadow-md transition w-full"}," 生成图像 ")]),e("div",le,[g.value?(d(),u("div",se,t[15]||(t[15]=[e("div",{class:"spinner"},null,-1),e("p",{class:"mt-4 text-lg"},"生成中...",-1)]))):c.value?(d(),u("div",oe,[t[16]||(t[16]=e("div",{class:"mb-4"},[e("h3",{class:"text-lg font-medium text-gray-700"},"生成结果"),e("p",{class:"text-sm text-gray-500"},"点击图像可查看大图")],-1)),e("div",ae,[e("img",{src:c.value,alt:"生成的图像",class:"rounded-lg shadow-lg max-w-full max-h-[70vh] object-contain cursor-pointer",onClick:I},null,8,ne)])])):(d(),u("div",re,t[17]||(t[17]=[e("div",{class:"bg-gray-200 border-2 border-dashed rounded-xl w-16 h-16 mb-4"},null,-1),e("h3",{class:"text-lg font-medium text-gray-700 mb-2"},"等待生成图像",-1),e("p",{class:"text-gray-500"},'输入提示词并点击"生成图像"按钮',-1)])))])])])]),h(O,{title:"描述"},{default:w(()=>[h(o,null,{default:w(()=>[z(_(v.desc),1)]),_:1})]),_:1})])}}});const pe=F(ie,[["__scopeId","data-v-2c8bf4a0"],["__file","D:/dev/nodejs/tools-web/src/components/Tools/AiTextToImage/AiTextToImage.vue"]]);export{pe as default};
