import{_ as Z}from"./DetailHeader.vue_vue_type_script_setup_true_lang-40b029c2.js";import{_ as R}from"./ToolDetail.vue_vue_type_script_setup_true_lang-6980ef81.js";import{d as q,z as A,r as O,o as Q,e as ee,f as G,g as n,h as i,m as k,j as s,t as u,l as m,p as c,k as W,K as H,v as b,U as P,F as h,i as L,x as te,_ as se}from"./index-5a32f9af.js";const le={class:"flex flex-col mt-3 ml-4 flex-1 mr-3"},re={class:"p-6 rounded-2xl bg-white shadow-sm border border-gray-200"},ae={class:"max-w-4xl mx-auto"},oe={class:"grid grid-cols-2 md:grid-cols-6 gap-4 mb-6"},ne={class:"text-center bg-blue-50 p-3 rounded-lg border border-blue-200"},de={class:"text-xl font-bold text-blue-600"},ie={class:"text-center bg-green-50 p-3 rounded-lg border border-green-200"},ue={class:"text-xl font-bold text-green-600"},ce={class:"text-center bg-purple-50 p-3 rounded-lg border border-purple-200"},ge={class:"text-xl font-bold text-purple-600"},be={class:"text-center bg-orange-50 p-3 rounded-lg border border-orange-200"},fe={class:"text-xl font-bold text-orange-600"},ve={class:"text-center bg-indigo-50 p-3 rounded-lg border border-indigo-200"},pe={class:"text-xl font-bold text-indigo-600"},xe={class:"text-center bg-red-50 p-3 rounded-lg border border-red-200"},me={class:"text-xl font-bold text-red-600"},he={class:"flex flex-col sm:flex-row justify-center items-center gap-4 mb-6"},ye={class:"flex items-center gap-3 bg-gray-50 p-3 rounded-lg border border-gray-200"},_e={class:"text-sm font-bold text-gray-800 min-w-[40px] text-center"},we={class:"flex gap-3"},Se={class:"flex justify-center mb-6"},ke={key:0,class:"text-center mb-6"},Pe={class:"flex justify-center mb-6"},Le={class:"flex gap-8"},ze={class:"bg-gray-100 p-4 rounded-lg shadow-lg"},Ce={class:"bg-gray-100 p-4 rounded-lg shadow-lg"},Ie={key:1,class:"text-center mb-6"},De={class:"bg-red-50 border-2 border-red-300 rounded-lg p-4 shadow-md"},We={class:"text-red-600"},Me={class:"text-red-600"},$e={class:"text-red-600"},Ae={key:0,class:"text-yellow-600 font-medium mt-2"},Oe=q({__name:"Tetris",setup(He){const J=A({title:"俄罗斯方块"}),t=A({isPlaying:!1,isPaused:!1,score:0,highScore:0,level:1,lines:0,gameOver:!1}),r=A({boardWidth:window.innerWidth<768?10:12,boardHeight:window.innerWidth<768?20:22,cellSize:window.innerWidth<768?25:30,speedLevel:3,minSpeedLevel:1,maxSpeedLevel:10}),z=l=>1100-l*100,f=O([]),a=O(null),p=O(null);let d=null;const M={I:[[1,1,1,1]],O:[[1,1],[1,1]],T:[[0,1,0],[1,1,1]],S:[[0,1,1],[1,1,0]],Z:[[1,1,0],[0,1,1]],J:[[1,0,0],[1,1,1]],L:[[0,0,1],[1,1,1]]},T={I:"#00f5ff",O:"#ffff00",T:"#a000f0",S:"#00f000",Z:"#f00000",J:"#0000f0",L:"#ffa000"},j=()=>{f.value=Array(r.boardHeight).fill(null).map(()=>Array(r.boardWidth).fill(0))},C=()=>{const l=Object.keys(M),e=l[Math.floor(Math.random()*l.length)];return{shape:M[e],type:e,x:Math.floor(r.boardWidth/2)-Math.floor(M[e][0].length/2),y:0}},$=(l,e)=>{for(let o=0;o<l.shape.length;o++)for(let g=0;g<l.shape[o].length;g++)if(l.shape[o][g]){const x=l.x+g,w=l.y+o;if(x<0||x>=r.boardWidth||w>=r.boardHeight||w>=0&&e[w][x])return!0}return!1},K=()=>{if(a.value){for(let l=0;l<a.value.shape.length;l++)for(let e=0;e<a.value.shape[l].length;e++)if(a.value.shape[l][e]){const o=a.value.x+e,g=a.value.y+l;g>=0&&(f.value[g][o]=1)}X(),a.value=p.value,p.value=C(),a.value&&$(a.value,f.value)&&Y()}},X=()=>{let l=0;for(let e=r.boardHeight-1;e>=0;e--)f.value[e].every(o=>o===1)&&(f.value.splice(e,1),f.value.unshift(Array(r.boardWidth).fill(0)),l++,e++);if(l>0){t.lines+=l,t.score+=l*100*t.level;const e=Math.floor(t.lines/10)+1;if(e>t.level&&(t.level=e,d)){clearInterval(d);const o=z(r.speedLevel);d=setInterval(I,Math.max(100,o-t.level*50))}}},y=(l,e)=>{if(!a.value)return!1;const o={...a.value,x:a.value.x+l,y:a.value.y+e};return $(o,f.value)?!1:(a.value.x=o.x,a.value.y=o.y,!0)},B=()=>{if(!a.value)return;const l=a.value.shape[0].map((o,g)=>a.value.shape.map(x=>x[g]).reverse()),e={...a.value,shape:l};$(e,f.value)||(a.value.shape=l)},N=()=>{if(t.isPlaying)if(t.isPaused=!t.isPaused,t.isPaused)d&&(clearInterval(d),d=null);else{const l=z(r.speedLevel);d=setInterval(I,Math.max(100,l-t.level*50))}},V=l=>{const e=Math.max(r.minSpeedLevel,Math.min(r.maxSpeedLevel,r.speedLevel+l));if(r.speedLevel=e,t.isPlaying&&!t.isPaused&&d){clearInterval(d);const o=z(r.speedLevel);d=setInterval(I,Math.max(100,o-t.level*50))}},I=()=>{!t.isPlaying||t.isPaused||!a.value||y(0,1)||K()},E=()=>{t.isPlaying=!0,t.isPaused=!1,t.gameOver=!1,t.score=0,t.level=1,t.lines=0,j(),a.value=C(),p.value=C();const l=z(r.speedLevel);d=setInterval(I,l)},Y=()=>{t.isPlaying=!1,t.gameOver=!0,d&&(clearInterval(d),d=null),t.score>t.highScore&&(t.highScore=t.score,localStorage.setItem("tetrisHighScore",t.highScore.toString()))},F=()=>{d&&clearInterval(d),E()},U=l=>{if(t.isPlaying){if(l.key==="p"||l.key==="P"){l.preventDefault(),N();return}if(!t.isPaused)switch(l.key){case"ArrowLeft":l.preventDefault(),y(-1,0);break;case"ArrowRight":l.preventDefault(),y(1,0);break;case"ArrowDown":l.preventDefault(),y(0,1);break;case"ArrowUp":case" ":l.preventDefault(),B();break;case"a":case"A":l.preventDefault(),y(-1,0);break;case"d":case"D":l.preventDefault(),y(1,0);break;case"s":case"S":l.preventDefault(),y(0,1);break;case"w":case"W":l.preventDefault(),B();break}}};return Q(()=>{const l=localStorage.getItem("tetrisHighScore");l&&(t.highScore=parseInt(l)),j(),p.value=C(),window.addEventListener("keydown",U)}),ee(()=>{d&&clearInterval(d),window.removeEventListener("keydown",U)}),(l,e)=>{var x,w;const o=G("el-button"),g=G("el-text");return n(),i("div",le,[k(Z,{title:J.title},null,8,["title"]),s("div",re,[s("div",ae,[s("div",oe,[s("div",ne,[e[2]||(e[2]=s("h3",{class:"text-sm font-medium text-blue-900"},"得分",-1)),s("p",de,u(t.score),1)]),s("div",ie,[e[3]||(e[3]=s("h3",{class:"text-sm font-medium text-green-900"},"最高分",-1)),s("p",ue,u(t.highScore),1)]),s("div",ce,[e[4]||(e[4]=s("h3",{class:"text-sm font-medium text-purple-900"},"等级",-1)),s("p",ge,u(t.level),1)]),s("div",be,[e[5]||(e[5]=s("h3",{class:"text-sm font-medium text-orange-900"},"消除行数",-1)),s("p",fe,u(t.lines),1)]),s("div",ve,[e[6]||(e[6]=s("h3",{class:"text-sm font-medium text-indigo-900"},"游戏板",-1)),s("p",pe,u(r.boardWidth)+"×"+u(r.boardHeight),1)]),s("div",xe,[e[7]||(e[7]=s("h3",{class:"text-sm font-medium text-red-900"},"速度",-1)),s("p",me,u(r.speedLevel)+"级",1)])]),s("div",he,[s("div",ye,[e[10]||(e[10]=s("span",{class:"text-sm font-medium text-gray-700"},"速度等级:",-1)),k(o,{size:"small",onClick:e[0]||(e[0]=v=>V(-1)),disabled:r.speedLevel<=r.minSpeedLevel,class:"bg-blue-500 hover:bg-blue-600"},{default:m(()=>e[8]||(e[8]=[c(" 慢 ",-1)])),_:1,__:[8]},8,["disabled"]),s("span",_e,u(r.speedLevel),1),k(o,{size:"small",onClick:e[1]||(e[1]=v=>V(1)),disabled:r.speedLevel>=r.maxSpeedLevel,class:"bg-red-500 hover:bg-red-600"},{default:m(()=>e[9]||(e[9]=[c(" 快 ",-1)])),_:1,__:[9]},8,["disabled"]),e[11]||(e[11]=s("span",{class:"text-xs text-gray-500"},"(1慢-10快)",-1))]),s("div",we,[t.isPlaying?(n(),W(o,{key:0,onClick:N,type:t.isPaused?"success":"warning",class:H(t.isPaused?"bg-green-500 hover:bg-green-600":"bg-yellow-500 hover:bg-yellow-600")},{default:m(()=>[c(u(t.isPaused?"继续 (P)":"暂停 (P)"),1)]),_:1},8,["type","class"])):b("",!0),t.isPlaying?(n(),W(o,{key:1,onClick:F,type:"danger",class:"bg-red-500 hover:bg-red-600 border-red-600"},{default:m(()=>e[12]||(e[12]=[c(" 重新开始 ",-1)])),_:1,__:[12]})):b("",!0)])]),s("div",Se,[!t.isPlaying&&!t.gameOver?(n(),W(o,{key:0,onClick:E,type:"primary",class:"bg-blue-500 hover:bg-blue-600 border-blue-600"},{default:m(()=>e[13]||(e[13]=[c(" 开始游戏 ",-1)])),_:1,__:[13]})):b("",!0),t.gameOver?(n(),W(o,{key:1,onClick:F,type:"success",class:"bg-green-500 hover:bg-green-600 border-green-600"},{default:m(()=>e[14]||(e[14]=[c(" 重新开始 ",-1)])),_:1,__:[14]})):b("",!0)]),t.isPaused&&t.isPlaying?(n(),i("div",ke,e[15]||(e[15]=[s("div",{class:"bg-yellow-50 border-2 border-yellow-300 rounded-lg p-4 shadow-md"},[s("h3",{class:"text-lg font-medium text-yellow-900 mb-2"},"游戏已暂停"),s("p",{class:"text-yellow-600"},"按 P 键或点击继续按钮恢复游戏")],-1)]))):b("",!0),s("div",Pe,[s("div",Le,[s("div",ze,[s("div",{class:"border-2 border-gray-400 bg-gray-800 relative",style:P({width:r.boardWidth*r.cellSize+"px",height:r.boardHeight*r.cellSize+"px"})},[(n(!0),i(h,null,L(f.value,(v,_)=>(n(),i(h,{key:_},[(n(!0),i(h,null,L(v,(D,S)=>(n(),i("div",{key:`${S}-${_}`,class:H(["border border-gray-600 absolute",{"bg-gray-700":D===0,"bg-blue-500":D===1}]),style:P({width:r.cellSize+"px",height:r.cellSize+"px",left:S*r.cellSize+"px",top:_*r.cellSize+"px"})},null,6))),128))],64))),128)),a.value&&t.isPlaying?(n(!0),i(h,{key:0},L(a.value.shape,(v,_)=>(n(),i(h,{key:`piece-row-${_}`},[(n(!0),i(h,null,L(v,(D,S)=>(n(),i(h,{key:`piece-${S}-${_}`},[D?(n(),i("div",{key:0,class:"border border-gray-600 absolute",style:P({width:r.cellSize+"px",height:r.cellSize+"px",backgroundColor:T[a.value.type],left:(a.value.x+S)*r.cellSize+"px",top:(a.value.y+_)*r.cellSize+"px"})},null,4)):b("",!0)],64))),128))],64))),128)):b("",!0)],4)]),s("div",Ce,[e[16]||(e[16]=s("h3",{class:"text-lg font-medium text-gray-900 mb-3"},"下一个",-1)),s("div",{class:"border-2 border-gray-400 bg-gray-800 p-2",style:P({display:"grid",gridTemplateColumns:`repeat(${((w=(x=p.value)==null?void 0:x.shape[0])==null?void 0:w.length)||4}, ${r.cellSize*.8}px)`,gap:"1px"})},[p.value?(n(!0),i(h,{key:0},L(p.value.shape.flat(),v=>(n(),i("div",{key:Math.random(),class:H(["border border-gray-600",{"bg-gray-700":!v,"bg-blue-500":v}]),style:P({width:r.cellSize*.8+"px",height:r.cellSize*.8+"px",backgroundColor:v?T[p.value.type]:"#374151"})},null,6))),128)):b("",!0)],4)])])]),t.gameOver?(n(),i("div",Ie,[s("div",De,[e[17]||(e[17]=s("h3",{class:"text-lg font-medium text-red-900 mb-2"},"游戏结束！",-1)),s("p",We,"最终得分: "+u(t.score),1),s("p",Me,"消除行数: "+u(t.lines),1),s("p",$e,"达到等级: "+u(t.level),1),t.score>t.highScore?(n(),i("p",Ae," 新纪录！恭喜你创造了新的最高分！ ")):b("",!0)])])):b("",!0),e[18]||(e[18]=te('<div class="bg-gray-50 rounded-lg p-4 border-2 border-gray-200 shadow-sm" data-v-99baffc8><h3 class="text-lg font-medium text-gray-900 mb-3" data-v-99baffc8>游戏说明</h3><div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600" data-v-99baffc8><div class="bg-white p-3 rounded border border-gray-200" data-v-99baffc8><p data-v-99baffc8><strong class="text-blue-600" data-v-99baffc8>游戏目标：</strong>消除完整的横行，获得高分</p><p data-v-99baffc8><strong class="text-blue-600" data-v-99baffc8>操作方式：</strong>方向键或WASD控制，空格键/W键旋转</p><p data-v-99baffc8><strong class="text-blue-600" data-v-99baffc8>游戏控制：</strong>P键暂停/继续，可调节下落速度</p></div><div class="bg-white p-3 rounded border border-gray-200" data-v-99baffc8><p data-v-99baffc8><strong class="text-green-600" data-v-99baffc8>键盘操作：</strong>A/←左移，D/→右移，S/↓快降，W/↑/空格旋转</p><p data-v-99baffc8><strong class="text-purple-600" data-v-99baffc8>得分规则：</strong>每消除一行+100分×当前等级</p><p data-v-99baffc8><strong class="text-red-600" data-v-99baffc8>升级机制：</strong>每消除10行升一级，速度加快</p></div></div></div>',1))])]),k(R,{title:"描述"},{default:m(()=>[k(g,null,{default:m(()=>e[19]||(e[19]=[c(" 经典俄罗斯方块游戏，考验你的空间思维和反应速度：",-1),s("br",null,null,-1),s("br",null,null,-1),c(" 游戏特色：经典俄罗斯方块玩法，7种不同形状的方块，实时得分统计",-1),s("br",null,null,-1),c(" 操作方式：方向键控制移动，空格键旋转方块，消除完整横行",-1),s("br",null,null,-1),c(" 游戏目标：尽可能多地消除横行，获得高分，挑战更高等级",-1),s("br",null,null,-1),c(" 训练效果：锻炼空间思维能力、反应速度和策略规划",-1),s("br",null,null,-1),s("br",null,null,-1),c(" 适合所有年龄段，是经典的益智游戏。 ",-1)])),_:1,__:[19]})]),_:1})])}}});const Ne=se(Oe,[["__scopeId","data-v-99baffc8"]]);export{Ne as default};
