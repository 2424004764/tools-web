import{_ as Z}from"./DetailHeader.vue_vue_type_script_setup_true_lang-dea41c96.js";import{_ as M}from"./ToolDetail.vue_vue_type_script_setup_true_lang-d5ae32a2.js";import{d as ee,k as le,y as d,E as ae,H as te,r as m,b as i,c as v,h as l,f as k,w as t,i as p,t as R,z as T,F as J,e as G,g as oe,_ as ne}from"./index-7aa63c99.js";const ue={class:"flex flex-col mt-3 flex-1"},se={class:"p-4 rounded-2xl bg-white space-y-4"},de={class:"flex items-center gap-2"},re={key:0,class:"text-xs text-gray-500"},ie={class:"space-y-2"},ve={class:"space-y-2"},pe={class:"space-y-3"},me={key:0},ce={key:1,class:"space-y-2"},_e={class:"space-y-2"},ye={class:"text-sm"},fe={key:0},be={key:1},Ve={key:0},ke=["src"],xe=ee({__name:"PostmanLite",setup(Ue){const W=le({title:"在线请求调试"}),C=d("GET"),f=d(""),h=d([{key:"",value:"",enabled:!0}]),w=d([{key:"",value:"",enabled:!0}]),_=d("none"),E=d([{key:"",value:"",enabled:!0}]),S=d(""),B=d(!1),L=d(""),O=d(null),P=d(null),N=d([]),b=d(""),$=d(""),x=d(null);function j(n){n.value.push({key:"",value:"",enabled:!0})}function D(n,e){n.value.splice(e,1)}const H=ae(()=>{if(!f.value)return"";try{const n=new URL(f.value),e=new URLSearchParams(n.search);return h.value.filter(u=>u.enabled&&u.key).forEach(u=>e.set(u.key,u.value)),n.search=e.toString(),n.toString()}catch{return f.value}});function K(){const n={};return w.value.filter(e=>e.enabled&&e.key).forEach(e=>n[e.key]=e.value),n}function I(n,e){w.value.some(g=>g.enabled&&g.key.toLowerCase()===n.toLowerCase())||w.value.push({key:n,value:e,enabled:!0})}function q(){if(!(C.value==="GET"||C.value==="HEAD")&&_.value!=="none"){if(_.value==="json")return I("Content-Type","application/json"),S.value||"";if(_.value==="form"){I("Content-Type","application/x-www-form-urlencoded");const n=new URLSearchParams;return E.value.filter(e=>e.enabled&&e.key).forEach(e=>n.append(e.key,e.value)),n.toString()}if(_.value==="raw")return S.value}}async function Q(){if(!f.value)return;B.value=!0,L.value="",O.value=null,P.value=null,N.value=[],b.value="",x.value&&(URL.revokeObjectURL(x.value),x.value=null),$.value="";const n=performance.now();try{const e={method:C.value,headers:K()},u=q();u!==void 0&&(e.body=u);const g=H.value||f.value,s=await fetch(g,e),y=performance.now();O.value=Math.round(y-n),L.value=`${s.status} ${s.statusText}`,s.headers.forEach((r,A)=>N.value.push({key:A,value:r,enabled:!0}));const U=await s.arrayBuffer();P.value=U.byteLength;const c=s.headers.get("content-type")||"";if($.value=c,c.startsWith("image/")){const r=new Blob([U],{type:c});x.value=URL.createObjectURL(r),b.value=""}else{let r="";try{r=new TextDecoder("utf-8").decode(U)}catch{r="[二进制内容]"}if(c.includes("application/json"))try{b.value=JSON.stringify(JSON.parse(r),null,2)}catch{b.value=r}else b.value=r}}catch(e){L.value="请求失败",b.value=String((e==null?void 0:e.message)||e)}finally{B.value=!1}}return te(()=>{x.value&&URL.revokeObjectURL(x.value)}),(n,e)=>{const u=m("el-option"),g=m("el-select"),s=m("el-input"),y=m("el-button"),U=m("el-checkbox"),c=m("el-tab-pane"),r=m("el-radio"),A=m("el-radio-group"),z=m("el-tabs"),F=m("el-table-column"),X=m("el-table"),Y=m("el-text");return i(),v("div",ue,[l(Z,{title:W.title},null,8,["title"]),k("div",se,[k("div",de,[l(g,{modelValue:C.value,"onUpdate:modelValue":e[0]||(e[0]=a=>C.value=a),style:{width:"130px"}},{default:t(()=>[l(u,{label:"GET",value:"GET"}),l(u,{label:"POST",value:"POST"}),l(u,{label:"PUT",value:"PUT"}),l(u,{label:"DELETE",value:"DELETE"}),l(u,{label:"PATCH",value:"PATCH"}),l(u,{label:"HEAD",value:"HEAD"}),l(u,{label:"OPTIONS",value:"OPTIONS"})]),_:1},8,["modelValue"]),l(s,{modelValue:f.value,"onUpdate:modelValue":e[1]||(e[1]=a=>f.value=a),placeholder:"https://api.example.com/path"},null,8,["modelValue"]),l(y,{type:"primary",loading:B.value,onClick:Q},{default:t(()=>e[8]||(e[8]=[p("发送",-1)])),_:1,__:[8]},8,["loading"])]),H.value&&H.value!==f.value?(i(),v("div",re,"最终请求: "+R(H.value),1)):T("",!0),l(z,{type:"border-card"},{default:t(()=>[l(c,{label:"Params"},{default:t(()=>[k("div",ie,[(i(!0),v(J,null,G(h.value,(a,V)=>(i(),v("div",{key:V,class:"flex items-center gap-2"},[l(U,{modelValue:a.enabled,"onUpdate:modelValue":o=>a.enabled=o},null,8,["modelValue","onUpdate:modelValue"]),l(s,{modelValue:a.key,"onUpdate:modelValue":o=>a.key=o,placeholder:"key",style:{width:"220px"}},null,8,["modelValue","onUpdate:modelValue"]),l(s,{modelValue:a.value,"onUpdate:modelValue":o=>a.value=o,placeholder:"value"},null,8,["modelValue","onUpdate:modelValue"]),l(y,{text:"",type:"danger",onClick:o=>D(h.value,V)},{default:t(()=>e[9]||(e[9]=[p("删除",-1)])),_:2,__:[9]},1032,["onClick"])]))),128)),l(y,{text:"",type:"primary",onClick:e[2]||(e[2]=a=>j(h.value))},{default:t(()=>e[10]||(e[10]=[p("添加参数",-1)])),_:1,__:[10]})])]),_:1}),l(c,{label:"Headers"},{default:t(()=>[k("div",ve,[(i(!0),v(J,null,G(w.value,(a,V)=>(i(),v("div",{key:V,class:"flex items-center gap-2"},[l(U,{modelValue:a.enabled,"onUpdate:modelValue":o=>a.enabled=o},null,8,["modelValue","onUpdate:modelValue"]),l(s,{modelValue:a.key,"onUpdate:modelValue":o=>a.key=o,placeholder:"Header",style:{width:"260px"}},null,8,["modelValue","onUpdate:modelValue"]),l(s,{modelValue:a.value,"onUpdate:modelValue":o=>a.value=o,placeholder:"Value"},null,8,["modelValue","onUpdate:modelValue"]),l(y,{text:"",type:"danger",onClick:o=>D(w.value,V)},{default:t(()=>e[11]||(e[11]=[p("删除",-1)])),_:2,__:[11]},1032,["onClick"])]))),128)),l(y,{text:"",type:"primary",onClick:e[3]||(e[3]=a=>j(w.value))},{default:t(()=>e[12]||(e[12]=[p("添加Header",-1)])),_:1,__:[12]})])]),_:1}),l(c,{label:"Body"},{default:t(()=>[k("div",pe,[l(A,{modelValue:_.value,"onUpdate:modelValue":e[4]||(e[4]=a=>_.value=a)},{default:t(()=>[l(r,{label:"none"},{default:t(()=>e[13]||(e[13]=[p("none",-1)])),_:1,__:[13]}),l(r,{label:"json"},{default:t(()=>e[14]||(e[14]=[p("JSON",-1)])),_:1,__:[14]}),l(r,{label:"form"},{default:t(()=>e[15]||(e[15]=[p("x-www-form-urlencoded",-1)])),_:1,__:[15]}),l(r,{label:"raw"},{default:t(()=>e[16]||(e[16]=[p("Raw",-1)])),_:1,__:[16]})]),_:1},8,["modelValue"]),_.value==="json"||_.value==="raw"?(i(),v("div",me,[l(s,{modelValue:S.value,"onUpdate:modelValue":e[5]||(e[5]=a=>S.value=a),type:"textarea",rows:8,placeholder:'JSON 或任意文本。JSON示例: {"a":1}'},null,8,["modelValue"])])):T("",!0),_.value==="form"?(i(),v("div",ce,[(i(!0),v(J,null,G(E.value,(a,V)=>(i(),v("div",{key:V,class:"flex items-center gap-2"},[l(U,{modelValue:a.enabled,"onUpdate:modelValue":o=>a.enabled=o},null,8,["modelValue","onUpdate:modelValue"]),l(s,{modelValue:a.key,"onUpdate:modelValue":o=>a.key=o,placeholder:"key",style:{width:"220px"}},null,8,["modelValue","onUpdate:modelValue"]),l(s,{modelValue:a.value,"onUpdate:modelValue":o=>a.value=o,placeholder:"value"},null,8,["modelValue","onUpdate:modelValue"]),l(y,{text:"",type:"danger",onClick:o=>D(E.value,V)},{default:t(()=>e[17]||(e[17]=[p("删除",-1)])),_:2,__:[17]},1032,["onClick"])]))),128)),l(y,{text:"",type:"primary",onClick:e[6]||(e[6]=a=>j(E.value))},{default:t(()=>e[18]||(e[18]=[p("添加字段",-1)])),_:1,__:[18]})])):T("",!0)])]),_:1})]),_:1})]),l(M,{title:"响应"},{default:t(()=>[k("div",_e,[k("div",ye,[p(" 状态: "+R(L.value)+" ",1),O.value!==null?(i(),v("span",fe," | 时间: "+R(O.value)+"ms",1)):T("",!0),P.value!==null?(i(),v("span",be," | 大小: "+R((P.value/1024).toFixed(2))+" KB",1)):T("",!0)]),l(z,null,{default:t(()=>[l(c,{label:"Body"},{default:t(()=>[$.value.startsWith("image/")?(i(),v("div",Ve,[k("img",{src:x.value||"",alt:"响应图片",style:{"max-width":"100%","max-height":"60vh"}},null,8,ke)])):(i(),oe(s,{key:1,type:"textarea",rows:12,modelValue:b.value,"onUpdate:modelValue":e[7]||(e[7]=a=>b.value=a)},null,8,["modelValue"]))]),_:1}),l(c,{label:"Headers"},{default:t(()=>[l(X,{data:N.value,size:"small"},{default:t(()=>[l(F,{prop:"key",label:"Header",width:"260"}),l(F,{prop:"value",label:"Value"})]),_:1},8,["data"])]),_:1})]),_:1})])]),_:1}),l(M,{title:"说明"},{default:t(()=>[l(Y,null,{default:t(()=>e[19]||(e[19]=[p(" 仅支持目标接口已开启 CORS 或同源的请求；如需跨域访问，可在服务端增加通用代理后再使用。 ",-1)])),_:1,__:[19]})]),_:1})])}}});const Te=ne(xe,[["__scopeId","data-v-74056273"]]);export{Te as default};
